var jP=Object.defineProperty,GP=Object.defineProperties;var WP=Object.getOwnPropertyDescriptors;var qf=Object.getOwnPropertySymbols;var HM=Object.prototype.hasOwnProperty,zM=Object.prototype.propertyIsEnumerable;var VM=(n,e,t)=>e in n?jP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})HM.call(e,t)&&VM(n,t,e[t]);if(qf)for(var t of qf(e))zM.call(e,t)&&VM(n,t,e[t]);return n},Ye=(n,e)=>GP(n,WP(e));var jM=(n,e)=>{var t={};for(var i in n)HM.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&qf)for(var i of qf(n))e.indexOf(i)<0&&zM.call(n,i)&&(t[i]=n[i]);return t};var xr=(n,e,t)=>new Promise((i,r)=>{var o=l=>{try{a(t.next(l))}catch(c){r(c)}},s=l=>{try{a(t.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var C_;function Xf(){return C_}function Lr(n){let e=C_;return C_=n,e}var GM=Symbol("NotFound");function sl(n){return n===GM||n?.name==="\u0275NotFound"}function Qf(n,e){return Object.is(n,e)}var Pn=null,Yf=!1,T_=1,$P=null,Fn=Symbol("SIGNAL");function et(n){let e=Pn;return Pn=n,e}function eh(){return Pn}var Yo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gs(n){if(Yf)throw new Error("");if(Pn===null)return;Pn.consumerOnSignalRead(n);let e=Pn.nextProducerIndex++;if(ih(Pn),e<Pn.producerNode.length&&Pn.producerNode[e]!==n&&tu(Pn)){let t=Pn.producerNode[e];nh(t,Pn.producerIndexOfThis[e])}Pn.producerNode[e]!==n&&(Pn.producerNode[e]=n,Pn.producerIndexOfThis[e]=tu(Pn)?$M(n,Pn,e):0),Pn.producerLastReadVersion[e]=n.version}function WM(){T_++}function th(n){if(!(tu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===T_)){if(!n.producerMustRecompute(n)&&!Ws(n)){Jf(n);return}n.producerRecomputeValue(n),Jf(n)}}function D_(n){if(n.liveConsumerNode===void 0)return;let e=Yf;Yf=!0;try{for(let t of n.liveConsumerNode)t.dirty||qP(t)}finally{Yf=e}}function I_(){return Pn?.consumerAllowSignalWrites!==!1}function qP(n){n.dirty=!0,D_(n),n.consumerMarkedDirty?.(n)}function Jf(n){n.dirty=!1,n.lastCleanEpoch=T_}function io(n){return n&&(n.nextProducerIndex=0),et(n)}function Zo(n,e){if(et(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)nh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ws(n){ih(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(th(t),i!==t.version))return!0}return!1}function al(n){if(ih(n),tu(n))for(let e=0;e<n.producerNode.length;e++)nh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $M(n,e,t){if(qM(n),n.liveConsumerNode.length===0&&XM(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=$M(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function nh(n,e){if(qM(n),n.liveConsumerNode.length===1&&XM(n))for(let i=0;i<n.producerNode.length;i++)nh(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];ih(r),r.producerIndexOfThis[i]=e}}function tu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ih(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function qM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function XM(n){return n.producerNode!==void 0}function rh(n){$P?.(n)}function nu(n,e){let t=Object.create(XP);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(th(t),Gs(t),t.value===eu)throw t.error;return t.value};return i[Fn]=t,rh(t),i}var Zf=Symbol("UNSET"),Kf=Symbol("COMPUTING"),eu=Symbol("ERRORED"),XP=Ye($({},Yo),{value:Zf,dirty:!0,error:null,equal:Qf,kind:"computed",producerMustRecompute(n){return n.value===Zf||n.value===Kf},producerRecomputeValue(n){if(n.value===Kf)throw new Error("");let e=n.value;n.value=Kf;let t=io(n),i,r=!1;try{i=n.computation(),et(null),r=e!==Zf&&e!==eu&&i!==eu&&n.equal(e,i)}catch(o){i=eu,n.error=o}finally{Zo(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function YP(){throw new Error}var YM=YP;function ZM(n){YM(n)}function A_(n){YM=n}var ZP=null;function R_(n,e){let t=Object.create(iu);t.value=n,e!==void 0&&(t.equal=e);let i=()=>KM(t);return i[Fn]=t,rh(t),[i,s=>ll(t,s),s=>N_(t,s)]}function KM(n){return Gs(n),n.value}function ll(n,e){I_()||ZM(n),n.equal(n.value,e)||(n.value=e,KP(n))}function N_(n,e){I_()||ZM(n),ll(n,e(n.value))}var iu=Ye($({},Yo),{equal:Qf,value:void 0,kind:"signal"});function KP(n){n.version++,WM(),D_(n),ZP?.(n)}function gt(n){return typeof n=="function"}function cl(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var oh=cl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $s(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(gt(i))try{i()}catch(o){e=o instanceof oh?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{JM(o)}catch(s){e=e??[],s instanceof oh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)JM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$s(t,e)}remove(e){let{_finalizers:t}=this;t&&$s(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var O_=Mt.EMPTY;function sh(n){return n instanceof Mt||n&&"closed"in n&&gt(n.remove)&&gt(n.add)&&gt(n.unsubscribe)}function JM(n){gt(n)?n():n.unsubscribe()}var Er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ul={setTimeout(n,e,...t){let{delegate:i}=ul;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ul;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ah(n){ul.setTimeout(()=>{let{onUnhandledError:e}=Er;if(e)e(n);else throw n})}function ru(){}var QM=P_("C",void 0,void 0);function eS(n){return P_("E",void 0,n)}function tS(n){return P_("N",n,void 0)}function P_(n,e,t){return{kind:n,value:e,error:t}}var qs=null;function dl(n){if(Er.useDeprecatedSynchronousErrorHandling){let e=!qs;if(e&&(qs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=qs;if(qs=null,t)throw i}}else n()}function nS(n){Er.useDeprecatedSynchronousErrorHandling&&qs&&(qs.errorThrown=!0,qs.error=n)}var Xs=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sh(e)&&e.add(this)):this.destination=eF}static create(e,t,i){return new ro(e,t,i)}next(e){this.isStopped?L_(tS(e),this):this._next(e)}error(e){this.isStopped?L_(eS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?L_(QM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JP=Function.prototype.bind;function F_(n,e){return JP.call(n,e)}var k_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){lh(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){lh(i)}else lh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){lh(t)}}},ro=class extends Xs{constructor(e,t,i){super();let r;if(gt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Er.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&F_(e.next,o),error:e.error&&F_(e.error,o),complete:e.complete&&F_(e.complete,o)}):r=e}this.destination=new k_(r)}};function lh(n){Er.useDeprecatedSynchronousErrorHandling?nS(n):ah(n)}function QP(n){throw n}function L_(n,e){let{onStoppedNotification:t}=Er;t&&ul.setTimeout(()=>t(n,e))}var eF={closed:!0,next:ru,error:QP,complete:ru};var fl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function di(n){return n}function U_(...n){return B_(n)}function B_(n){return n.length===0?di:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=nF(t)?t:new ro(t,i,r);return dl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=iS(i),new i((r,o)=>{let s=new ro({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[fl](){return this}pipe(...t){return B_(t)(this)}toPromise(t){return t=iS(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function iS(n){var e;return(e=n??Er.Promise)!==null&&e!==void 0?e:Promise}function tF(n){return n&&gt(n.next)&&gt(n.error)&&gt(n.complete)}function nF(n){return n&&n instanceof Xs||tF(n)&&sh(n)}function V_(n){return gt(n?.lift)}function ot(n){return e=>{if(V_(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function tt(n,e,t,i,r){return new H_(n,e,t,i,r)}var H_=class extends Xs{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hl(){return ot((n,e)=>{let t=null;n._refCount++;let i=tt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var pl=class extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,V_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mt;let t=this.getSubject();e.add(this.source.subscribe(tt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mt.EMPTY)}return e}refCount(){return hl()(this)}};var rS=cl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new ch(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new rS}next(t){dl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){dl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){dl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?O_:(this.currentObservers=null,o.push(t),new Mt(()=>{this.currentObservers=null,$s(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new dt;return t.source=this,t}}return n.create=(e,t)=>new ch(e,t),n})(),ch=class extends Te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:O_}};var Ln=class extends Te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var ou={now(){return(ou.delegate||Date).now()},delegate:void 0};var uh=class extends Te{constructor(e=1/0,t=1/0,i=ou){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var dh=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var su={setInterval(n,e,...t){let{delegate:i}=su;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=su;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fh=class extends dh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return su.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&su.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$s(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ml=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};ml.now=ou.now;var hh=class extends ml{constructor(e,t=ml.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var au=new hh(fh),oS=au;var Dn=new dt(n=>n.complete());function ph(n){return n&&gt(n.schedule)}function z_(n){return n[n.length-1]}function mh(n){return gt(z_(n))?n.pop():void 0}function kr(n){return ph(z_(n))?n.pop():void 0}function sS(n,e){return typeof z_(n)=="number"?n.pop():e}function lS(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function aS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ys(n){return this instanceof Ys?(this.v=n,this):new Ys(n)}function cS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){i[f]&&(r[f]=function(v){return new Promise(function(g,p){o.push([f,v,g,p])>1||l(f,v)})},m&&(r[f]=m(r[f])))}function l(f,m){try{c(i[f](m))}catch(v){h(o[0][3],v)}}function c(f){f.value instanceof Ys?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,m){f(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}function uS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof aS=="function"?aS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var gh=n=>n&&typeof n.length=="number"&&typeof n!="function";function vh(n){return gt(n?.then)}function _h(n){return gt(n[fl])}function yh(n){return Symbol.asyncIterator&&gt(n?.[Symbol.asyncIterator])}function bh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xh=iF();function Eh(n){return gt(n?.[xh])}function wh(n){return cS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Ys(t.read());if(r)return yield Ys(void 0);yield yield Ys(i)}}finally{t.releaseLock()}})}function Mh(n){return gt(n?.getReader)}function en(n){if(n instanceof dt)return n;if(n!=null){if(_h(n))return rF(n);if(gh(n))return oF(n);if(vh(n))return sF(n);if(yh(n))return dS(n);if(Eh(n))return aF(n);if(Mh(n))return lF(n)}throw bh(n)}function rF(n){return new dt(e=>{let t=n[fl]();if(gt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oF(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sF(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ah)})}function aF(n){return new dt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function dS(n){return new dt(e=>{cF(n,e).catch(t=>e.error(t))})}function lF(n){return dS(wh(n))}function cF(n,e){var t,i,r,o;return lS(this,void 0,void 0,function*(){try{for(t=uS(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Ei(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Sh(n,e=0){return ot((t,i)=>{t.subscribe(tt(i,r=>Ei(i,n,()=>i.next(r),e),()=>Ei(i,n,()=>i.complete(),e),r=>Ei(i,n,()=>i.error(r),e)))})}function Ch(n,e=0){return ot((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function fS(n,e){return en(n).pipe(Ch(e),Sh(e))}function hS(n,e){return en(n).pipe(Ch(e),Sh(e))}function pS(n,e){return new dt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function mS(n,e){return new dt(t=>{let i;return Ei(t,e,()=>{i=n[xh](),Ei(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>gt(i?.return)&&i.return()})}function Th(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{Ei(t,e,()=>{let i=n[Symbol.asyncIterator]();Ei(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function gS(n,e){return Th(wh(n),e)}function vS(n,e){if(n!=null){if(_h(n))return fS(n,e);if(gh(n))return pS(n,e);if(vh(n))return hS(n,e);if(yh(n))return Th(n,e);if(Eh(n))return mS(n,e);if(Mh(n))return gS(n,e)}throw bh(n)}function fn(n,e){return e?vS(n,e):en(n)}function Fe(...n){let e=kr(n);return fn(n,e)}function Ko(n,e){let t=gt(n)?n:()=>n,i=r=>r.error(t());return new dt(e?r=>e.schedule(i,0,r):i)}function Dh(n){return!!n&&(n instanceof dt||gt(n.lift)&&gt(n.subscribe))}var oo=cl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _S(n){return n instanceof Date&&!isNaN(n)}function Be(n,e){return ot((t,i)=>{let r=0;t.subscribe(tt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:uF}=Array;function dF(n,e){return uF(e)?n(...e):n(e)}function Ih(n){return Be(e=>dF(n,e))}var{isArray:fF}=Array,{getPrototypeOf:hF,prototype:pF,keys:mF}=Object;function Ah(n){if(n.length===1){let e=n[0];if(fF(e))return{args:e,keys:null};if(gF(e)){let t=mF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function gF(n){return n&&typeof n=="object"&&hF(n)===pF}function Rh(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function gl(...n){let e=kr(n),t=mh(n),{args:i,keys:r}=Ah(n);if(i.length===0)return fn([],e);let o=new dt(vF(i,e,r?s=>Rh(r,s):di));return t?o.pipe(Ih(t)):o}function vF(n,e,t=di){return i=>{yS(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)yS(e,()=>{let c=fn(n[l],e),u=!1;c.subscribe(tt(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function yS(n,e,t){n?Ei(t,n,e):e()}function bS(n,e,t,i,r,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=v=>c<i?m(v):l.push(v),m=v=>{o&&e.next(v),c++;let g=!1;en(t(v,u++)).subscribe(tt(e,p=>{r?.(p),o?f(p):e.next(p)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){let p=l.shift();s?Ei(e,s,()=>m(p)):m(p)}h()}catch(p){e.error(p)}}))};return n.subscribe(tt(e,f,()=>{d=!0,h()})),()=>{a?.()}}function kn(n,e,t=1/0){return gt(e)?kn((i,r)=>Be((o,s)=>e(i,o,r,s))(en(n(i,r))),t):(typeof e=="number"&&(t=e),ot((i,r)=>bS(i,r,n,t)))}function Nh(n=1/0){return kn(di,n)}function xS(){return Nh(1)}function Jo(...n){return xS()(fn(n,kr(n)))}function Zs(n){return new dt(e=>{en(n()).subscribe(e)})}function lu(...n){let e=mh(n),{args:t,keys:i}=Ah(n),r=new dt(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;en(t[u]).subscribe(tt(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?Rh(i,a):a),o.complete())}))}});return e?r.pipe(Ih(e)):r}function ES(n=0,e,t=oS){let i=-1;return e!=null&&(ph(e)?t=e:i=e),new dt(r=>{let o=_S(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function so(...n){let e=kr(n),t=sS(n,1/0),i=n;return i.length?i.length===1?en(i[0]):Nh(t)(fn(i,e)):Dn}function Lt(n,e){return ot((t,i)=>{let r=0;t.subscribe(tt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function wS(n){return ot((e,t)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(tt(t,c=>{i=!0,r=c,o||en(n(c)).subscribe(o=tt(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}function Oh(n,e=au){return wS(()=>ES(n,e))}function Ur(n){return ot((e,t)=>{let i=null,r=!1,o;i=e.subscribe(tt(t,void 0,void 0,s=>{o=en(n(s,Ur(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function MS(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(tt(s,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Qo(n,e){return gt(e)?kn(n,e,1):kn(n,1)}function es(n,e=au){return ot((t,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+n,u=e.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}t.subscribe(tt(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function ts(n){return ot((e,t)=>{let i=!1;e.subscribe(tt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function qn(n){return n<=0?()=>Dn:ot((e,t)=>{let i=0;e.subscribe(tt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Ph(n,e=di){return n=n??_F,ot((t,i)=>{let r,o=!0;t.subscribe(tt(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function _F(n,e){return n===e}function Fh(n=yF){return ot((e,t)=>{let i=!1;e.subscribe(tt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function yF(){return new oo}function ns(n){return ot((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ao(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Lt((r,o)=>n(r,o,i)):di,qn(1),t?ts(e):Fh(()=>new oo))}function vl(n){return n<=0?()=>Dn:ot((e,t)=>{let i=[];e.subscribe(tt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function j_(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Lt((r,o)=>n(r,o,i)):di,vl(1),t?ts(e):Fh(()=>new oo))}function Lh(){return ot((n,e)=>{let t,i=!1;n.subscribe(tt(e,r=>{let o=t;t=r,i&&e.next([o,r]),i=!0}))})}function G_(n,e){return ot(MS(n,e,arguments.length>=2,!0))}function cu(n={}){let{connector:e=()=>new Te,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},m=()=>{let v=s;f(),v?.unsubscribe()};return ot((v,g)=>{c++,!d&&!u&&h();let p=l=l??e();g.add(()=>{c--,c===0&&!d&&!u&&(a=W_(m,r))}),p.subscribe(g),!s&&c>0&&(s=new ro({next:T=>p.next(T),error:T=>{d=!0,h(),a=W_(f,t,T),p.error(T)},complete:()=>{u=!0,h(),a=W_(f,i),p.complete()}}),en(v).subscribe(s))})(o)}}function W_(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new ro({next:()=>{i.unsubscribe(),n()}});return en(e(...t)).subscribe(i)}function kh(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,cu({connector:()=>new uh(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function uu(n){return Lt((e,t)=>n<=t)}function Ai(...n){let e=kr(n);return ot((t,i)=>{(e?Jo(n,t,e):Jo(n,t)).subscribe(i)})}function Xn(n,e){return ot((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(tt(i,l=>{r?.unsubscribe();let c=0,u=o++;en(n(l,u)).subscribe(r=tt(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Un(n){return ot((e,t)=>{en(n).subscribe(tt(t,()=>t.complete(),ru)),!t.closed&&e.subscribe(t)})}function $_(n,e=!1){return ot((t,i)=>{let r=0;t.subscribe(tt(i,o=>{let s=n(o,r++);(s||e)&&i.next(o),!s&&i.complete()}))})}function hn(n,e,t){let i=gt(n)||e||t?{next:n,error:e,complete:t}:n;return i?ot((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(tt(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):di}function SS(n){let e=et(null);try{return n()}finally{et(e)}}var zh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",be=class extends Error{code;constructor(e,t){super(rs(e,t)),this.code=e}};function bF(n){return`NG0${Math.abs(n)}`}function rs(n,e){return`${bF(n)}${e?": "+e:""}`}var yl=globalThis;function jt(n){for(let e in n)if(n[e]===jt)return e;throw Error("")}function DS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function co(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(co).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function jh(n,e){return n?e?`${n} ${e}`:n:e||""}var xF=jt({__forward_ref__:jt});function Ni(n){return n.__forward_ref__=Ni,n.toString=function(){return co(this())},n}function Yn(n){return iy(n)?n():n}function iy(n){return typeof n=="function"&&n.hasOwnProperty(xF)&&n.__forward_ref__===Ni}function IS(n,e){n==null&&ry(e,n,null,"!=")}function ry(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function gu(n){return EF(n,Gh)}function oy(n){return gu(n)!==null}function EF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function wF(n){let e=n?.[Gh]??null;return e||null}function X_(n){return n&&n.hasOwnProperty(Bh)?n[Bh]:null}var Gh=jt({\u0275prov:jt}),Bh=jt({\u0275inj:jt}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sy(n){return n&&!!n.\u0275providers}var ay=jt({\u0275cmp:jt}),ly=jt({\u0275dir:jt}),cy=jt({\u0275pipe:jt}),uy=jt({\u0275mod:jt}),hu=jt({\u0275fac:jt}),na=jt({__NG_ELEMENT_ID__:jt}),CS=jt({__NG_ENV_ID__:jt});function Wh(n){return typeof n=="string"?n:n==null?"":String(n)}function Vh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Wh(n)}var dy=jt({ngErrorCode:jt}),AS=jt({ngErrorMessage:jt}),fu=jt({ngTokenPath:jt});function fy(n,e){return RS("",-200,e)}function $h(n,e){throw new be(-201,!1)}function MF(n,e){n[fu]??=[];let t=n[fu],i;typeof e=="object"&&"multi"in e&&e?.multi===!0?(IS(e.provide,"Token with multi: true should have a provide property"),i=Vh(e.provide)):i=Vh(e),t[0]!==i&&n[fu].unshift(i)}function SF(n,e){let t=n[fu],i=n[dy],r=n[AS]||n.message;return n.message=TF(r,i,t,e),n}function RS(n,e,t){let i=new be(e,n);return i[dy]=e,i[AS]=n,t&&(i[fu]=t),i}function CF(n){return n[dy]}function TF(n,e,t=[],i=null){let r="";t&&t.length>1&&(r=` Path: ${t.join(" -> ")}.`);let o=i?` Source: ${i}.`:"";return rs(e,`${n}${o}${r}`)}var Y_;function NS(){return Y_}function Ri(n){let e=Y_;return Y_=n,e}function hy(n,e,t){let i=gu(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;$h(n,"Injector")}var DF={},Ks=DF,IF="__NG_DI_FLAG__",Z_=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Js(t)||0;try{return this.injector.get(e,i&8?null:Ks,i)}catch(r){if(sl(r))return r;throw r}}};function AF(n,e=0){let t=Xf();if(t===void 0)throw new be(-203,!1);if(t===null)return hy(n,void 0,e);{let i=RF(e),r=t.retrieve(n,i);if(sl(r)){if(i.optional)return null;throw r}return r}}function Ge(n,e=0){return(NS()||AF)(Yn(n),e)}function M(n,e){return Ge(n,Js(e))}function Js(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function RF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function K_(n){let e=[];for(let t=0;t<n.length;t++){let i=Yn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new be(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=NF(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(Ge(r,o))}else e.push(Ge(i))}return e}function NF(n){return n[IF]}function Qs(n,e){let t=n.hasOwnProperty(hu);return t?n[hu]:null}function OS(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function PS(n){return n.flat(Number.POSITIVE_INFINITY)}function qh(n,e){n.forEach(t=>Array.isArray(t)?qh(t,e):e(t))}function py(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function vu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function FS(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function LS(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Xh(n,e,t){let i=bl(n,e);return i>=0?n[i|1]=t:(i=~i,LS(n,i,e,t)),i}function Yh(n,e){let t=bl(n,e);if(t>=0)return n[t|1]}function bl(n,e){return OF(n,e,1)}function OF(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var os={},ii=[],Br=new J(""),my=new J("",-1),gy=new J(""),pu=class{get(e,t=Ks){if(t===Ks){let r=RS("",-201);throw r.name="\u0275NotFound",r}return t}};function vy(n){return n[uy]||null}function uo(n){return n[ay]||null}function _y(n){return n[ly]||null}function kS(n){return n[cy]||null}function fo(n){return{\u0275providers:n}}function US(...n){return{\u0275providers:yy(!0,n),\u0275fromNgModule:!0}}function yy(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return qh(e,s=>{let a=s;Hh(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&BS(r,o),t}function BS(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];by(r,o=>{e(o,i)})}}function Hh(n,e,t,i){if(n=Yn(n),!n)return!1;let r=null,o=X_(n),s=!o&&uo(n);if(!o&&!s){let l=n.ngModule;if(o=X_(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Hh(c,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{qh(o.imports,u=>{Hh(u,e,t,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&BS(c,e)}if(!a){let c=Qs(r)||(()=>new r);e({provide:r,useFactory:c,deps:ii},r),e({provide:gy,useValue:r,multi:!0},r),e({provide:Br,useValue:()=>Ge(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=n;by(l,u=>{e(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function by(n,e){for(let t of n)sy(t)&&(t=t.\u0275providers),Array.isArray(t)?by(t,e):e(t)}var PF=jt({provide:String,useValue:jt});function VS(n){return n!==null&&typeof n=="object"&&PF in n}function FF(n){return!!(n&&n.useExisting)}function LF(n){return!!(n&&n.useFactory)}function ea(n){return typeof n=="function"}function HS(n){return!!n.useClass}var _u=new J(""),Uh={},TS={},q_;function xl(){return q_===void 0&&(q_=new pu),q_}var pn=class{},ta=class extends pn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Q_(e,s=>this.processProvider(s)),this.records.set(my,_l(void 0,this)),r.has("environment")&&this.records.set(pn,_l(void 0,this));let o=this.records.get(_u);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gy,ii,{self:!0}))}retrieve(e,t){let i=Js(t)||0;try{return this.get(e,Ks,i)}catch(r){if(sl(r))return r;throw r}}destroy(){du(this),this._destroyed=!0;let e=et(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),et(e)}}onDestroy(e){return du(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){du(this);let t=Lr(this),i=Ri(void 0),r;try{return e()}finally{Lr(t),Ri(i)}}get(e,t=Ks,i){if(du(this),e.hasOwnProperty(CS))return e[CS](this);let r=Js(i),o,s=Lr(this),a=Ri(void 0);try{if(!(r&4)){let c=this.records.get(e);if(c===void 0){let u=HF(e)&&gu(e);u&&this.injectableDefInScope(u)?c=_l(J_(e),Uh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let l=r&2?xl():this.parent;return t=r&8&&t===Ks?null:t,l.get(e,t)}catch(l){let c=CF(l);throw c===-200||c===-201?new be(c,null):l}finally{Ri(a),Lr(s)}}resolveInjectorInitializers(){let e=et(null),t=Lr(this),i=Ri(void 0),r;try{let o=this.get(Br,ii,{self:!0});for(let s of o)s()}finally{Lr(t),Ri(i),et(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(co(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Yn(e);let t=ea(e)?e:Yn(e&&e.provide),i=UF(e);if(!ea(e)&&e.multi===!0){let r=this.records.get(t);r||(r=_l(void 0,Uh,!0),r.factory=()=>K_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=et(null);try{if(t.value===TS)throw fy(co(e));return t.value===Uh&&(t.value=TS,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&VF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{et(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function J_(n){let e=gu(n),t=e!==null?e.factory:Qs(n);if(t!==null)return t;if(n instanceof J)throw new be(204,!1);if(n instanceof Function)return kF(n);throw new be(204,!1)}function kF(n){if(n.length>0)throw new be(204,!1);let t=wF(n);return t!==null?()=>t.factory(n):()=>new n}function UF(n){if(VS(n))return _l(void 0,n.useValue);{let e=xy(n);return _l(e,Uh)}}function xy(n,e,t){let i;if(ea(n)){let r=Yn(n);return Qs(r)||J_(r)}else if(VS(n))i=()=>Yn(n.useValue);else if(LF(n))i=()=>n.useFactory(...K_(n.deps||[]));else if(FF(n))i=(r,o)=>Ge(Yn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=Yn(n&&(n.useClass||n.provide));if(BF(n))i=()=>new r(...K_(n.deps));else return Qs(r)||J_(r)}return i}function du(n){if(n.destroyed)throw new be(205,!1)}function _l(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function BF(n){return!!n.deps}function VF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function HF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Q_(n,e){for(let t of n)Array.isArray(t)?Q_(t,e):t&&sy(t)?Q_(t.\u0275providers,e):e(t)}function ri(n,e){let t;n instanceof ta?(du(n),t=n):t=new Z_(n);let i,r=Lr(t),o=Ri(void 0);try{return e()}finally{Lr(r),Ri(o)}}function zS(){return NS()!==void 0||Xf()!=null}var fi=0,ze=1,Je=2,Bn=3,er=4,hi=5,pi=6,El=7,Mn=8,ia=9,ho=10,$t=11,wl=12,Ey=13,ra=14,Kn=15,ss=16,oa=17,Vr=18,yu=19,wy=20,lo=21,Zh=22,po=23,Oi=24,sa=25,Jt=26,jS=1,aa=6,Hr=7,bu=8,la=9,Vn=10;function Pi(n){return Array.isArray(n)&&typeof n[jS]=="object"}function Fi(n){return Array.isArray(n)&&n[jS]===!0}function My(n){return(n.flags&4)!==0}function mo(n){return n.componentOffset>-1}function xu(n){return(n.flags&1)===1}function zr(n){return!!n.template}function ca(n){return(n[Je]&512)!==0}function ua(n){return(n[Je]&256)===256}var Sy="svg",GS="math";function Li(n){for(;Array.isArray(n);)n=n[fi];return n}function Cy(n,e){return Li(e[n])}function tr(n,e){return Li(e[n.index])}function Eu(n,e){return n.data[e]}function WS(n,e){return n[e]}function nr(n,e){let t=e[n];return Pi(t)?t:t[fi]}function $S(n){return(n[Je]&4)===4}function Kh(n){return(n[Je]&128)===128}function qS(n){return Fi(n[Bn])}function ir(n,e){return e==null?null:n[e]}function Ty(n){n[oa]=0}function Dy(n){n[Je]&1024||(n[Je]|=1024,Kh(n)&&as(n))}function XS(n,e){for(;n>0;)e=e[ra],n--;return e}function wu(n){return!!(n[Je]&9216||n[Oi]?.dirty)}function Jh(n){n[ho].changeDetectionScheduler?.notify(8),n[Je]&64&&(n[Je]|=1024),wu(n)&&as(n)}function as(n){n[ho].changeDetectionScheduler?.notify(0);let e=is(n);for(;e!==null&&!(e[Je]&8192||(e[Je]|=8192,!Kh(e)));)e=is(e)}function Iy(n,e){if(ua(n))throw new be(911,!1);n[lo]===null&&(n[lo]=[]),n[lo].push(e)}function YS(n,e){if(n[lo]===null)return;let t=n[lo].indexOf(e);t!==-1&&n[lo].splice(t,1)}function is(n){let e=n[Bn];return Fi(e)?e[Bn]:e}function Ay(n){return n[El]??=[]}function Ry(n){return n.cleanup??=[]}function ZS(n,e,t,i){let r=Ay(e);r.push(t),n.firstCreatePass&&Ry(n).push(i,r.length-1)}var Et={lFrame:lC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Mu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Mu||{}),zF=0,ey=!1;function KS(){return Et.lFrame.elementDepthCount}function JS(){Et.lFrame.elementDepthCount++}function Ny(){Et.lFrame.elementDepthCount--}function Oy(){return Et.bindingsEnabled}function Qh(){return Et.skipHydrationRootTNode!==null}function Py(n){return Et.skipHydrationRootTNode===n}function QS(n){Et.skipHydrationRootTNode=n}function Fy(){Et.skipHydrationRootTNode=null}function vt(){return Et.lFrame.lView}function In(){return Et.lFrame.tView}function Jn(n){return Et.lFrame.contextLView=n,n[Mn]}function Qn(n){return Et.lFrame.contextLView=null,n}function ei(){let n=Ly();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ly(){return Et.lFrame.currentTNode}function eC(){let n=Et.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ml(n,e){let t=Et.lFrame;t.currentTNode=n,t.isParent=e}function ky(){return Et.lFrame.isParent}function Uy(){Et.lFrame.isParent=!1}function tC(){return Et.lFrame.contextLView}function By(n){ry("Must never be called in production mode"),zF=n}function Vy(){return ey}function Sl(n){let e=ey;return ey=n,e}function Hy(){let n=Et.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function nC(n){return Et.lFrame.bindingIndex=n}function da(){return Et.lFrame.bindingIndex++}function zy(n){let e=Et.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function iC(){return Et.lFrame.inI18n}function rC(n,e){let t=Et.lFrame;t.bindingIndex=t.bindingRootIndex=n,ep(e)}function oC(){return Et.lFrame.currentDirectiveIndex}function ep(n){Et.lFrame.currentDirectiveIndex=n}function sC(n){let e=Et.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function tp(){return Et.lFrame.currentQueryIndex}function Su(n){Et.lFrame.currentQueryIndex=n}function jF(n){let e=n[ze];return e.type===2?e.declTNode:e.type===1?n[hi]:null}function jy(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=jF(o),r===null||(o=o[ra],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Et.lFrame=aC();return i.currentTNode=e,i.lView=n,!0}function np(n){let e=aC(),t=n[ze];Et.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function aC(){let n=Et.lFrame,e=n===null?null:n.child;return e===null?lC(n):e}function lC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function cC(){let n=Et.lFrame;return Et.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Gy=cC;function ip(){let n=cC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uC(n){return(Et.lFrame.contextLView=XS(n,Et.lFrame.contextLView))[Mn]}function go(){return Et.lFrame.selectedIndex}function ls(n){Et.lFrame.selectedIndex=n}function rp(){let n=Et.lFrame;return Eu(n.tView,n.selectedIndex)}function Cl(){Et.lFrame.currentNamespace=Sy}function Wy(){return Et.lFrame.currentNamespace}var dC=!0;function op(){return dC}function vo(n){dC=n}function ty(n,e=null,t=null,i){let r=$y(n,e,t,i);return r.resolveInjectorInitializers(),r}function $y(n,e=null,t=null,i,r=new Set){let o=[t||ii,US(n)];return i=i||(typeof n=="object"?void 0:co(n)),new ta(o,e||xl(),i||null,r)}var It=class n{static THROW_IF_NOT_FOUND=Ks;static NULL=new pu;static create(e,t){if(Array.isArray(e))return ty({name:""},t,e,"");{let i=e.name??"";return ty({name:i},e.parent,e.providers,i)}}static \u0275prov=ne({token:n,providedIn:"any",factory:()=>Ge(my)});static __NG_ELEMENT_ID__=-1},st=new J(""),ki=(()=>{class n{static __NG_ELEMENT_ID__=GF;static __NG_ENV_ID__=t=>t}return n})(),mu=class extends ki{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ua(this._lView)}onDestroy(e){let t=this._lView;return Iy(t,e),()=>YS(t,e)}};function GF(){return new mu(vt())}var Zn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Mr=new J("",{providedIn:"root",factory:()=>{let n=M(pn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Zn),e.handleError(t))}}}),fC={provide:Br,useValue:()=>void M(Zn),multi:!0};function _o(n){return typeof n=="function"&&n[Fn]!==void 0}function nn(n,e){let[t,i,r]=R_(n,e?.equal),o=t,s=o[Fn];return o.set=i,o.update=r,o.asReadonly=qy.bind(o),o}function qy(){let n=this[Fn];if(n.readonlyFn===void 0){let e=()=>this();e[Fn]=n,n.readonlyFn=e}return n.readonlyFn}var wr=class{},Tl=new J("",{providedIn:"root",factory:()=>!1});var Xy=new J(""),Yy=new J("");var fa=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=WF}return n})();function WF(){return new fa(vt(),ei())}var yo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ln(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new dt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})();function ha(...n){}var Cu=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new ny})}return n})(),ny=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Uu(n){return{toString:n}.toString()}function QF(n){return typeof n=="function"}var pp=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function qC(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Sn=(()=>{let n=()=>XC;return n.ngInherit=!0,n})();function XC(n){return n.type.prototype.ngOnChanges&&(n.setInput=tL),eL}function eL(){let n=ZC(this),e=n?.current;if(e){let t=n.previous;if(t===os)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function tL(n,e,t,i,r){let o=this.declaredInputs[i],s=ZC(n)||nL(n,{previous:os,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new pp(c&&c.currentValue,t,l===os),qC(n,e,r,t)}var YC="__ngSimpleChanges__";function ZC(n){return n[YC]||null}function nL(n,e){return n[YC]=e}var hC=[];var qt=function(n,e=null,t){for(let i=0;i<hC.length;i++){let r=hC[i];r(n,e,t)}};function iL(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=XC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function KC(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function cp(n,e,t){JC(n,e,3,t)}function up(n,e,t,i){(n[Je]&3)===t&&JC(n,e,t,i)}function Zy(n,e){let t=n[Je];(t&3)===e&&(t&=16383,t+=1,n[Je]=t)}function JC(n,e,t,i){let r=i!==void 0?n[oa]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[oa]+=65536),(a<o||o==-1)&&(rL(n,t,e,l),n[oa]=(n[oa]&4294901760)+l+2),l++}function pC(n,e){qt(4,n,e);let t=et(null);try{e.call(n)}finally{et(t),qt(5,n,e)}}function rL(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[Je]>>14<n[oa]>>16&&(n[Je]&3)===e&&(n[Je]+=16384,pC(a,o)):pC(a,o)}var Il=-1,ma=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function oL(n){return(n.flags&8)!==0}function sL(n){return(n.flags&16)!==0}function aL(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];lL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function QC(n){return n===3||n===4||n===6}function lL(n){return n.charCodeAt(0)===64}function Al(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?mC(n,t,r,null,e[++i]):mC(n,t,r,null,null))}}return n}function mC(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function eT(n){return n!==Il}function mp(n){return n&32767}function cL(n){return n>>16}function gp(n,e){let t=cL(n),i=e;for(;t>0;)i=i[ra],t--;return i}var cb=!0;function gC(n){let e=cb;return cb=n,e}var uL=256,tT=uL-1,nT=5,dL=0,jr={};function fL(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(na)&&(i=t[na]),i==null&&(i=t[na]=dL++);let r=i&tT,o=1<<r;e.data[n+(r>>nT)]|=o}function vp(n,e){let t=iT(n,e);if(t!==-1)return t;let i=e[ze];i.firstCreatePass&&(n.injectorIndex=e.length,Ky(i.data,n),Ky(e,null),Ky(i.blueprint,null));let r=Yb(n,e),o=n.injectorIndex;if(eT(r)){let s=mp(r),a=gp(r,e),l=a[ze].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function Ky(n,e){n.push(0,0,0,0,0,0,0,0,e)}function iT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Yb(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=lT(r),i===null)return Il;if(t++,r=r[ra],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Il}function ub(n,e,t){fL(n,e,t)}function hL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(QC(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function rT(n,e,t){if(t&8||n!==void 0)return n;$h(e,"NodeInjector")}function oT(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[ia],o=Ri(void 0);try{return r?r.get(e,i,t&8):hy(e,i,t&8)}finally{Ri(o)}}return rT(i,e,t)}function sT(n,e,t,i=0,r){if(n!==null){if(e[Je]&2048&&!(i&2)){let s=vL(n,e,t,i,jr);if(s!==jr)return s}let o=aT(n,e,t,i,jr);if(o!==jr)return o}return oT(e,t,i,r)}function aT(n,e,t,i,r){let o=mL(t);if(typeof o=="function"){if(!jy(e,n,i))return i&1?rT(r,t,i):oT(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))$h(t);else return s}finally{Gy()}}else if(typeof o=="number"){let s=null,a=iT(n,e),l=Il,c=i&1?e[Kn][hi]:null;for((a===-1||i&4)&&(l=a===-1?Yb(n,e):e[a+8],l===Il||!_C(i,!1)?a=-1:(s=e[ze],a=mp(l),e=gp(l,e)));a!==-1;){let u=e[ze];if(vC(o,a,u.data)){let d=pL(a,e,t,s,i,c);if(d!==jr)return d}l=e[a+8],l!==Il&&_C(i,e[ze].data[a+8]===c)&&vC(o,a,e)?(s=u,a=mp(l),e=gp(l,e)):a=-1}}return r}function pL(n,e,t,i,r,o){let s=e[ze],a=s.data[n+8],l=i==null?mo(a)&&cb:i!=s&&(a.type&3)!==0,c=r&1&&o===a,u=dp(a,s,t,l,c);return u!==null?Iu(e,s,u,a,r):jr}function dp(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let m=s[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(r){let f=s[l];if(f&&zr(f)&&f.type===t)return l}return null}function Iu(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof ma){let a=o;if(a.resolving){let f=Vh(s[t]);throw fy(f)}let l=gC(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],u,d=a.injectImpl?Ri(a.injectImpl):null,h=jy(n,i,0);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&iL(t,s[t],e)}finally{d!==null&&Ri(d),gC(l),a.resolving=!1,Gy()}}return o}function mL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(na)?n[na]:void 0;return typeof e=="number"?e>=0?e&tT:gL:e}function vC(n,e,t){let i=1<<n;return!!(t[e+(n>>nT)]&i)}function _C(n,e){return!(n&2)&&!(n&1&&e)}var pa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return sT(this._tNode,this._lView,e,Js(i),t)}};function gL(){return new pa(ei(),vt())}function Ui(n){return Uu(()=>{let e=n.prototype.constructor,t=e[hu]||db(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[hu]||db(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function db(n){return iy(n)?()=>{let e=db(Yn(n));return e&&e()}:Qs(n)}function vL(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[Je]&2048&&!ca(s);){let a=aT(o,s,t,i|2,jr);if(a!==jr)return a;let l=o.parent;if(!l){let c=s[wy];if(c){let u=c.get(t,jr,i);if(u!==jr)return u}l=lT(s),s=s[ra]}o=l}return r}function lT(n){let e=n[ze],t=e.type;return t===2?e.declTNode:t===1?n[hi]:null}function Zb(n){return hL(ei(),n)}function _L(){return Pl(ei(),vt())}function Pl(n,e){return new ft(tr(n,e))}var ft=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=_L}return n})();function cT(n){return n instanceof ft?n.nativeElement:n}function yL(){return this._results[Symbol.iterator]()}var cs=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Te}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=PS(e);(this._changesDetected=!OS(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yL},uT="ngSkipHydration",bL="ngskiphydration";function dT(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===bL)return!0}return!1}function fT(n){return n.hasAttribute(uT)}function _p(n){return(n.flags&128)===128}function hT(n){if(_p(n))return!0;let e=n.parent;for(;e;){if(_p(n)||dT(e))return!0;e=e.parent}return!1}var Kb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Kb||{}),pT=new Map,xL=0;function EL(){return xL++}function wL(n){pT.set(n[yu],n)}function fb(n){pT.delete(n[yu])}var yC="__ngContext__";function Rl(n,e){Pi(e)?(n[yC]=e[yu],wL(e)):n[yC]=e}function mT(n){return vT(n[wl])}function gT(n){return vT(n[er])}function vT(n){for(;n!==null&&!Fi(n);)n=n[er];return n}var hb;function Jb(n){hb=n}function Bu(){if(hb!==void 0)return hb;if(typeof document<"u")return document;throw new be(210,!1)}var _a=new J("",{providedIn:"root",factory:()=>ML}),ML="ng",Op=new J(""),ds=new J("",{providedIn:"platform",factory:()=>"unknown"});var Vu=new J(""),Fl=new J("",{providedIn:"root",factory:()=>Bu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function SL(){let n=new Ll;return n.store=_T(Bu(),M(_a)),n}var Ll=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:SL});store={};onSerializeCallbacks={};get(t,i){return this.store[t]!==void 0?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function _T(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var yT="h",bT="b",CL="f",TL="n",xT="e",ET="t",Pp="c",Qb="x",Au="r",wT="i",MT="n",e0="d";var ST="di";var Hu=new J(""),CT=!1,t0=new J("",{providedIn:"root",factory:()=>CT});var DL=(n,e,t,i)=>{};function IL(n,e,t,i){DL(n,e,t,i)}function zu(n){return(n.flags&32)===32}var AL="__nghData__",n0=AL;var fp="ngh",TT="nghm",DT=()=>null;function RL(n,e,t=!1){let i=n.getAttribute(fp);if(i==null)return null;let[r,o]=i.split("|");if(i=t?o:r,!i)return null;let s=o?`|${o}`:"",a=t?r:s,l={};if(i!==""){let u=e.get(Ll,null,{optional:!0});u!==null&&(l=u.get(n0,[])[Number(i)])}let c={data:l,firstChild:n.firstChild??null};return t&&(c.firstChild=n,Fp(c,0,n.nextSibling)),a?n.setAttribute(fp,a):n.removeAttribute(fp),c}function IT(){DT=RL}function AT(n,e,t=!1){return DT(n,e,t)}function RT(n){let e=n._lView;return e[ze].type===2?null:(ca(e)&&(e=e[Jt]),e)}function NL(n){return n.textContent?.replace(/\s/gm,"")}function OL(n){let e=Bu(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=NL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Fp(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function pb(n,e){return n.segmentHeads?.[e]??null}function PL(n,e){let t=n.data,i=t[xT]?.[e]??null;return i===null&&t[Pp]?.[e]&&(i=i0(n,e)),i}function NT(n,e){return n.data[Pp]?.[e]??null}function i0(n,e){let t=NT(n,e)??[],i=0;for(let r of t)i+=r[Au]*(r[Qb]??1);return i}function FL(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[e0];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function OT(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[e0];n.disconnectedNodes=t?new Set(t):null}return!!FL(n)?.has(e)}function Lp(n,e){let t=n[pi];return t!==null&&!Qh()&&!zu(e)&&!OT(t,e.index-Jt)}function Jy(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===TT}function bC(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function PT(n){for(let i of n.body.childNodes)if(Jy(i))return;let e=bC(n.body.previousSibling);if(Jy(e))return;let t=bC(n.head.lastChild);if(!Jy(t))throw new be(-507,!1)}function FT(n,e){let t=n.contentQueries;if(t!==null){let i=et(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];Su(o),a.contentQueries(2,e[s],s)}}}finally{et(i)}}}function mb(n,e,t){Su(0);let i=et(null);try{e(n,t)}finally{et(i)}}function LT(n,e,t){if(My(e)){let i=et(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{et(i)}}}var bo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(bo||{}),sp;function LL(){if(sp===void 0&&(sp=null,yl.trustedTypes))try{sp=yl.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sp}function kp(n){return LL()?.createHTML(n)||n}var xo=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zh})`}},gb=class extends xo{getTypeName(){return"HTML"}},vb=class extends xo{getTypeName(){return"Style"}},_b=class extends xo{getTypeName(){return"Script"}},yb=class extends xo{getTypeName(){return"URL"}},bb=class extends xo{getTypeName(){return"ResourceURL"}};function Mo(n){return n instanceof xo?n.changingThisBreaksApplicationSecurity:n}function ya(n,e){let t=kT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${zh})`)}return t===e}function kT(n){return n instanceof xo&&n.getTypeName()||null}function r0(n){return new gb(n)}function o0(n){return new vb(n)}function s0(n){return new _b(n)}function a0(n){return new yb(n)}function l0(n){return new bb(n)}function kL(n){let e=new Eb(n);return UL()?new xb(e):e}var xb=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(kp(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Eb=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=kp(e),t}};function UL(){try{return!!new window.DOMParser().parseFromString(kp(""),"text/html")}catch{return!1}}var BL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Up(n){return n=String(n),n.match(BL)?n:"unsafe:"+n}function So(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function ju(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var UT=So("area,br,col,hr,img,wbr"),BT=So("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),VT=So("rp,rt"),VL=ju(VT,BT),HL=ju(BT,So("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zL=ju(VT,So("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xC=ju(UT,HL,zL,VL),HT=So("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jL=So("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),GL=So("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),WL=ju(HT,jL,GL),$L=So("script,style,template"),wb=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=YL(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=XL(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=EC(e).toLowerCase();if(!xC.hasOwnProperty(t))return this.sanitizedSomething=!0,!$L.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!WL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;HT[a]&&(l=Up(l)),this.buf.push(" ",s,'="',wC(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=EC(e).toLowerCase();xC.hasOwnProperty(t)&&!UT.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(wC(e))}};function qL(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function XL(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw zT(e);return e}function YL(n){let e=n.firstChild;if(e&&qL(n,e))throw zT(e);return e}function EC(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function zT(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var ZL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,KL=/([^\#-~ |!])/g;function wC(n){return n.replace(/&/g,"&amp;").replace(ZL,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(KL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ap;function c0(n,e){let t=null;try{ap=ap||kL(n);let i=e?String(e):"";t=ap.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=ap.getInertBodyElement(i)}while(i!==o);let a=new wb().sanitizeChildren(MC(t)||t);return kp(a)}finally{if(t){let i=MC(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function MC(n){return"content"in n&&JL(n)?n.content:null}function JL(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var mi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(mi||{});var QL=/^>|^->|<!--|-->|--!>|<!-$/g,ek=/(<|>)/g,tk="\u200B$1\u200B";function nk(n){return n.replace(QL,e=>e.replace(ek,tk))}function Gu(n){return n.ownerDocument.defaultView}function Bp(n){return n.ownerDocument}function jT(n){return n.ownerDocument.body}function GT(n){return n instanceof Function?n():n}function ik(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var WT="ng-template";function rk(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&ik(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(u0(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function u0(n){return n.type===4&&n.value!==WT}function ok(n,e,t){let i=n.type===4&&!t?WT:n.value;return e===i}function sk(n,e,t){let i=4,r=n.attrs,o=r!==null?ck(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Sr(i)&&!Sr(l))return!1;if(s&&Sr(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!ok(n,l,t)||l===""&&e.length===1){if(Sr(i))return!1;s=!0}}else if(i&8){if(r===null||!rk(n,r,l,t)){if(Sr(i))return!1;s=!0}}else{let c=e[++a],u=ak(l,r,u0(n),t);if(u===-1){if(Sr(i))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Sr(i))return!1;s=!0}}}}return Sr(i)||s}function Sr(n){return(n&1)===0}function ak(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return uk(e,n)}function $T(n,e,t=!1){for(let i=0;i<e.length;i++)if(sk(n,e[i],t))return!0;return!1}function lk(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function ck(n){for(let e=0;e<n.length;e++){let t=n[e];if(QC(t))return e}return n.length}function uk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function dk(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function SC(n,e){return n?":not("+e.trim()+")":e}function fk(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Sr(s)&&(e+=SC(o,r),r=""),i=s,o=o||!Sr(i);t++}return r!==""&&(e+=SC(o,r)),e}function hk(n){return n.map(fk).join(",")}function pk(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Sr(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var Bi={};function qT(n,e){return n.createText(e)}function mk(n,e,t){n.setValue(e,t)}function XT(n,e){return n.createComment(nk(e))}function d0(n,e,t){return n.createElement(e,t)}function yp(n,e,t,i,r){n.insertBefore(e,t,i,r)}function YT(n,e,t){n.appendChild(e,t)}function CC(n,e,t,i,r){i!==null?yp(n,e,t,i,r):YT(n,e,t)}function f0(n,e,t){n.removeChild(null,e,t)}function ZT(n){n.textContent=""}function gk(n,e,t){n.setAttribute(e,"style",t)}function vk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function KT(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&aL(n,e,i),r!==null&&vk(n,e,r),o!==null&&gk(n,e,o)}function h0(n,e,t,i,r,o,s,a,l,c,u){let d=Jt+i,h=d+r,f=_k(d,h),m=typeof c=="function"?c():c;return f[ze]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function _k(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Bi);return t}function yk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=h0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function p0(n,e,t,i,r,o,s,a,l,c,u){let d=e.blueprint.slice();return d[fi]=r,d[Je]=i|4|128|8|64|1024,(c!==null||n&&n[Je]&2048)&&(d[Je]|=2048),Ty(d),d[Bn]=d[ra]=n,d[Mn]=t,d[ho]=s||n&&n[ho],d[$t]=a||n&&n[$t],d[ia]=l||n&&n[ia]||null,d[hi]=o,d[yu]=EL(),d[pi]=u,d[wy]=c,d[Kn]=e.type==2?n[Kn]:d,d}function bk(n,e,t){let i=tr(e,n),r=yk(t),o=n[ho].rendererFactory,s=m0(n,p0(n,r,null,JT(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function JT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function QT(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function m0(n,e){return n[wl]?n[Ey][er]=e:n[wl]=e,n[Ey]=e,e}function qe(n=1){eD(In(),vt(),go()+n,!1)}function eD(n,e,t,i){if(!i)if((e[Je]&3)===3){let o=n.preOrderCheckHooks;o!==null&&cp(e,o,t)}else{let o=n.preOrderHooks;o!==null&&up(e,o,0,t)}ls(t)}var Vp=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Vp||{});function Mb(n,e,t,i){let r=et(null);try{let[o,s,a]=n.inputs[t],l=null;(s&Vp.SignalBased)!==0&&(l=e[o][Fn]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):qC(e,l,o,i)}finally{et(r)}}var Eo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Eo||{}),xk;function g0(n,e){return xk(n,e)}function Dl(n,e,t,i,r){if(i!=null){let o,s=!1;Fi(i)?o=i:Pi(i)&&(s=!0,i=i[fi]);let a=Li(i);n===0&&t!==null?r==null?YT(e,t,a):yp(e,t,a,r||null,!0):n===1&&t!==null?yp(e,t,a,r||null,!0):n===2?f0(e,a,s):n===3&&e.destroyNode(a),o!=null&&Rk(e,n,o,t,r)}}function Ek(n,e){tD(n,e),e[fi]=null,e[hi]=null}function wk(n,e,t,i,r,o){i[fi]=r,i[hi]=e,zp(n,i,t,1,r,o)}function tD(n,e){e[ho].changeDetectionScheduler?.notify(9),zp(n,e,e[$t],2,null,null)}function Mk(n){let e=n[wl];if(!e)return Qy(n[ze],n);for(;e;){let t=null;if(Pi(e))t=e[wl];else{let i=e[Vn];i&&(t=i)}if(!t){for(;e&&!e[er]&&e!==n;)Pi(e)&&Qy(e[ze],e),e=e[Bn];e===null&&(e=n),Pi(e)&&Qy(e[ze],e),t=e&&e[er]}e=t}}function v0(n,e){let t=n[la],i=t.indexOf(e);t.splice(i,1)}function Hp(n,e){if(ua(e))return;let t=e[$t];t.destroyNode&&zp(n,e,t,3,null,null),Mk(e)}function Qy(n,e){if(ua(e))return;let t=et(null);try{e[Je]&=-129,e[Je]|=256,e[Oi]&&al(e[Oi]),Ck(n,e),Sk(n,e),e[ze].type===1&&e[$t].destroy();let i=e[ss];if(i!==null&&Fi(e[Bn])){i!==e[Bn]&&v0(i,e);let r=e[Vr];r!==null&&r.detachView(n)}fb(e)}finally{et(t)}}function Sk(n,e){let t=n.cleanup,i=e[El];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[El]=null);let r=e[lo];if(r!==null){e[lo]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[po];if(o!==null){e[po]=null;for(let s of o)s.destroy()}}function Ck(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof ma)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];qt(4,a,l);try{l.call(a)}finally{qt(5,a,l)}}else{qt(4,r,o);try{o.call(r)}finally{qt(5,r,o)}}}}}function nD(n,e,t){return Tk(n,e.parent,t)}function Tk(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[fi];if(mo(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===bo.None||r===bo.Emulated)return null}return tr(i,t)}function iD(n,e,t){return Ik(n,e,t)}function Dk(n,e,t){return n.type&40?tr(n,t):null}var Ik=Dk,TC;function _0(n,e,t,i){let r=nD(n,i,e),o=e[$t],s=i.parent||e[hi],a=iD(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)CC(o,r,t[l],a,!1);else CC(o,r,t,a,!1);TC!==void 0&&TC(o,i,e,t,r)}function Tu(n,e){if(e!==null){let t=e.type;if(t&3)return tr(e,n);if(t&4)return Sb(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Tu(n,i);{let r=n[e.index];return Fi(r)?Sb(-1,r):Li(r)}}else{if(t&128)return Tu(n,e.next);if(t&32)return g0(e,n)()||Li(n[e.index]);{let i=rD(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=is(n[Kn]);return Tu(r,i)}else return Tu(n,e.next)}}}return null}function rD(n,e){if(e!==null){let i=n[Kn][hi],r=e.projection;return i.projection[r]}return null}function Sb(n,e){let t=Vn+n+1;if(t<e.length){let i=e[t],r=i[ze].firstChild;if(r!==null)return Tu(i,r)}return e[Hr]}function y0(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&Rl(Li(a),i),t.flags|=2),!zu(t))if(l&8)y0(n,e,t.child,i,r,o,!1),Dl(e,n,r,a,o);else if(l&32){let c=g0(t,i),u;for(;u=c();)Dl(e,n,r,u,o);Dl(e,n,r,a,o)}else l&16?oD(n,e,i,t,r,o):Dl(e,n,r,a,o);t=s?t.projectionNext:t.next}}function zp(n,e,t,i,r,o){y0(t,i,n.firstChild,e,r,o,!1)}function Ak(n,e,t){let i=e[$t],r=nD(n,t,e),o=t.parent||e[hi],s=iD(o,t,e);oD(i,0,e,t,r,s)}function oD(n,e,t,i,r,o){let s=t[Kn],l=s[hi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Dl(e,n,r,u,o)}else{let c=l,u=s[Bn];_p(i)&&(c.flags|=128),y0(n,e,c,u,r,o,!0)}}function Rk(n,e,t,i,r){let o=t[Hr],s=Li(t);o!==s&&Dl(e,n,i,o,r);for(let a=Vn;a<t.length;a++){let l=t[a];zp(l[ze],l,n,e,i,o)}}function Nk(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Eo.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Eo.Important),n.setStyle(t,i,r,o))}}function sD(n,e,t,i,r){let o=go(),s=i&2;try{ls(-1),s&&e.length>Jt&&eD(n,e,Jt,!1),qt(s?2:0,r,t),t(i,r)}finally{ls(o),qt(s?3:1,r,t)}}function b0(n,e,t){Bk(n,e,t),(t.flags&64)===64&&Vk(n,e,t)}function jp(n,e,t=tr){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function Ok(n,e,t,i){let o=i.get(t0,CT)||t===bo.ShadowDom,s=n.selectRootElement(e,o);return Pk(s),s}function Pk(n){aD(n)}var aD=()=>null;function Fk(n){fT(n)?ZT(n):OL(n)}function lD(){aD=Fk}function Lk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function kk(n,e,t,i,r,o){let s=e[ze];if(x0(n,s,e,t,i)){mo(n)&&Uk(e,n.index);return}n.type&3&&(t=Lk(t)),cD(n,e,t,i,r,o)}function cD(n,e,t,i,r,o){if(n.type&3){let s=tr(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function Uk(n,e){let t=nr(e,n);t[Je]&16||(t[Je]|=64)}function Bk(n,e,t){let i=t.directiveStart,r=t.directiveEnd;mo(t)&&bk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vp(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=Iu(e,n,s,t);if(Rl(l,e),o!==null&&Gk(e,s-i,l,a,t,o),zr(a)){let c=nr(t.index,e);c[Mn]=Iu(e,n,s,t)}}}function Vk(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=oC();try{ls(o);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];ep(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Hk(l,c)}}finally{ls(-1),ep(s)}}function Hk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function uD(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];$T(e,o.selectors,!1)&&(i??=[],zr(o)?i.unshift(o):i.push(o))}return i}function zk(n,e,t,i,r,o){let s=tr(n,e);jk(e[$t],s,o,n.value,t,i,r)}function jk(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Wh(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function Gk(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];Mb(i,t,l,c)}}function dD(n,e,t,i,r){let o=Jt+t,s=e[ze],a=r(s,e,n,i,t);e[o]=a,Ml(n,!0);let l=n.type===2;return l?(KT(e[$t],a,n),(KS()===0||xu(n))&&Rl(a,e),JS()):Rl(a,e),op()&&(!l||!zu(n))&&_0(s,e,a,n),n}function fD(n){let e=n;return ky()?Uy():(e=e.parent,Ml(e,!1)),e}function Wk(n,e){let t=n[ia];if(!t)return;t.get(Mr,null)?.(e)}function x0(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=e.data[c];Mb(d,t[c],u,r),a=!0}if(o)for(let l of o){let c=t[l],u=e.data[l];Mb(u,c,i,r),a=!0}return a}function $k(n,e){let t=nr(e,n),i=t[ze];qk(i,t);let r=t[fi];r!==null&&t[pi]===null&&(t[pi]=AT(r,t[ia])),qt(18),E0(i,t,t[Mn]),qt(19,t[Mn])}function qk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function E0(n,e,t){np(e);try{let i=n.viewQuery;i!==null&&mb(1,i,t);let r=n.template;r!==null&&sD(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vr]?.finishViewCreation(n),n.staticContentQueries&&FT(n,e),n.staticViewQueries&&mb(2,n.viewQuery,t);let o=n.components;o!==null&&Xk(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Je]&=-5,ip()}}function Xk(n,e){for(let t=0;t<e.length;t++)$k(n,e[t])}function Wu(n,e,t,i){let r=et(null);try{let o=e.tView,a=n[Je]&4096?4096:16,l=p0(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[ss]=c;let u=n[Vr];return u!==null&&(l[Vr]=u.createEmbeddedView(o)),E0(o,l,t),l}finally{et(r)}}function Nl(n,e){return!e||e.firstChild===null||_p(n)}var DC=!1,Yk=new J("");function Ru(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(Li(o)),Fi(o)&&hD(o,i);let s=t.type;if(s&8)Ru(n,e,t.child,i);else if(s&32){let a=g0(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=rD(e,t);if(Array.isArray(a))i.push(...a);else{let l=is(e[Kn]);Ru(l[ze],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function hD(n,e){for(let t=Vn;t<n.length;t++){let i=n[t],r=i[ze].firstChild;r!==null&&Ru(i[ze],i,r,e)}n[Hr]!==n[fi]&&e.push(n[Hr])}function pD(n){if(n[sa]!==null){for(let e of n[sa])e.impl.addSequence(e);n[sa].length=0}}var mD=[];function Zk(n){return n[Oi]??Kk(n)}function Kk(n){let e=mD.pop()??Object.create(Qk);return e.lView=n,e}function Jk(n){n.lView[Oi]!==n&&(n.lView=null,mD.push(n))}var Qk=Ye($({},Yo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{as(n.lView)},consumerOnSignalRead(){this.lView[Oi]=this}});function e2(n){let e=n[Oi]??Object.create(t2);return e.lView=n,e}var t2=Ye($({},Yo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=is(n.lView);for(;e&&!gD(e[ze]);)e=is(e);e&&Dy(e)},consumerOnSignalRead(){this.lView[Oi]=this}});function gD(n){return n.type!==2}function vD(n){if(n[po]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[po])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Je]&8192)}}var n2=100;function w0(n,e=0){let i=n[ho].rendererFactory,r=!1;r||i.begin?.();try{i2(n,e)}finally{r||i.end?.()}}function i2(n,e){let t=Vy();try{Sl(!0),Cb(n,e);let i=0;for(;wu(n);){if(i===n2)throw new be(103,!1);i++,Cb(n,1)}}finally{Sl(t)}}function _D(n,e){By(e?Mu.Exhaustive:Mu.OnlyDirtyViews);try{w0(n)}finally{By(Mu.Off)}}function r2(n,e,t,i){if(ua(e))return;let r=e[Je],o=!1,s=!1;np(e);let a=!0,l=null,c=null;o||(gD(n)?(c=Zk(e),l=io(c)):eh()===null?(a=!1,c=e2(e),l=io(c)):e[Oi]&&(al(e[Oi]),e[Oi]=null));try{Ty(e),nC(n.bindingStartIndex),t!==null&&sD(n,e,t,2,i);let u=(r&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&cp(e,f,null)}else{let f=n.preOrderHooks;f!==null&&up(e,f,0,null),Zy(e,0)}if(s||o2(e),vD(e),yD(e,0),n.contentQueries!==null&&FT(n,e),!o)if(u){let f=n.contentCheckHooks;f!==null&&cp(e,f)}else{let f=n.contentHooks;f!==null&&up(e,f,1),Zy(e,1)}a2(n,e);let d=n.components;d!==null&&xD(e,d,0);let h=n.viewQuery;if(h!==null&&mb(2,h,i),!o)if(u){let f=n.viewCheckHooks;f!==null&&cp(e,f)}else{let f=n.viewHooks;f!==null&&up(e,f,2),Zy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Zh]){for(let f of e[Zh])f();e[Zh]=null}o||(pD(e),e[Je]&=-73)}catch(u){throw o||as(e),u}finally{c!==null&&(Zo(c,l),a&&Jk(c)),ip()}}function yD(n,e){for(let t=mT(n);t!==null;t=gT(t))for(let i=Vn;i<t.length;i++){let r=t[i];bD(r,e)}}function o2(n){for(let e=mT(n);e!==null;e=gT(e)){if(!(e[Je]&2))continue;let t=e[la];for(let i=0;i<t.length;i++){let r=t[i];Dy(r)}}}function s2(n,e,t){qt(18);let i=nr(e,n);bD(i,t),qt(19,i[Mn])}function bD(n,e){Kh(n)&&Cb(n,e)}function Cb(n,e){let i=n[ze],r=n[Je],o=n[Oi],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Ws(o)),s||=!1,o&&(o.dirty=!1),n[Je]&=-9217,s)r2(i,n,i.template,n[Mn]);else if(r&8192){let a=et(null);try{vD(n),yD(n,1);let l=i.components;l!==null&&xD(n,l,1),pD(n)}finally{et(a)}}}function xD(n,e,t){for(let i=0;i<e.length;i++)s2(n,e[i],t)}function a2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)ls(~r);else{let o=r,s=t[++i],a=t[++i];rC(s,o);let l=e[o];qt(24,l),a(2,l),qt(25,l)}}}finally{ls(-1)}}function M0(n,e){let t=Vy()?64:1088;for(n[ho].changeDetectionScheduler?.notify(e);n;){n[Je]|=t;let i=is(n);if(ca(n)&&!i)return n;n=i}return null}function ED(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function wD(n,e){let t=Vn+e;if(t<n.length)return n[t]}function $u(n,e,t,i=!0){let r=e[ze];if(l2(r,e,n,t),i){let s=Sb(t,n),a=e[$t],l=a.parentNode(n[Hr]);l!==null&&wk(r,n[hi],a,e,l,s)}let o=e[pi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function MD(n,e){let t=Nu(n,e);return t!==void 0&&Hp(t[ze],t),t}function Nu(n,e){if(n.length<=Vn)return;let t=Vn+e,i=n[t];if(i){let r=i[ss];r!==null&&r!==n&&v0(r,i),e>0&&(n[t-1][er]=i[er]);let o=vu(n,Vn+e);Ek(i[ze],i);let s=o[Vr];s!==null&&s.detachView(o[ze]),i[Bn]=null,i[er]=null,i[Je]&=-129}return i}function l2(n,e,t,i){let r=Vn+i,o=t.length;i>0&&(t[r-1][er]=e),i<o-Vn?(e[er]=t[r],py(t,Vn+i,e)):(t.push(e),e[er]=null),e[Bn]=t;let s=e[ss];s!==null&&t!==s&&SD(s,e);let a=e[Vr];a!==null&&a.insertView(n),Jh(e),e[Je]|=128}function SD(n,e){let t=n[la],i=e[Bn];if(Pi(i))n[Je]|=2;else{let r=i[Bn][Kn];e[Kn]!==r&&(n[Je]|=2)}t===null?n[la]=[e]:t.push(e)}var us=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ze];return Ru(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Mn]}set context(e){this._lView[Mn]=e}get destroyed(){return ua(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bn];if(Fi(e)){let t=e[bu],i=t?t.indexOf(this):-1;i>-1&&(Nu(e,i),vu(t,i))}this._attachedToViewContainer=!1}Hp(this._lView[ze],this._lView)}onDestroy(e){Iy(this._lView,e)}markForCheck(){M0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Je]&=-129}reattach(){Jh(this._lView),this._lView[Je]|=128}detectChanges(){this._lView[Je]|=1024,w0(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[ia].get(Yk,DC)}catch{this.exhaustive=DC}}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ca(this._lView),t=this._lView[ss];t!==null&&!e&&v0(t,this._lView),tD(this._lView[ze],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=e;let t=ca(this._lView),i=this._lView[ss];i!==null&&!t&&SD(i,this._lView),Jh(this._lView)}};var rr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=c2;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=Wu(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new us(o)}}return n})();function c2(){return Gp(ei(),vt())}function Gp(n,e){return n.type&4?new rr(e,n,Pl(n,e)):null}function kl(n,e,t,i,r){let o=n.data[e];if(o===null)o=u2(n,e,t,i,r),iC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=eC();o.injectorIndex=s===null?-1:s.injectorIndex}return Ml(o,!0),o}function u2(n,e,t,i,r){let o=Ly(),s=ky(),a=s?o:o&&o.parent,l=n.data[e]=f2(n,a,t,e,i,r);return d2(n,l,o,s),l}function d2(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function f2(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Qh()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var h2=new RegExp(`^(\\d+)*(${bT}|${yT})*(.*)`);function p2(n){let e=n.match(h2),[t,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[l,c,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(c,d)}return[s,...a]}function m2(n){return!n.prev&&n.parent?.type===8}function eb(n){return n.index-Jt}function g2(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Wp(n,e,t,i){let r=eb(i),o=g2(n,r);if(o===void 0){let s=n.data[MT];if(s?.[r])o=_2(s[r],t);else if(e.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(m2(i)){let c=eb(i.parent);o=pb(n,c)}else{let c=tr(l,t);if(a)o=c.firstChild;else{let u=eb(l),d=pb(n,u);if(l.type===2&&d){let f=i0(n,u)+1;o=$p(f,d)}else o=c.nextSibling}}}}return o}function $p(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function v2(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case CL:t=t.firstChild;break;case TL:t=t.nextSibling;break}}return t}function _2(n,e){let[t,...i]=p2(n),r;if(t===yT)r=e[Kn][fi];else if(t===bT)r=jT(e[Kn][fi]);else{let o=Number(t);r=Li(e[o+Jt])}return v2(r,i)}var y2=!1;function CD(n){y2=n}function b2(n){let e=n[pi];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[$t];for(let o of i.values())x2(r,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function x2(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Jt);r&&f0(n,r,!1)}}function qp(n){let e=n[aa]??[],i=n[Bn][$t],r=[];for(let o of e)o.data[ST]!==void 0?r.push(o):E2(o,i);n[aa]=r}function E2(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Au];for(;t<r;){let o=i.nextSibling;f0(e,i,!1),i=o,t++}}}function TD(n){qp(n);let e=n[fi];Pi(e)&&bp(e);for(let t=Vn;t<n.length;t++)bp(n[t])}function bp(n){b2(n);let e=n[ze];for(let t=Jt;t<e.bindingStartIndex;t++)if(Fi(n[t])){let i=n[t];TD(i)}else Pi(n[t])&&bp(n[t])}function DD(n){let e=n._views;for(let t of e){let i=RT(t);i!==null&&i[fi]!==null&&(Pi(i)?bp(i):TD(i))}}function w2(n,e){let t=[];for(let i of e)for(let r=0;r<(i[Qb]??1);r++){let o={data:i,firstChild:null};i[Au]>0&&(o.firstChild=n,n=$p(i[Au],n)),t.push(o)}return[n,t]}var ID=()=>null,AD=()=>null;function RD(){ID=M2,AD=S2}function M2(n,e){return OD(n,e)?n[aa].shift():(qp(n),null)}function Ou(n,e){return ID(n,e)}function S2(n,e,t){if(e.tView.ssrId===null)return null;let i=Ou(n,e.tView.ssrId);return t[ze].firstUpdatePass&&i===null&&C2(t,e),i}function ND(n,e,t){return AD(n,e,t)}function C2(n,e){let t=e;for(;t;){if(IC(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(IC(n,t))return;t=t.next}}function OD(n,e){let t=n[aa];return!e||t===null||t.length===0?!1:t[0].data[wT]===e}function IC(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let i=n[e.index];return Fi(i)&&OD(i,t)?(qp(i),!0):!1}var PD=class{},Xp=class{},Tb=class{resolveComponentFactory(e){throw new be(917,!1)}},qu=class{static NULL=new Tb},An=class{},Rn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>T2()}return n})();function T2(){let n=vt(),e=ei(),t=nr(e.index,n);return(Pi(t)?t:n)[$t]}var FD=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}return n})();var hp={},Db=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,hp,i);return r!==hp||t===hp?r:this.parentInjector.get(e,t,i)}};function xp(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=jh(r,a);else if(o==2){let l=a,c=e[++s];i=jh(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function it(n,e=0){let t=vt();if(t===null)return Ge(n,e);let i=ei();return sT(i,t,Yn(n),e)}function LD(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}A2(n,e,t,a,o,l,c)}o!==null&&i!==null&&D2(t,i,o)}function D2(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new be(-301,!1);i.push(e[r],o)}}function I2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function A2(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let h=0;h<a;h++){let f=i[h];!l&&zr(f)&&(l=!0,I2(n,t,h)),ub(vp(t,e),n,f.type)}L2(t,n.data.length,a);for(let h=0;h<a;h++){let f=i[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=QT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=i[h];if(t.mergedAttrs=Al(t.mergedAttrs,f.hostAttrs),N2(n,t,e,d,f),F2(d,f,r),s!==null&&s.has(f)){let[v,g]=s.get(f);t.directiveToIndex.set(f.type,[d,v+t.directiveStart,g+t.directiveStart])}else(o===null||!o.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let m=f.type.prototype;!c&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}R2(n,t,o)}function R2(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))AC(0,e,r,i),AC(1,e,r,i),NC(e,i,!1);else{let o=t.get(r);RC(0,e,o,i),RC(1,e,o,i),NC(e,i,!0)}}}function AC(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),kD(e,o)}}function RC(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),kD(e,s)}}function kD(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function NC(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||u0(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){s??=[],s.push(c[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function N2(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Qs(r.type,!0)),s=new ma(o,zr(r),it,null);n.blueprint[i]=s,t[i]=s,O2(n,e,i,QT(n,t,r.hostVars,Bi),r)}function O2(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;P2(s)!=a&&s.push(a),s.push(t,i,o)}}function P2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function F2(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;zr(e)&&(t[""]=n)}}function L2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function UD(n,e,t,i,r,o,s,a){let l=e[ze],c=l.consts,u=ir(c,s),d=kl(l,n,t,i,u);return o&&LD(l,e,d,ir(c,a),r),d.mergedAttrs=Al(d.mergedAttrs,d.attrs),d.attrs!==null&&xp(d,d.attrs,!1),d.mergedAttrs!==null&&xp(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function BD(n,e){KC(n,e),My(e)&&n.queries.elementEnd(e)}function k2(n,e,t,i,r,o){let s=e.consts,a=ir(s,r),l=kl(e,n,t,i,a);if(l.mergedAttrs=Al(l.mergedAttrs,l.attrs),o!=null){let c=ir(s,o);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&xp(l,l.attrs,!1),l.mergedAttrs!==null&&xp(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function VD(n,e,t){return n[e]=t}function U2(n,e){return n[e]}function Co(n,e,t){if(t===Bi)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function tb(n,e,t){return function i(r){let o=mo(n)?nr(n.index,e):e;M0(o,5);let s=e[Mn],a=OC(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=OC(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function OC(n,e,t,i){let r=et(null);try{return qt(6,e,t),t(i)!==!1}catch(o){return Wk(n,o),!1}finally{qt(7,e,t),et(r)}}function B2(n,e,t,i,r,o,s,a){let l=xu(n),c=!1,u=null;if(!i&&l&&(u=V2(e,t,o,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let d=tr(n,t),h=i?i(d):d;IL(t,h,o,a);let f=r.listen(h,o,a),m=i?v=>i(Li(v[n.index])):n.index;HD(m,e,t,o,a,f,!1)}return c}function V2(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[El],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function HD(n,e,t,i,r,o,s){let a=e.firstCreatePass?Ry(e):null,l=Ay(t),c=l.length;l.push(r,o),a&&a.push(i,n,c,(c+1)*(s?-1:1))}function PC(n,e,t,i,r,o){let s=e[t],a=e[ze],c=a.data[t].outputs[i],d=s[c].subscribe(o);HD(n.index,a,e,r,o,d,!0)}var Ib=Symbol("BINDING");var Ep=class extends qu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=uo(e);return new ga(t,this.ngModule)}};function H2(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Vp.SignalBased)!==0};return r&&(o.transform=r),o})}function z2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function j2(n,e,t){let i=e instanceof pn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Db(t,i):t}function G2(n){let e=n.get(An,null);if(e===null)throw new be(407,!1);let t=n.get(FD,null),i=n.get(wr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function W2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return d0(e,t,t==="svg"?Sy:t==="math"?GS:null)}var ga=class extends Xp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=H2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=z2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=hk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){qt(22);let a=et(null);try{let l=this.componentDef,c=$2(i,l,s,o),u=j2(l,r||this.ngModule,e),d=G2(u),h=d.rendererFactory.createRenderer(null,l),f=i?Ok(h,i,l.encapsulation,u):W2(l,h),m=s?.some(FC)||o?.some(p=>typeof p!="function"&&p.bindings.some(FC)),v=p0(null,c,null,512|JT(l),null,null,d,h,u,null,AT(f,u,!0));v[Jt]=f,np(v);let g=null;try{let p=UD(Jt,v,2,"#host",()=>c.directiveRegistry,!0,0);f&&(KT(h,f,p),Rl(f,v)),b0(c,v,p),LT(c,p,v),BD(c,p),t!==void 0&&X2(p,this.ngContentSelectors,t),g=nr(p.index,v),v[Mn]=g[Mn],E0(c,v,null)}catch(p){throw g!==null&&fb(g),fb(v),p}finally{qt(23),ip()}return new wp(this.componentType,v,!!m)}finally{et(a)}}};function $2(n,e,t,i){let r=n?["ng-version","20.1.3"]:pk(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[Ib].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Ib].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let l=[e];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,h=_y(d);l.push(h)}return h0(0,null,q2(o,s),1,a,l,null,null,null,[r],null)}function q2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function FC(n){let e=n[Ib].kind;return e==="input"||e==="twoWay"}var wp=class extends PD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=Eu(t[ze],Jt),this.location=Pl(this._tNode,t),this.instance=nr(this._tNode.index,t)[Mn],this.hostView=this.changeDetectorRef=new us(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=x0(i,r[ze],r,e,t);this.previousInputValues.set(e,t);let s=nr(i.index,r);M0(s,1)}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function X2(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var gi=(()=>{class n{static __NG_ELEMENT_ID__=Y2}return n})();function Y2(){let n=ei();return jD(n,vt())}var Z2=gi,zD=class extends Z2{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Pl(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yb(this._hostTNode,this._hostLView);if(eT(e)){let t=gp(e,this._hostLView),i=mp(e),r=t[ze].data[i+8];return new pa(r,t)}else return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=LC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Ou(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Nl(this._hostTNode,s)),a}createComponent(e,t,i,r,o,s,a){let l=e&&!QF(e),c;if(l)c=t;else{let g=t||{};c=g.index,i=g.injector,r=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef,s=g.directives,a=g.bindings}let u=l?e:new ga(uo(e)),d=i||this.parentInjector;if(!o&&u.ngModule==null){let p=(l?d:this.parentInjector).get(pn,null);p&&(o=p)}let h=uo(u.componentType??{}),f=Ou(this._lContainer,h?.id??null),m=f?.firstChild??null,v=u.create(d,r,m,o,s,a);return this.insertImpl(v.hostView,c,Nl(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(qS(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Bn],c=new zD(l,l[hi],l[Bn]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return $u(s,r,o,i),e.attachToViewContainerRef(),py(nb(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=LC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Nu(this._lContainer,t);i&&(vu(nb(this._lContainer),t),Hp(i[ze],i))}detach(e){let t=this._adjustIndex(e,-1),i=Nu(this._lContainer,t);return i&&vu(nb(this._lContainer),t)!=null?new us(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function LC(n){return n[bu]}function nb(n){return n[bu]||(n[bu]=[])}function jD(n,e){let t,i=e[n.index];return Fi(i)?t=i:(t=ED(i,e,null,n),e[n.index]=t,m0(e,t)),GD(t,e,n,i),new zD(t,n,e)}function K2(n,e){let t=n[$t],i=t.createComment(""),r=tr(e,n),o=t.parentNode(r);return yp(t,o,i,t.nextSibling(r),!1),i}var GD=WD,S0=()=>!1;function J2(n,e,t){return S0(n,e,t)}function WD(n,e,t,i){if(n[Hr])return;let r;t.type&8?r=Li(i):r=K2(e,t),n[Hr]=r}function Q2(n,e,t){if(n[Hr]&&n[aa])return!0;let i=t[pi],r=e.index-Jt;if(!i||hT(e)||OT(i,r))return!1;let s=pb(i,r),a=i.data[Pp]?.[r],[l,c]=w2(s,a);return n[Hr]=l,n[aa]=c,!0}function eU(n,e,t,i){S0(n,t,e)||WD(n,e,t,i)}function $D(){GD=eU,S0=Q2}var Ab=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Rb=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)T0(e,t).matches!==null&&this.queries[t].setDirty()}},Mp=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=oU(e):this.predicate=e}},Nb=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ob=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,tU(t,o)),this.matchTNodeWithReadOption(e,t,dp(t,e,o,!1,!1))}else i===rr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,dp(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ft||r===gi||r===rr&&t.type&4)this.addMatch(t.index,-2);else{let o=dp(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function tU(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function nU(n,e){return n.type&11?Pl(n,e):n.type&4?Gp(n,e):null}function iU(n,e,t,i){return t===-1?nU(e,n):t===-2?rU(n,e,i):Iu(n,n[ze],t,e)}function rU(n,e,t){if(t===ft)return Pl(e,n);if(t===rr)return Gp(e,n);if(t===gi)return jD(e,n)}function qD(n,e,t,i){let r=e[Vr].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(iU(e,u,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function Pb(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=qD(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Vn;d<u.length;d++){let h=u[d];h[ss]===h[Bn]&&Pb(h[ze],h,c,i)}if(u[la]!==null){let d=u[la];for(let h=0;h<d.length;h++){let f=d[h];Pb(f[ze],f,c,i)}}}}}return i}function C0(n,e){return n[Vr].queries[e].queryList}function XD(n,e,t){let i=new cs((t&4)===4);return ZS(n,e,i,i.destroy),(e[Vr]??=new Rb).queries.push(new Ab(i))-1}function YD(n,e,t){let i=In();return i.firstCreatePass&&(KD(i,new Mp(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),XD(i,vt(),e)}function ZD(n,e,t,i){let r=In();if(r.firstCreatePass){let o=ei();KD(r,new Mp(e,t,i),o.index),sU(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return XD(r,vt(),t)}function oU(n){return n.split(",").map(e=>e.trim())}function KD(n,e,t){n.queries===null&&(n.queries=new Nb),n.queries.track(new Ob(e,t))}function sU(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function T0(n,e){return n.queries.getByIndex(e)}function JD(n,e){let t=n[ze],i=T0(t,e);return i.crossesNgTemplate?Pb(t,n,e,[]):qD(t,n,i,e)}function QD(n,e,t){let i,r=nu(()=>{i._dirtyCounter();let o=aU(i,n);if(e&&o===void 0)throw new be(-951,!1);return o});return i=r[Fn],i._dirtyCounter=nn(0),i._flatValue=void 0,r}function D0(n){return QD(!0,!1,n)}function I0(n){return QD(!0,!0,n)}function eI(n,e){let t=n[Fn];t._lView=vt(),t._queryIndex=e,t._queryList=C0(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function aU(n,e){let t=n._lView,i=n._queryIndex;if(t===void 0||i===void 0||t[Je]&4)return e?void 0:ii;let r=C0(t,i),o=JD(t,i);return r.reset(o,cT),e?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}var kC=new Set;function or(n){kC.has(n)||(kC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var wo=class{},Yp=class{};var Sp=class extends wo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ep(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=vy(e);this._bootstrapComponents=GT(o.bootstrap),this._r3Injector=$y(e,t,[{provide:wo,useValue:this},{provide:qu,useValue:this.componentFactoryResolver},...i],co(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cp=class extends Yp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Sp(this.moduleType,e,[])}};var Pu=class extends wo{injector;componentFactoryResolver=new Ep(this);instance=null;constructor(e){super();let t=new ta([...e.providers,{provide:wo,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],e.parent||xl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xu(n,e,t=null){return new Pu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var lU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=yy(!1,t.type),r=i.length>0?Xu([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(Ge(pn))})}return n})();function ht(n){return Uu(()=>{let e=tI(n),t=Ye($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Kb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(lU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||bo.Emulated,styles:n.styles||ii,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&or("NgStandalone"),nI(t);let i=n.dependencies;return t.directiveDefs=UC(i,cU),t.pipeDefs=UC(i,kS),t.id=fU(t),t})}function cU(n){return uo(n)||_y(n)}function at(n){return Uu(()=>({type:n.type,bootstrap:n.bootstrap||ii,declarations:n.declarations||ii,imports:n.imports||ii,exports:n.exports||ii,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uU(n,e){if(n==null)return os;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Vp.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function dU(n){if(n==null)return os;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ze(n){return Uu(()=>{let e=tI(n);return nI(e),e})}function tI(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||os,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ii,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:uU(n.inputs,e),outputs:dU(n.outputs),debugInfo:null}}function nI(n){n.features?.forEach(e=>e(n))}function UC(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function fU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function hU(n){return Object.getPrototypeOf(n.prototype).constructor}function _n(n){let e=hU(n.type),t=!0,i=[n];for(;e;){let r;if(zr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new be(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=ib(n.inputs),s.declaredInputs=ib(n.declaredInputs),s.outputs=ib(n.outputs);let a=r.hostBindings;a&&_U(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&gU(n,l),c&&vU(n,c),pU(n,r),DS(n.outputs,r.outputs),zr(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===_n&&(t=!1)}}e=Object.getPrototypeOf(e)}mU(i)}function pU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function mU(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Al(r.hostAttrs,t=Al(t,r.hostAttrs))}}function ib(n){return n===os?{}:n===ii?[]:n}function gU(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function vU(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function _U(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function iI(n,e,t,i,r,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Al(n.mergedAttrs,n.attrs);let u=n.tView=h0(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ml(n,!1);let l=rI(t,e,n,i);op()&&_0(t,e,l,n),Rl(l,e);let c=ED(l,e,l,n);e[i+Jt]=c,m0(e,c),J2(c,n,e)}function yU(n,e,t,i,r,o,s,a,l,c,u){let d=t+Jt,h;return e.firstCreatePass?(h=kl(e,d,4,s||null,a||null),Oy()&&LD(e,n,h,ir(e.consts,c),uD),KC(e,h)):h=e.data[d],iI(h,n,e,t,i,r,o,l),xu(h)&&b0(e,n,h),c!=null&&jp(n,h,u),h}function Fu(n,e,t,i,r,o,s,a,l,c,u){let d=t+Jt,h;if(e.firstCreatePass){if(h=kl(e,d,4,s||null,a||null),c!=null){let f=ir(e.consts,c);h.localNames=[];for(let m=0;m<f.length;m+=2)h.localNames.push(f[m],-1)}}else h=e.data[d];return iI(h,n,e,t,i,r,o,l),c!=null&&jp(n,h,u),h}function Gr(n,e,t,i,r,o,s,a){let l=vt(),c=In(),u=ir(c.consts,o);return yU(l,c,n,e,t,i,r,u,void 0,s,a),Gr}var rI=oI;function oI(n,e,t,i){return vo(!0),e[$t].createComment("")}function bU(n,e,t,i){let r=!Lp(e,t);vo(r);let o=e[pi]?.data[ET]?.[i]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),r)return oI(n,e);let s=e[pi],a=Wp(s,n,e,t);Fp(s,i,a);let l=i0(s,i);return $p(l,a)}function sI(){rI=bU}var Zp=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Zp||{}),fs=new J(""),aI=!1,Fb=class extends Te{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,zS()&&(this.destroyRef=M(ki,{optional:!0})??void 0,this.pendingTasks=M(yo,{optional:!0})??void 0)}emit(e){let t=et(null);try{super.next(e)}finally{et(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Mt&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Ve=Fb;function lI(n){let e,t;function i(){n=ha;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function BC(n){return queueMicrotask(()=>n()),()=>{n=ha}}var A0="isAngularZone",Tp=A0+"_ID",xU=0,Le=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ve(!1);onMicrotaskEmpty=new Ve(!1);onStable=new Ve(!1);onError=new Ve(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=aI}=e;if(typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,MU(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(A0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new be(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,EU,ha,ha);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},EU={};function R0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function wU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){lI(()=>{n.callbackScheduled=!1,Lb(n),n.isCheckStableRunning=!0,R0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Lb(n)}function MU(n){let e=()=>{wU(n)},t=xU++;n._inner=n._inner.fork({name:"angular",properties:{[A0]:!0,[Tp]:t,[Tp+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(SU(l))return i.invokeTask(o,s,a,l);try{return VC(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),HC(n)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return VC(n),i.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!CU(l)&&e(),HC(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Lb(n),R0(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Lb(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function VC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HC(n){n._nesting--,R0(n)}var Dp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ve;onMicrotaskEmpty=new Ve;onStable=new Ve;onError=new Ve;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function SU(n){return cI(n,"__ignore_ng_zone__")}function CU(n){return cI(n,"__scheduler_tick__")}function cI(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Kp=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),N0=[0,1,2,3],O0=(()=>{class n{ngZone=M(Le);scheduler=M(wr);errorHandler=M(Zn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(fs,{optional:!0})}execute(){let t=this.sequences.size>0;t&&qt(16),this.executing=!0;for(let i of N0)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&qt(17)}register(t){let{view:i}=t;i!==void 0?((i[sa]??=[]).push(t),as(i),i[Je]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Zp.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),Lu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[sa];e&&(this.view[sa]=e.filter(t=>t!==this))}};function hs(n,e){let t=e?.injector??M(It);return or("NgAfterNextRender"),DU(n,t,e,!0)}function TU(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function DU(n,e,t,i){let r=e.get(Kp);r.impl??=e.get(O0);let o=e.get(fs,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ki):null,a=e.get(fa,null,{optional:!0}),l=new Lu(r.impl,TU(n),a?.view,i,s,o?.snapshot(null));return r.impl.register(l),l}var Jp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var P0=new J("");function ba(n){return!!n&&typeof n.then=="function"}function uI(n){return!!n&&typeof n.subscribe=="function"}var dI=new J("");var F0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=M(dI,{optional:!0})??[];injector=M(It);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=ri(this.injector,r);if(ba(o))t.push(o);else if(uI(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xa=new J("");function fI(){A_(()=>{let n="";throw new be(600,n)})}function hI(n){return n.isBoundToModule}var IU=10;var ti=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Mr);afterRenderManager=M(Kp);zonelessEnabled=M(Tl);rootEffectScheduler=M(Cu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Te;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(yo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Be(t=>!t))}constructor(){M(fs,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=M(pn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=It.NULL){return this._injector.get(Le).run(()=>{qt(10);let s=t instanceof Xp;if(!this._injector.get(F0).done){let m="";throw new be(405,m)}let l;s?l=t:l=this._injector.get(qu).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=hI(l)?void 0:this._injector.get(wo),u=i||l.selector,d=l.create(r,[],u,c),h=d.location.nativeElement,f=d.injector.get(P0,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Du(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),qt(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){qt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Zp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new be(101,!1);let t=et(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,et(t),this.afterTick.next(),qt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(An,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<IU;)qt(14),this.synchronizeOnce(),qt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!wu(r))continue;let o=i&&!this.zonelessEnabled?0:1;w0(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Du(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(xa,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Du(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new be(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Du(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function yn(n,e,t,i){let r=vt(),o=da();if(Co(r,o,e)){let s=In(),a=rp();zk(a,r,n,e,t,i)}return yn}var kb=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function rb(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function AU(n,e,t){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),u=e[o],d=rb(o,c,o,u,t);if(d!==0){d<0&&n.updateValue(o,u),o++;continue}let h=n.at(s),f=e[l],m=rb(s,h,l,f,t);if(m!==0){m<0&&n.updateValue(s,f),s--,l--;continue}let v=t(o,c),g=t(s,h),p=t(o,u);if(Object.is(p,g)){let T=t(l,f);Object.is(T,v)?(n.swap(o,s),n.updateValue(s,f),l--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(i??=new Ip,r??=jC(n,o,s,t),Ub(n,i,o,p))n.updateValue(o,u),o++,s++;else if(r.has(p))i.set(v,n.detach(o)),s--;else{let T=n.create(o,e[o]);n.attach(o,T),o++,s++}}for(;o<=l;)zC(n,i,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=n.at(o),d=c.value,h=rb(o,u,o,d,t);if(h!==0)h<0&&n.updateValue(o,d),o++,c=l.next();else{i??=new Ip,r??=jC(n,o,s,t);let f=t(o,d);if(Ub(n,i,o,f))n.updateValue(o,d),o++,s++,c=l.next();else if(!r.has(f))n.attach(o,n.create(o,d)),o++,s++,c=l.next();else{let m=t(o,u);i.set(m,n.detach(o)),s--}}}for(;!c.done;)zC(n,i,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function Ub(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function zC(n,e,t,i,r){if(Ub(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function jC(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var Ip=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Ht(n,e,t,i,r,o,s,a){or("NgControlFlow");let l=vt(),c=In(),u=ir(c.consts,o);return Fu(l,c,n,e,t,i,r,u,256,s,a),L0}function L0(n,e,t,i,r,o,s,a){or("NgControlFlow");let l=vt(),c=In(),u=ir(c.consts,o);return Fu(l,c,n,e,t,i,r,u,512,s,a),L0}function zt(n,e){or("NgControlFlow");let t=vt(),i=da(),r=t[i]!==Bi?t[i]:-1,o=r!==-1?Ap(t,Jt+r):void 0,s=0;if(Co(t,i,n)){let a=et(null);try{if(o!==void 0&&MD(o,s),n!==-1){let l=Jt+n,c=Ap(t,l),u=zb(t[ze],l),d=ND(c,u,t),h=Wu(t,u,e,{dehydratedView:d});$u(c,h,s,Nl(u,d))}}finally{et(a)}}else if(o!==void 0){let a=wD(o,s);a!==void 0&&(a[Mn]=e)}}var Bb=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Vn}};function Yu(n){return n}var Vb=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Zu(n,e,t,i,r,o,s,a,l,c,u,d,h){or("NgControlFlow");let f=vt(),m=In(),v=l!==void 0,g=vt(),p=a?s.bind(g[Kn][Mn]):s,T=new Vb(v,p);g[Jt+n]=T,Fu(f,m,n+1,e,t,i,r,ir(m.consts,o),256),v&&Fu(f,m,n+2,l,c,u,d,ir(m.consts,h),512)}var Hb=class extends kb{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-Vn}at(e){return this.getLView(e)[Mn].$implicit}attach(e,t){let i=t[pi];this.needsIndexUpdate||=e!==this.length,$u(this.lContainer,t,e,Nl(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,RU(this.lContainer,e)}create(e,t){let i=Ou(this.lContainer,this.templateTNode.tView.ssrId),r=Wu(this.hostLView,this.templateTNode,new Bb(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Hp(e[ze],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Mn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Mn].$index=e}getLView(e){return NU(this.lContainer,e)}};function Ku(n){let e=et(null),t=go();try{let i=vt(),r=i[ze],o=i[t],s=t+1,a=Ap(i,s);if(o.liveCollection===void 0){let c=zb(r,s);o.liveCollection=new Hb(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(AU(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=da(),u=l.length===0;if(Co(i,c,u)){let d=t+2,h=Ap(i,d);if(u){let f=zb(r,d),m=ND(h,f,i),v=Wu(i,f,void 0,{dehydratedView:m});$u(h,v,0,Nl(f,m))}else r.firstUpdatePass&&qp(h),MD(h,0)}}}finally{et(e)}}function Ap(n,e){return n[e]}function RU(n,e){return Nu(n,e)}function NU(n,e){return wD(n,e)}function zb(n,e){return Eu(n,e)}function cn(n,e,t){let i=vt(),r=da();if(Co(i,r,e)){let o=In(),s=rp();kk(s,i,n,e,i[$t],t)}return cn}function jb(n,e,t,i,r){x0(e,n,t,r?"class":"style",i)}function ce(n,e,t,i){let r=vt(),o=r[ze],s=n+Jt,a=o.firstCreatePass?UD(s,r,2,e,uD,Oy(),t,i):o.data[s];if(dD(a,r,n,e,k0),xu(a)){let l=r[ze];b0(l,r,a),LT(l,a,r)}return i!=null&&jp(r,a),ce}function le(){let n=In(),e=ei(),t=fD(e);return n.firstCreatePass&&BD(n,t),Py(t)&&Fy(),Ny(),t.classesWithoutHost!=null&&oL(t)&&jb(n,t,vt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&sL(t)&&jb(n,t,vt(),t.stylesWithoutHost,!1),le}function Tt(n,e,t,i){return ce(n,e,t,i),le(),Tt}function Vi(n,e,t,i){let r=vt(),o=r[ze],s=n+Jt,a=o.firstCreatePass?k2(s,o,2,e,t,i):o.data[s];return dD(a,r,n,e,k0),i!=null&&jp(r,a),Vi}function sr(){let n=ei(),e=fD(n);return Py(e)&&Fy(),Ny(),sr}function Gn(n,e,t,i){return Vi(n,e,t,i),sr(),Gn}var k0=(n,e,t,i,r)=>(vo(!0),d0(e[$t],i,Wy()));function OU(n,e,t,i,r){let o=!Lp(e,t);if(vo(o),o)return d0(e[$t],i,Wy());let s=e[pi],a=Wp(s,n,e,t);return NT(s,r)&&Fp(s,r,a.nextSibling),s&&(dT(t)||fT(a))&&mo(t)&&(QS(t),ZT(a)),a}function pI(){k0=OU}var PU=(n,e,t,i,r)=>(vo(!0),XT(e[$t],""));function FU(n,e,t,i,r){let o,s=!Lp(e,t);if(vo(s),s)return XT(e[$t],"");let a=e[pi],l=Wp(a,n,e,t),c=PL(a,r);return Fp(a,r,l),o=$p(c,l),o}function mI(){PU=FU}function Hi(){return vt()}function ps(n,e,t){let i=vt(),r=da();if(Co(i,r,e)){let o=In(),s=rp();cD(s,i,n,e,i[$t],t)}return ps}var Ju="en-US";var LU=Ju;function gI(n){typeof n=="string"&&(LU=n.toLowerCase().replace(/_/g,"-"))}function lt(n,e,t){let i=vt(),r=In(),o=ei();return kU(r,i,i[$t],o,n,e,t),lt}function kU(n,e,t,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=tb(i,e,o),B2(i,n,e,s,t,r,o,l)&&(a=!1)),a){let c=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];l??=tb(i,e,o),PC(i,e,h,f,r,l)}if(c&&c.length)for(let d of c)l??=tb(i,e,o),PC(i,e,d,r,r,l)}}function Xt(n=1){return uC(n)}function UU(n,e){let t=null,i=lk(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?$T(n,o,!0):dk(i,o))return r}return t}function Wn(n){let e=vt()[Kn][hi];if(!e.projection){let t=n?n.length:1,i=e.projection=FS(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?UU(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function kt(n,e=0,t,i,r,o){let s=vt(),a=In(),l=i?n+1:null;l!==null&&Fu(s,a,l,i,r,o,null,t);let c=kl(a,Jt+n,16,null,t||null);c.projection===null&&(c.projection=e),Uy();let d=!s[pi]||Qh();s[Kn][hi].projection[c.projection]===null&&l!==null?BU(s,a,l):d&&!zu(c)&&Ak(a,s,c)}function BU(n,e,t){let i=Jt+t,r=e.data[i],o=n[i],s=Ou(o,r.tView.ssrId),a=Wu(n,r,void 0,{dehydratedView:s});$u(o,a,0,Nl(r,s))}function zi(n,e,t,i){ZD(n,e,t,i)}function tn(n,e,t){YD(n,e,t)}function Rt(n){let e=vt(),t=In(),i=tp();Su(i+1);let r=T0(t,i);if(n.dirty&&$S(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=JD(e,i);n.reset(o,cT),n.notifyOnChanges()}return!0}return!1}function Nt(){return C0(vt(),tp())}function U0(n,e,t,i,r){eI(e,ZD(n,t,i,r))}function Ul(n,e,t,i){eI(n,YD(e,t,i))}function Qp(n=1){Su(tp()+n)}function Bl(n){let e=tC();return WS(e,Jt+n)}function lp(n,e){return n<<17|e<<2}function va(n){return n>>17&32767}function VU(n){return(n&2)==2}function HU(n,e){return n&131071|e<<17}function Gb(n){return n|2}function Ol(n){return(n&131068)>>2}function ob(n,e){return n&-131069|e<<2}function zU(n){return(n&1)===1}function Wb(n){return n|1}function jU(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=va(s),l=Ol(s);n[i]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||bl(d,u)>0)&&(c=!0)}else u=t;if(r)if(l!==0){let h=va(n[a+1]);n[i+1]=lp(h,a),h!==0&&(n[h+1]=ob(n[h+1],i)),n[a+1]=HU(n[a+1],i)}else n[i+1]=lp(a,0),a!==0&&(n[a+1]=ob(n[a+1],i)),a=i;else n[i+1]=lp(l,0),a===0?a=i:n[l+1]=ob(n[l+1],i),l=i;c&&(n[i+1]=Gb(n[i+1])),GC(n,u,i,!0),GC(n,u,i,!1),GU(e,u,n,i,o),s=lp(a,l),o?e.classBindings=s:e.styleBindings=s}function GU(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&bl(o,e)>=0&&(t[i+1]=Wb(t[i+1]))}function GC(n,e,t,i){let r=n[t+1],o=e===null,s=i?va(r):Ol(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];WU(l,e)&&(a=!0,n[s+1]=i?Wb(c):Gb(c)),s=i?va(c):Ol(c)}a&&(n[t+1]=i?Gb(r):Wb(r))}function WU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bl(n,e)>=0:!1}var Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $U(n){return n.substring(Cr.key,Cr.keyEnd)}function qU(n){return XU(n),vI(n,_I(n,0,Cr.textEnd))}function vI(n,e){let t=Cr.textEnd;return t===e?-1:(e=Cr.keyEnd=YU(n,Cr.key=e,t),_I(n,e,t))}function XU(n){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=n.length}function _I(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function YU(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Qu(n,e,t){return yI(n,e,t,!1),Qu}function Ft(n,e){return yI(n,e,null,!0),Ft}function To(n){KU(iB,ZU,n,!0)}function ZU(n,e){for(let t=qU(e);t>=0;t=vI(e,t))Xh(n,$U(e),!0)}function yI(n,e,t,i){let r=vt(),o=In(),s=zy(2);if(o.firstUpdatePass&&xI(o,n,s,i),e!==Bi&&Co(r,s,e)){let a=o.data[go()];EI(o,a,r,r[$t],n,r[s+1]=oB(e,t),i,s)}}function KU(n,e,t,i){let r=In(),o=zy(2);r.firstUpdatePass&&xI(r,null,o,i);let s=vt();if(t!==Bi&&Co(s,o,t)){let a=r.data[go()];if(wI(a,i)&&!bI(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=jh(l,t||"")),jb(r,a,s,t,i)}else rB(r,a,s,s[$t],s[o+1],s[o+1]=nB(n,e,t),i,o)}}function bI(n,e){return e>=n.expandoStartIndex}function xI(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[go()],s=bI(n,t);wI(o,i)&&e===null&&!s&&(e=!1),e=JU(r,o,e,i),jU(r,o,e,t,s,i)}}function JU(n,e,t,i){let r=sC(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=sb(null,n,e,t,i),t=ku(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=sb(r,n,e,t,i),o===null){let l=QU(n,e,i);l!==void 0&&Array.isArray(l)&&(l=sb(null,n,e,l[1],i),l=ku(l,e.attrs,i),eB(n,e,i,l))}else o=tB(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function QU(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Ol(i)!==0)return n[va(i)]}function eB(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[va(r)]=i}function tB(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=ku(i,s,t)}return ku(i,e.attrs,t)}function sb(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=ku(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function ku(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Xh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function nB(n,e,t){if(t==null||t==="")return ii;let i=[],r=Mo(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function iB(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Xh(n,i,t)}function rB(n,e,t,i,r,o,s,a){r===Bi&&(r=ii);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,f=c<o.length?o[c+1]:void 0,m=null,v;u===d?(l+=2,c+=2,h!==f&&(m=d,v=f)):d===null||u!==null&&u<d?(l+=2,m=u):(c+=2,m=d,v=f),m!==null&&EI(n,e,t,i,m,v,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}function EI(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=zU(c)?WC(l,e,t,r,Ol(c),s):void 0;if(!Rp(u)){Rp(o)||VU(c)&&(o=WC(l,null,t,r,a,s));let d=Cy(go(),t);Nk(i,s,d,r,o)}}function WC(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[r+1];h===Bi&&(h=d?ii:void 0);let f=d?Yh(h,i):u===i?h:void 0;if(c&&!Rp(f)&&(f=Yh(l,i)),Rp(f)&&(a=f,s))return a;let m=n[r+1];r=s?va(m):Ol(m)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Yh(l,i))}return a}function Rp(n){return n!==void 0}function oB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=co(Mo(n)))),n}function wI(n,e){return(n.flags&(e?8:16))!==0}function Qe(n,e=""){let t=vt(),i=In(),r=n+Jt,o=i.firstCreatePass?kl(i,r,1,e,null):i.data[r],s=MI(i,t,o,e,n);t[r]=s,op()&&_0(i,t,s,o),Ml(o,!1)}var MI=(n,e,t,i,r)=>(vo(!0),qT(e[$t],i));function sB(n,e,t,i,r){let o=!Lp(e,t);if(vo(o),o)return qT(e[$t],i);let s=e[pi];return Wp(s,n,e,t)}function SI(){MI=sB}function CI(n,e,t,i=""){return Co(n,da(),t)?e+Wh(t)+i:Bi}function Wr(n){return ed("",n),Wr}function ed(n,e,t){let i=vt(),r=CI(i,n,e,t);return r!==Bi&&aB(i,go(),r),ed}function aB(n,e,t){let i=Cy(e,n);mk(n[$t],i,t)}function td(n,e,t=""){return CI(vt(),n,e,t)}function lB(n,e,t){let i=In();if(i.firstCreatePass){let r=zr(n);$b(t,i.data,i.blueprint,r,!0),$b(e,i.data,i.blueprint,r,!1)}}function $b(n,e,t,i,r){if(n=Yn(n),Array.isArray(n))for(let o=0;o<n.length;o++)$b(n[o],e,t,i,r);else{let o=In(),s=vt(),a=ei(),l=ea(n)?n:Yn(n.provide),c=xy(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ea(n)||!n.multi){let f=new ma(c,r,it,null),m=lb(l,e,r?u:u+h,d);m===-1?(ub(vp(a,s),o,l),ab(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),s.push(f)):(t[m]=f,s[m]=f)}else{let f=lb(l,e,u+h,d),m=lb(l,e,u,u+h),v=f>=0&&t[f],g=m>=0&&t[m];if(r&&!g||!r&&!v){ub(vp(a,s),o,l);let p=dB(r?uB:cB,t.length,r,i,c,n);!r&&g&&(t[m].providerFactory=p),ab(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(p),s.push(p)}else{let p=TI(t[r?m:f],c,!r&&i);ab(o,n,f>-1?f:m,p)}!r&&i&&g&&t[m].componentProviders++}}}function ab(n,e,t,i){let r=ea(e),o=HS(e);if(r||o){let l=(o?Yn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function TI(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function lb(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function cB(n,e,t,i,r){return qb(this.multi,[])}function uB(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Iu(i,i[ze],this.providerFactory.index,r);s=l.slice(0,a),qb(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],qb(o,s);return s}function qb(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function dB(n,e,t,i,r,o){let s=new ma(n,t,it,null);return s.multi=[],s.index=e,s.componentProviders=0,TI(s,r,i&&!t),s}function bn(n,e=[]){return t=>{t.providersResolver=(i,r)=>lB(i,r?r(n):n,e)}}function B0(n,e,t){let i=Hy()+n,r=vt();return r[i]===Bi?VD(r,i,t?e.call(t):e()):U2(r,i)}function V0(n,e,t,i){return hB(vt(),Hy(),n,e,t,i)}function fB(n,e){let t=n[e];return t===Bi?void 0:t}function hB(n,e,t,i,r,o){let s=e+t;return Co(n,s,r)?VD(n,s+1,o?i.call(o,r):i(r)):fB(n,s+1)}function H0(n,e){return Gp(n,e)}var Np=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},z0=(()=>{class n{compileModuleSync(t){return new Cp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=vy(t),o=GT(r.declarations).reduce((s,a)=>{let l=uo(a);return l&&s.push(new ga(l)),s},[]);return new Np(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pB=(()=>{class n{zone=M(Le);changeDetectionScheduler=M(wr);applicationRef=M(ti);applicationErrorHandler=M(Mr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DI=new J("",{factory:()=>!1});function j0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Le(Ye($({},W0()),{scheduleInRootZone:t})),[{provide:Le,useFactory:n},{provide:Br,multi:!0,useFactory:()=>{let i=M(pB,{optional:!0});return()=>i.initialize()}},{provide:Br,multi:!0,useFactory:()=>{let i=M(mB);return()=>{i.initialize()}}},e===!0?{provide:Xy,useValue:!0}:[],{provide:Yy,useValue:t??aI},{provide:Mr,useFactory:()=>{let i=M(Le),r=M(pn),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(Zn),o.handleError(s))})}}}]}function G0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=j0({ngZoneFactory:()=>{let r=W0(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&or("NgZone_CoalesceEvent"),new Le(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return fo([{provide:DI,useValue:!0},{provide:Tl,useValue:!1},i])}function W0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var mB=(()=>{class n{subscription=new Mt;initialized=!1;zone=M(Le);pendingTasks=M(yo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var II=(()=>{class n{applicationErrorHandler=M(Mr);appRef=M(ti);taskService=M(yo);ngZone=M(Le);zonelessEnabled=M(Tl);tracing=M(fs,{optional:!0});disableScheduling=M(Xy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Tp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Yy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Dp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?BC:lI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Tp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,BC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gB(){return typeof $localize<"u"&&$localize.locale||Ju}var $0=new J("",{providedIn:"root",factory:()=>M($0,{optional:!0,skipSelf:!0})||gB()});function ar(n){return SS(n)}function lr(n,e){return nu(n,e?.equal)}var q0=class{[Fn];constructor(e){this[Fn]=e}destroy(){this[Fn].destroy()}};function Vl(n,e){let t=e?.injector??M(It),i=e?.manualCleanup!==!0?t.get(ki):null,r,o=t.get(fa,null,{optional:!0}),s=t.get(wr);return o!==null?(r=yB(o.view,s,n),i instanceof mu&&i._lView===o.view&&(i=null)):r=bB(n,t.get(Cu),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new q0(r)}var AI=Ye($({},Yo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ha,run(){if(this.dirty=!1,this.hasRun&&!Ws(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),e=io(this),t=Sl(!1);try{this.maybeCleanup(),this.fn(n)}finally{Sl(t),Zo(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=et(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],et(n)}}}),vB=Ye($({},AI),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){al(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),_B=Ye($({},AI),{consumerMarkedDirty(){this.view[Je]|=8192,as(this.view),this.notifier.notify(13)},destroy(){al(this),this.onDestroyFn(),this.maybeCleanup(),this.view[po]?.delete(this)}});function yB(n,e,t){let i=Object.create(_B);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=t,n[po]??=new Set,n[po].add(i),i.consumerMarkedDirty(i),i}function bB(n,e,t){let i=Object.create(vB);return i.fn=n,i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}var FI=Symbol("InputSignalNode#UNSET"),LB=Ye($({},iu),{transformFn:void 0,applyValueToInputSignal(n,e){ll(n,e)}});function LI(n,e){let t=Object.create(LB);t.value=n,t.transformFn=e?.transform;function i(){if(Gs(t),t.value===FI){let r=null;throw new be(-950,r)}return t.value}return i[Fn]=t,i}var Do=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Zb(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},kB=new J("");kB.__NG_ELEMENT_ID__=n=>{let e=ei();if(e===null)throw new be(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new be(204,!1)};function RI(n,e){return LI(n,e)}function UB(n){return LI(FI,n)}var kI=(RI.required=UB,RI);function NI(n,e){return D0(e)}function BB(n,e){return I0(e)}var id=(NI.required=BB,NI);function OI(n,e){return D0(e)}function VB(n,e){return I0(e)}var UI=(OI.required=VB,OI);var Y0=new J(""),HB=new J("");function nd(n){return!n.moduleRef}function zB(n){let e=nd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Le);return t.run(()=>{nd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Mr),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),nd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Y0);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Y0);s.add(o),n.moduleRef.onDestroy(()=>{Du(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return GB(i,t,()=>{let o=e.get(yo),s=o.add(),a=e.get(F0);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get($0,Ju);if(gI(l||Ju),!e.get(HB,!0))return nd(n)?e.get(ti):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(nd(n)){let u=e.get(ti);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return jB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var jB;function GB(n,e,t){try{let i=t();return ba(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var em=null;function WB(n=[],e){return It.create({name:e,providers:[{provide:_u,useValue:"platform"},{provide:Y0,useValue:new Set([()=>em=null])},...n]})}function $B(n=[]){if(em)return em;let e=WB(n);return em=e,fI(),qB(e),e}function qB(n){let e=n.get(Op,null);ri(n,()=>{e?.forEach(t=>t())})}var vi=(()=>{class n{static __NG_ELEMENT_ID__=XB}return n})();function XB(n){return YB(ei(),vt(),(n&16)===16)}function YB(n,e,t){if(mo(n)&&!t){let i=nr(n.index,e);return new us(i,i)}else if(n.type&175){let i=e[Kn];return new us(i,e)}return null}function BI(n){qt(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=$B(i),o=[j0({}),{provide:wr,useExisting:II},fC,...t||[]],s=new Pu({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return zB({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{qt(9)}}var PI=!1;function ZB(){PI||(PI=!0,IT(),pI(),SI(),mI(),sI(),$D(),RD(),lD())}function KB(n){return n.whenStable()}function VI(){let n=[{provide:Hu,useFactory:()=>{let e=!0;return e=!!M(Ll,{optional:!0})?.get(n0,null),e&&or("NgHydration"),e}},{provide:Br,useValue:()=>{CD(!1),M(Hu)&&(PT(Bu()),ZB())},multi:!0}];return n.push({provide:t0,useFactory:()=>M(Hu)},{provide:xa,useFactory:()=>{if(M(Hu)){let e=M(ti);return()=>{KB(e).then(()=>{e.destroyed||DD(e)})}}return()=>{}},multi:!0}),fo(n)}function Ot(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ea(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}var X0=Symbol("NOT_SET"),HI=new Set,JB=Ye($({},iu),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:X0,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(n){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==X0&&!Ws(this))return this.signal;try{for(let r of this.cleanup??HI)r()}finally{this.cleanup?.clear()}let e=[];n!==void 0&&e.push(n),e.push(this.registerCleanupFn);let t=io(this),i;try{i=this.userFn.apply(null,e)}finally{Zo(this,t)}return(this.value===X0||!this.equal(this.value,i))&&(this.value=i,this.version++),this.signal}}),Z0=class extends Lu{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(e,t,i,r,o,s=null){super(e,[void 0,void 0,void 0,void 0],i,!1,o,s),this.scheduler=r;for(let a of N0){let l=t[a];if(l===void 0)continue;let c=Object.create(JB);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(Gs(c),c.value),c.signal[Fn]=c,c.registerCleanupFn=u=>(c.cleanup??=new Set).add(u),this.nodes[a]=c,this.hooks[a]=u=>c.phaseFn(u)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let e of this.nodes)for(let t of e?.cleanup??HI)t()}};function zI(n,e){let t=e?.injector??M(It),i=t.get(wr),r=t.get(Kp),o=t.get(fs,null,{optional:!0});r.impl??=t.get(O0);let s=n;typeof s=="function"&&(s={mixedReadWrite:n});let a=t.get(fa,null,{optional:!0}),l=new Z0(r.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,i,t.get(ki),o?.snapshot(null));return r.impl.register(l),l}function tm(n,e){let t=uo(n),i=e.elementInjector||xl();return new ga(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var WI=null;function cr(){return WI}function J0(n){WI??=n}var rd=class{},Q0=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>M($I),providedIn:"platform"})}return n})();var $I=(()=>{class n extends Q0{_location;_history;_doc=M(st);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cr().getBaseHref(this._doc)}onPopState(t){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function qI(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function jI(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ms(n){return n&&n[0]!=="?"?`?${n}`:n}var nm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>M(YI),providedIn:"root"})}return n})(),XI=new J(""),YI=(()=>{class n extends nm{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??M(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qI(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+ms(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ms(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ms(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Ge(Q0),Ge(XI,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gs=(()=>{class n{_subject=new Te;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=tV(jI(GI(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ms(i))}normalize(t){return n.stripTrailingSlash(eV(this._basePath,GI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ms(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ms(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=ms;static joinWithSlash=qI;static stripTrailingSlash=jI;static \u0275fac=function(i){return new(i||n)(Ge(nm))};static \u0275prov=ne({token:n,factory:()=>QB(),providedIn:"root"})}return n})();function QB(){return new gs(Ge(nm))}function eV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GI(n){return n.replace(/\/index.html$/,"")}function tV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var ex=/\s+/,ZI=[],tx=(()=>{class n{_ngEl;_renderer;initialClasses=ZI;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(ex):ZI}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(ex):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(ex).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(it(ft),it(Rn))};static \u0275dir=Ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var nx=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(it(gi))};static \u0275dir=Ze({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Sn]})}return n})();var $r=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})();function ix(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var od=class{};var rx="browser";function KI(n){return n===rx}var rm=new J(""),cx=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new be(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Ge(rm),Ge(Le))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),sd=class{_doc;constructor(e){this._doc=e}manager},ox="ng-app-id";function JI(n){for(let e of n)e.remove()}function QI(n,e){let t=e.createElement("style");return t.textContent=n,t}function rV(n,e,t,i){let r=n.head?.querySelectorAll(`style[${ox}="${e}"],link[${ox}="${e}"]`);if(r)for(let o of r)o.removeAttribute(ox),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function ax(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ux=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,rV(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,QI);i?.forEach(r=>this.addUsage(r,this.external,ax))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(JI(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])JI(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,QI(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,ax(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Ge(st),Ge(_a),Ge(Fl,8),Ge(ds))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),sx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dx=/%COMP%/g;var tA="%COMP%",oV=`_nghost-${tA}`,sV=`_ngcontent-${tA}`,aV=!0,lV=new J("",{providedIn:"root",factory:()=>aV});function cV(n){return sV.replace(dx,n)}function uV(n){return oV.replace(dx,n)}function nA(n,e){return e.map(t=>t.replace(dx,n))}var fx=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new ad(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof im?r.applyToHost(t):r instanceof ld&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case bo.Emulated:o=new im(l,c,i,this.appId,u,s,a,d,h);break;case bo.ShadowDom:return new lx(l,c,t,i,s,a,this.nonce,d,h);default:o=new ld(l,c,i,u,s,a,d,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Ge(cx),Ge(ux),Ge(_a),Ge(lV),Ge(st),Ge(ds),Ge(Le),Ge(Fl),Ge(fs,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),ad=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(sx[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eA(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(eA(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new be(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=sx[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=sx[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Eo.DashCase|Eo.Important)?e.style.setProperty(t,i,r&Eo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Eo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=cr().getGlobalEventTarget(this.doc,e),!e))throw new be(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function eA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var lx=class extends ad{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=nA(r.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let h of d){let f=ax(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ld=class extends ad{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?nA(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},im=class extends ld{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,c){let u=r+"-"+i.id;super(e,t,i,o,s,a,l,c,u),this.contentAttr=cV(u),this.hostAttr=uV(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var om=class n extends rd{supportsDOMEvents=!0;static makeCurrent(){J0(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=dV();return t==null?null:fV(t)}resetBaseElement(){cd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ix(document.cookie,e)}},cd=null;function dV(){return cd=cd||document.head.querySelector("base"),cd?cd.getAttribute("href"):null}function fV(n){return new URL(n,document.baseURI).pathname}var hV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),rA=(()=>{class n extends sd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Ge(st))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),iA=["alt","control","meta","shift"],pV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},oA=(()=>{class n extends sd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),iA.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=pV[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),iA.forEach(s=>{if(s!==r){let a=mV[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Ge(st))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function hx(n,e){let t=$({rootComponent:n},gV(e));return BI(t)}function gV(n){return{appProviders:[...xV,...n?.providers??[]],platformProviders:bV}}function vV(){om.makeCurrent()}function _V(){return new Zn}function yV(){return Jb(document),document}var bV=[{provide:ds,useValue:rx},{provide:Op,useValue:vV,multi:!0},{provide:st,useFactory:yV}];var xV=[{provide:_u,useValue:"root"},{provide:Zn,useFactory:_V},{provide:rm,useClass:rA,multi:!0,deps:[st]},{provide:rm,useClass:oA,multi:!0,deps:[st]},fx,ux,cx,{provide:An,useExisting:fx},{provide:od,useClass:hV},[]];var mx=class{};var vs=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var gx=class{encodeKey(e){return sA(e)}encodeValue(e){return sA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function EV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var wV=/%(\d[a-f0-9])/gi,MV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sA(n){return encodeURIComponent(n).replace(wV,(e,t)=>MV[t]??e)}function sm(n){return`${n}`}var Io=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new gx,e.fromString){if(e.fromObject)throw new be(2805,!1);this.map=EV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(sm):[sm(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(sm(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(sm(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var vx=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function SV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function lA(n){return typeof Blob<"u"&&n instanceof Blob}function cA(n){return typeof FormData<"u"&&n instanceof FormData}function CV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var TV="X-Request-URL",uA="text/plain",dA="application/json",Woe=`${dA}, ${uA}, */*`,zl=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(SV(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new vs,this.context??=new vx,!this.params)this.params=new Io,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||aA(this.body)||lA(this.body)||cA(this.body)||CV(this.body)?this.body:this.body instanceof Io?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cA(this.body)?null:lA(this.body)?this.body.type||null:aA(this.body)?null:typeof this.body=="string"?uA:this.body instanceof Io?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?dA:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.transferCache??this.transferCache,h=e.timeout??this.timeout,f=e.body!==void 0?e.body:this.body,m=e.withCredentials??this.withCredentials,v=e.reportProgress??this.reportProgress,g=e.headers||this.headers,p=e.params||this.params,T=e.context??this.context;return e.setHeaders!==void 0&&(g=Object.keys(e.setHeaders).reduce((w,y)=>w.set(y,e.setHeaders[y]),g)),e.setParams&&(p=Object.keys(e.setParams).reduce((w,y)=>w.set(y,e.setParams[y]),p)),new n(t,i,f,{params:p,headers:g,context:T,reportProgress:v,responseType:r,withCredentials:m,transferCache:d,keepalive:o,cache:a,priority:s,timeout:h,mode:l,redirect:c,credentials:u})}},yx=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(yx||{}),_x=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new vs,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var ud=class n extends _x{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=yx.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function px(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect}}var bx=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof zl)o=t;else{let l;r.headers instanceof vs?l=r.headers:l=new vs(r.headers);let c;r.params&&(r.params instanceof Io?c=r.params:c=new Io({fromObject:r.params})),o=new zl(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials})}let s=Fe(o).pipe(Qo(l=>this.handler.handle(l)));if(t instanceof zl||r.observe==="events")return s;let a=s.pipe(Lt(l=>l instanceof ud));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Be(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new be(2806,!1);return l.body}));case"blob":return a.pipe(Be(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new be(2807,!1);return l.body}));case"text":return a.pipe(Be(l=>{if(l.body!==null&&typeof l.body!="string")throw new be(2808,!1);return l.body}));case"json":default:return a.pipe(Be(l=>l.body))}case"response":return a;default:throw new be(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Io().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,px(r,i))}post(t,i,r={}){return this.request("POST",t,px(r,i))}put(t,i,r={}){return this.request("PUT",t,px(r,i))}static \u0275fac=function(i){return new(i||n)(Ge(mx))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var fA=new J("");var $oe=RegExp(`^${TV}:`,"m");var DV=new J(""),IV="b",AV="h",RV="s",NV="st",OV="u",PV="rt",xx=new J(""),FV=["GET","HEAD"];function LV(n,e){let f=M(xx),{isCacheActive:t}=f,i=jM(f,["isCacheActive"]),{transferCache:r,method:o}=n;if(!t||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!FV.includes(o)||!i.includeRequestsWithAuthHeaders&&kV(n)||i.filter?.(n)===!1)return e(n);let s=M(Ll);if(M(DV,{optional:!0}))throw new be(2803,!1);let l=n.url,c=UV(n,l),u=s.get(c,null),d=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(d=r.includeHeaders),u){let{[IV]:m,[PV]:v,[AV]:g,[RV]:p,[NV]:T,[OV]:w}=u,y=m;switch(v){case"arraybuffer":y=new TextEncoder().encode(m).buffer;break;case"blob":y=new Blob([m]);break}let N=new vs(g);return Fe(new ud({body:y,headers:N,status:p,statusText:T,url:w}))}return e(n)}function kV(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function hA(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function UV(n,e){let{params:t,method:i,responseType:r}=n,o=hA(t),s=n.serializeBody();s instanceof URLSearchParams?s=hA(s):typeof s!="string"&&(s="");let a=[i,r,e,s,o].join("|"),l=BV(a);return l}function BV(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function pA(n){return[{provide:xx,useFactory:()=>(or("NgHttpTransferCache"),$({isCacheActive:!0},n))},{provide:fA,useValue:LV,multi:!0},{provide:xa,multi:!0,useFactory:()=>{let e=M(ti),t=M(xx);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var mA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Ge(st))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Ge(zV),r},providedIn:"root"})}return n})(),zV=(()=>{class n extends wx{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case mi.NONE:return i;case mi.HTML:return ya(i,"HTML")?Mo(i):c0(this._doc,String(i)).toString();case mi.STYLE:return ya(i,"Style")?Mo(i):i;case mi.SCRIPT:if(ya(i,"Script"))return Mo(i);throw new be(5200,!1);case mi.URL:return ya(i,"URL")?Mo(i):Up(String(i));case mi.RESOURCE_URL:if(ya(i,"ResourceURL"))return Mo(i);throw new be(5201,!1);default:throw new be(5202,!1)}}bypassSecurityTrustHtml(t){return r0(t)}bypassSecurityTrustStyle(t){return o0(t)}bypassSecurityTrustScript(t){return s0(t)}bypassSecurityTrustUrl(t){return a0(t)}bypassSecurityTrustResourceUrl(t){return l0(t)}static \u0275fac=function(i){return new(i||n)(Ge(st))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ex=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(Ex||{});function gA(...n){let e=[],t=new Set;for(let{\u0275providers:r,\u0275kind:o}of n)t.add(o),r.length&&e.push(r);let i=t.has(Ex.HttpTransferCacheOptions);return fo([[],VI(),t.has(Ex.NoHttpTransferCache)||i?[]:pA({}),e])}var wt="primary",wd=Symbol("RouteTitle"),Dx=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xl(n){return new Dx(n)}function jV(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function GV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qr(n[t],e[t]))return!1;return!0}function qr(n,e){let t=n?Ix(n):void 0,i=e?Ix(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!SA(n[r],e[r]))return!1;return!0}function Ix(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function SA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function CA(n){return n.length>0?n[n.length-1]:null}function No(n){return Dh(n)?n:ba(n)?fn(Promise.resolve(n)):Fe(n)}var WV={exact:DA,subset:IA},TA={exact:$V,subset:qV,ignored:()=>!0};function _A(n,e,t){return WV[t.paths](n.root,e.root,t.matrixParams)&&TA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function $V(n,e){return qr(n,e)}function DA(n,e,t){if(!Ma(n.segments,e.segments)||!cm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!DA(n.children[i],e.children[i],t))return!1;return!0}function qV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>SA(n[t],e[t]))}function IA(n,e,t){return AA(n,e,e.segments,t)}function AA(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ma(r,t)||e.hasChildren()||!cm(r,t,i))}else if(n.segments.length===t.length){if(!Ma(n.segments,t)||!cm(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!IA(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ma(n.segments,r)||!cm(n.segments,r,i)||!n.children[wt]?!1:AA(n.children[wt],e,o,i)}}function cm(n,e,t){return e.every((i,r)=>TA[t](n[r].parameters,i.parameters))}var Ro=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Gt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Xl(this.queryParams),this._queryParamMap}toString(){return ZV.serialize(this)}},Gt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return um(this)}},wa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xl(this.parameters),this._parameterMap}toString(){return NA(this)}};function XV(n,e){return Ma(n,e)&&n.every((t,i)=>qr(t.parameters,e[i].parameters))}function Ma(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function YV(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===wt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==wt&&(t=t.concat(e(r,i)))}),t}var Em=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>new Yl,providedIn:"root"})}return n})(),Yl=class{parse(e){let t=new Rx(e);return new Ro(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${dd(e.root,!0)}`,i=QV(e.queryParams),r=typeof e.fragment=="string"?`#${KV(e.fragment)}`:"";return`${t}${i}${r}`}},ZV=new Yl;function um(n){return n.segments.map(e=>NA(e)).join("/")}function dd(n,e){if(!n.hasChildren())return um(n);if(e){let t=n.children[wt]?dd(n.children[wt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==wt&&i.push(`${r}:${dd(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=YV(n,(i,r)=>r===wt?[dd(n.children[wt],!1)]:[`${r}:${dd(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[wt]!=null?`${um(n)}/${t[0]}`:`${um(n)}/(${t.join("//")})`}}function RA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function am(n){return RA(n).replace(/%3B/gi,";")}function KV(n){return encodeURI(n)}function Ax(n){return RA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dm(n){return decodeURIComponent(n)}function yA(n){return dm(n.replace(/\+/g,"%20"))}function NA(n){return`${Ax(n.path)}${JV(n.parameters)}`}function JV(n){return Object.entries(n).map(([e,t])=>`;${Ax(e)}=${Ax(t)}`).join("")}function QV(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${am(t)}=${am(r)}`).join("&"):`${am(t)}=${am(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var e3=/^[^\/()?;#]+/;function Mx(n){let e=n.match(e3);return e?e[0]:""}var t3=/^[^\/()?;=#]+/;function n3(n){let e=n.match(t3);return e?e[0]:""}var i3=/^[^=?&#]+/;function r3(n){let e=n.match(i3);return e?e[0]:""}var o3=/^[^&#]+/;function s3(n){let e=n.match(o3);return e?e[0]:""}var Rx=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[wt]=new Gt(e,t)),i}parseSegment(){let e=Mx(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new be(4009,!1);return this.capture(e),new wa(dm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=n3(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Mx(this.remaining);r&&(i=r,this.capture(i))}e[dm(t)]=dm(i)}parseQueryParam(e){let t=r3(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=s3(this.remaining);s&&(i=s,this.capture(i))}let r=yA(t),o=yA(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Mx(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new be(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=wt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[wt]:new Gt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new be(4011,!1)}};function OA(n){return n.segments.length>0?new Gt([],{[wt]:n}):n}function PA(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=PA(r);if(i===wt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Gt(n.segments,e);return a3(t)}function a3(n){if(n.numberOfChildren===1&&n.children[wt]){let e=n.children[wt];return new Gt(n.segments.concat(e.segments),e.children)}return n}function Zl(n){return n instanceof Ro}function l3(n,e,t=null,i=null){let r=FA(n);return LA(r,e,t,i)}function FA(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new Gt(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=OA(i);return e??r}function LA(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Sx(r,r,r,t,i);let o=c3(e);if(o.toRoot())return Sx(r,r,new Gt([],{}),t,i);let s=u3(o,r,n),a=s.processChildren?hd(s.segmentGroup,s.index,o.commands):UA(s.segmentGroup,s.index,o.commands);return Sx(r,s.segmentGroup,a,t,i)}function fm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gd(n){return typeof n=="object"&&n!=null&&n.outlets}function Sx(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;n===e?s=t:s=kA(n,e,t);let a=OA(PA(s));return new Ro(a,o,r)}function kA(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=kA(o,e,t)}),new Gt(n.segments,i)}var hm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&fm(i[0]))throw new be(4003,!1);let r=i.find(gd);if(r&&r!==CA(i))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function c3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hm(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new hm(t,e,i)}var Wl=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function u3(n,e,t){if(n.isAbsolute)return new Wl(e,!0,0);if(!t)return new Wl(e,!1,NaN);if(t.parent===null)return new Wl(t,!0,0);let i=fm(n.commands[0])?0:1,r=t.segments.length-1+i;return d3(t,r,n.numberOfDoubleDots)}function d3(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new be(4005,!1);r=i.segments.length}return new Wl(i,!1,r-o)}function f3(n){return gd(n[0])?n[0].outlets:{[wt]:n}}function UA(n,e,t){if(n??=new Gt([],{}),n.segments.length===0&&n.hasChildren())return hd(n,e,t);let i=h3(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Gt(n.segments.slice(0,i.pathIndex),{});return o.children[wt]=new Gt(n.segments.slice(i.pathIndex),n.children),hd(o,0,r)}else return i.match&&r.length===0?new Gt(n.segments,{}):i.match&&!n.hasChildren()?Nx(n,e,t):i.match?hd(n,0,r):Nx(n,e,t)}function hd(n,e,t){if(t.length===0)return new Gt(n.segments,{});{let i=f3(t),r={};if(Object.keys(i).some(o=>o!==wt)&&n.children[wt]&&n.numberOfChildren===1&&n.children[wt].segments.length===0){let o=hd(n.children[wt],e,t);return new Gt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=UA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Gt(n.segments,r)}}function h3(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(gd(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!xA(l,c,s))return o;i+=2}else{if(!xA(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Nx(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(gd(o)){let l=p3(o.outlets);return new Gt(i,l)}if(r===0&&fm(t[0])){let l=n.segments[e];i.push(new wa(l.path,bA(t[0]))),r++;continue}let s=gd(o)?o.outlets[wt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&fm(a)?(i.push(new wa(s,bA(a))),r+=2):(i.push(new wa(s,{})),r++)}return new Gt(i,{})}function p3(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Nx(new Gt([],{}),0,i))}),e}function bA(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function xA(n,e,t){return n==t.path&&qr(e,t.parameters)}var pd="imperative",ni=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ni||{}),ur=class{id;url;constructor(e,t){this.id=e,this.url=t}},Kl=class extends ur{type=ni.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_s=class extends ur{urlAfterRedirects;type=ni.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wi=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(wi||{}),pm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(pm||{}),Ao=class extends ur{reason;code;type=ni.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ys=class extends ur{reason;code;type=ni.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},vd=class extends ur{error;target;type=ni.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mm=class extends ur{urlAfterRedirects;state;type=ni.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ox=class extends ur{urlAfterRedirects;state;type=ni.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Px=class extends ur{urlAfterRedirects;state;shouldActivate;type=ni.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fx=class extends ur{urlAfterRedirects;state;type=ni.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lx=class extends ur{urlAfterRedirects;state;type=ni.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kx=class{route;type=ni.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ux=class{route;type=ni.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bx=class{snapshot;type=ni.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vx=class{snapshot;type=ni.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hx=class{snapshot;type=ni.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zx=class{snapshot;type=ni.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var _d=class{},Jl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function m3(n){return!(n instanceof _d)&&!(n instanceof Jl)}function g3(n,e){return n.providers&&!n._injector&&(n._injector=Xu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tr(n){return n.outlet||wt}function v3(n,e){let t=n.filter(i=>Tr(i)===e);return t.push(...n.filter(i=>Tr(i)!==e)),t}function ec(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var jx=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ec(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Md(this.rootInjector)}},Md=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new jx(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Ge(pn))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Gx(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Gx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Wx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Wx(e,this._root).map(t=>t.value)}};function Gx(n,e){if(n===e.value)return e;for(let t of e.children){let i=Gx(n,t);if(i)return i}return null}function Wx(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Wx(n,t);if(i.length)return i.unshift(e),i}return[]}var ji=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Gl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vm=class extends gm{snapshot;constructor(e,t){super(e),this.snapshot=t,eE(this,e)}toString(){return this.snapshot.toString()}};function BA(n){let e=_3(n),t=new Ln([new wa("",{})]),i=new Ln({}),r=new Ln({}),o=new Ln({}),s=new Ln(""),a=new Sa(t,i,o,s,r,wt,n,e.root);return a.snapshot=e.root,new vm(new ji(a,[]),e)}function _3(n){let e={},t={},i={},r="",o=new $l([],e,i,r,t,wt,n,null,{});return new ym("",new ji(o,[]))}var Sa=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Be(c=>c[wd]))??Fe(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>Xl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>Xl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _m(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),r?.data),n._resolvedData)}:i={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},r&&HA(r)&&(i.resolve[wd]=r.title),i}var $l=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wd]}constructor(e,t,i,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ym=class extends gm{url;constructor(e,t){super(t),this.url=e,eE(this,t)}toString(){return VA(this._root)}};function eE(n,e){e.value._routerState=n,e.children.forEach(t=>eE(n,t))}function VA(n){let e=n.children.length>0?` { ${n.children.map(VA).join(", ")} } `:"";return`${n.value}${e}`}function Cx(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),qr(e.params,t.params)||n.paramsSubject.next(t.params),GV(e.url,t.url)||n.urlSubject.next(t.url),qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $x(n,e){let t=qr(n.params,e.params)&&XV(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||$x(n.parent,e.parent))}function HA(n){return typeof n.title=="string"||n.title===null}var y3=new J(""),zA=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=wt;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=kI(void 0);parentContexts=M(Md);location=M(gi);changeDetector=M(vi);inputBinder=M(wm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new be(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new qx(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Sn]})}return n})(),qx=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Sa?this.route:e===Md?this.childContexts:e===y3?this.outletData:this.parent.get(e,t)}},wm=new J("");var jA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Tt(0,"router-outlet")},dependencies:[zA],encapsulation:2})}return n})();function tE(n){let e=n.children&&n.children.map(tE),t=e?Ye($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wt&&(t.component=jA),t}function b3(n,e,t){let i=yd(n,e._root,t?t._root:void 0);return new vm(i,e)}function yd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=x3(n,e,t);return new ji(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yd(n,a)),s}}let i=E3(e.value),r=e.children.map(o=>yd(n,o));return new ji(i,r)}}function x3(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return yd(n,i,r);return yd(n,i)})}function E3(n){return new Sa(new Ln(n.url),new Ln(n.params),new Ln(n.queryParams),new Ln(n.fragment),new Ln(n.data),n.outlet,n.component,n)}var bd=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},GA="ngNavigationCancelingError";function bm(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Zl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=WA(!1,wi.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function WA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[GA]=!0,t.cancellationCode=e,t}function w3(n){return $A(n)&&Zl(n.url)}function $A(n){return!!n&&n[GA]}var M3=(n,e,t,i)=>Be(r=>(new Xx(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Xx=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Cx(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Gl(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Gl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Gl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Gl(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new zx(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vx(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Cx(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cx(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},xm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ql=class{component;route;constructor(e,t){this.component=e,this.route=t}};function S3(n,e,t){let i=n._root,r=e?e._root:null;return fd(i,r,t,[i.value])}function C3(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function tc(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!oy(n)?n:e.get(n):i}function fd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Gl(e);return n.children.forEach(s=>{T3(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>md(a,t.getContext(s),r)),r}function T3(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=D3(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new xm(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fd(n,e,a?a.children:null,i,r):fd(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ql(a.outlet.component,s))}else s&&md(e,a,r),r.canActivateChecks.push(new xm(i)),o.component?fd(n,null,a?a.children:null,i,r):fd(n,null,t,i,r);return r}function D3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ma(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ma(n.url,e.url)||!qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$x(n,e)||!qr(n.queryParams,e.queryParams);case"paramsChange":default:return!$x(n,e)}}function md(n,e,t){let i=Gl(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?md(s,e.children.getContext(o),t):md(s,null,t):md(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ql(e.outlet.component,r)):t.canDeactivateChecks.push(new ql(null,r)):t.canDeactivateChecks.push(new ql(null,r))}function Sd(n){return typeof n=="function"}function I3(n){return typeof n=="boolean"}function A3(n){return n&&Sd(n.canLoad)}function R3(n){return n&&Sd(n.canActivate)}function N3(n){return n&&Sd(n.canActivateChild)}function O3(n){return n&&Sd(n.canDeactivate)}function P3(n){return n&&Sd(n.canMatch)}function qA(n){return n instanceof oo||n?.name==="EmptyError"}var lm=Symbol("INITIAL_VALUE");function Ql(){return Xn(n=>gl(n.map(e=>e.pipe(qn(1),Ai(lm)))).pipe(Be(e=>{for(let t of e)if(t!==!0){if(t===lm)return lm;if(t===!1||F3(t))return t}return!0}),Lt(e=>e!==lm),qn(1)))}function F3(n){return Zl(n)||n instanceof bd}function L3(n,e){return kn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Fe(Ye($({},t),{guardsResult:!0})):k3(s,i,r,n).pipe(kn(a=>a&&I3(a)?U3(i,o,n,e):Fe(a)),Be(a=>Ye($({},t),{guardsResult:a})))})}function k3(n,e,t,i){return fn(n).pipe(kn(r=>j3(r.component,r.route,t,e,i)),ao(r=>r!==!0,!0))}function U3(n,e,t,i){return fn(e).pipe(Qo(r=>Jo(V3(r.route.parent,i),B3(r.route,i),z3(n,r.path,t),H3(n,r.route,t))),ao(r=>r!==!0,!0))}function B3(n,e){return n!==null&&e&&e(new Hx(n)),Fe(!0)}function V3(n,e){return n!==null&&e&&e(new Bx(n)),Fe(!0)}function H3(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Fe(!0);let r=i.map(o=>Zs(()=>{let s=ec(e)??t,a=tc(o,s),l=R3(a)?a.canActivate(e,n):ri(s,()=>a(e,n));return No(l).pipe(ao())}));return Fe(r).pipe(Ql())}function z3(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>C3(s)).filter(s=>s!==null).map(s=>Zs(()=>{let a=s.guards.map(l=>{let c=ec(s.node)??t,u=tc(l,c),d=N3(u)?u.canActivateChild(i,n):ri(c,()=>u(i,n));return No(d).pipe(ao())});return Fe(a).pipe(Ql())}));return Fe(o).pipe(Ql())}function j3(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Fe(!0);let s=o.map(a=>{let l=ec(e)??r,c=tc(a,l),u=O3(c)?c.canDeactivate(n,e,t,i):ri(l,()=>c(n,e,t,i));return No(u).pipe(ao())});return Fe(s).pipe(Ql())}function G3(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Fe(!0);let o=r.map(s=>{let a=tc(s,n),l=A3(a)?a.canLoad(e,t):ri(n,()=>a(e,t));return No(l)});return Fe(o).pipe(Ql(),XA(i))}function XA(n){return U_(hn(e=>{if(typeof e!="boolean")throw bm(n,e)}),Be(e=>e===!0))}function W3(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Fe(!0);let o=r.map(s=>{let a=tc(s,n),l=P3(a)?a.canMatch(e,t):ri(n,()=>a(e,t));return No(l)});return Fe(o).pipe(Ql(),XA(i))}var xd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ed=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function jl(n){return Ko(new xd(n))}function $3(n){return Ko(new be(4e3,!1))}function q3(n){return Ko(WA(!1,wi.GuardRejected))}var Yx=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Fe(i);if(r.numberOfChildren>1||!r.children[wt])return $3(`${e.redirectTo}`);r=r.children[wt]}}applyRedirectCommands(e,t,i,r,o){return X3(t,r,o).pipe(Be(s=>{if(s instanceof Ro)throw new Ed(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new Ed(a);return a}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Ro(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Gt(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new be(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function X3(n,e,t){if(typeof n=="string")return Fe(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:u,title:d}=e;return No(ri(t,()=>i({params:c,data:u,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,title:d})))}var Zx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y3(n,e,t,i,r){let o=YA(n,e,t);return o.matched?(i=g3(e,i),W3(i,e,t,r).pipe(Be(s=>s===!0?o:$({},Zx)))):Fe(o)}function YA(n,e,t){if(e.path==="**")return Z3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},Zx):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||jV)(t,n,e);if(!r)return $({},Zx);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?$($({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Z3(n){return{matched:!0,parameters:n.length>0?CA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function EA(n,e,t,i){return t.length>0&&Q3(n,t,i)?{segmentGroup:new Gt(e,J3(i,new Gt(t,n.children))),slicedSegments:[]}:t.length===0&&eH(n,t,i)?{segmentGroup:new Gt(n.segments,K3(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Gt(n.segments,n.children),slicedSegments:t}}function K3(n,e,t,i){let r={};for(let o of t)if(Mm(n,e,o)&&!i[Tr(o)]){let s=new Gt([],{});r[Tr(o)]=s}return $($({},i),r)}function J3(n,e){let t={};t[wt]=e;for(let i of n)if(i.path===""&&Tr(i)!==wt){let r=new Gt([],{});t[Tr(i)]=r}return t}function Q3(n,e,t){return t.some(i=>Mm(n,e,i)&&Tr(i)!==wt)}function eH(n,e,t){return t.some(i=>Mm(n,e,i))}function Mm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tH(n,e,t){return e.length===0&&!n.children[t]}var Kx=class{};function nH(n,e,t,i,r,o,s="emptyOnly"){return new Jx(n,e,t,i,r,s,o).recognize()}var iH=31,Jx=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Yx(this.urlSerializer,this.urlTree)}noMatchError(e){return new be(4002,`'${e.segmentGroup}'`)}recognize(){let e=EA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Be(({children:t,rootSnapshot:i})=>{let r=new ji(i,t),o=new ym("",r),s=l3(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new $l([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),wt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,wt,t).pipe(Be(i=>({children:i,rootSnapshot:t})),Ur(i=>{if(i instanceof Ed)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof xd?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Be(s=>s instanceof ji?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return fn(o).pipe(Qo(s=>{let a=i.children[s],l=v3(t,s);return this.processSegmentGroup(e,l,a,s,r)}),G_((s,a)=>(s.push(...a),s)),ts(null),j_(),kn(s=>{if(s===null)return jl(i);let a=ZA(s);return rH(a),Fe(a)}))}processSegment(e,t,i,r,o,s,a){return fn(t).pipe(Qo(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(Ur(c=>{if(c instanceof xd)return Fe(null);throw c}))),ao(l=>!!l),Ur(l=>{if(qA(l))return tH(i,r,o)?Fe(new Kx):jl(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return Tr(i)!==s&&(s===wt||!Mm(r,o,i))?jl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):jl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=YA(t,r,o);if(!l)return jl(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iH&&(this.allowRedirects=!1));let f=new $l(o,c,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,wA(r),Tr(r),r.component??r._loadedComponent??null,r,MA(r)),m=_m(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(m.params),f.data=Object.freeze(m.data),this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e).pipe(Xn(g=>this.applyRedirects.lineralizeSegments(r,g)),kn(g=>this.processSegment(e,i,t,g.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=Y3(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Xn(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Xn(({routes:c})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,m=new $l(h,d,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,wA(i),Tr(i),i.component??i._loadedComponent??null,i,MA(i)),v=_m(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(v.params),m.data=Object.freeze(v.data);let{segmentGroup:g,slicedSegments:p}=EA(t,h,f,c);if(p.length===0&&g.hasChildren())return this.processChildren(u,c,g,m).pipe(Be(w=>new ji(m,w)));if(c.length===0&&p.length===0)return Fe(new ji(m,[]));let T=Tr(i)===o;return this.processSegment(u,c,g,p,T?wt:o,!0,m).pipe(Be(w=>new ji(m,w instanceof ji?[w]:[])))}))):jl(t)))}getChildConfig(e,t,i){return t.children?Fe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Fe({routes:t._loadedRoutes,injector:t._loadedInjector}):G3(e,t,i,this.urlSerializer).pipe(kn(r=>r?this.configLoader.loadChildren(e,t).pipe(hn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):q3(t))):Fe({routes:[],injector:e})}};function rH(n){n.sort((e,t)=>e.value.outlet===wt?-1:t.value.outlet===wt?1:e.value.outlet.localeCompare(t.value.outlet))}function oH(n){let e=n.value.routeConfig;return e&&e.path===""}function ZA(n){let e=[],t=new Set;for(let i of n){if(!oH(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=ZA(i.children);e.push(new ji(i.value,r))}return e.filter(i=>!t.has(i))}function wA(n){return n.data||{}}function MA(n){return n.resolve||{}}function sH(n,e,t,i,r,o){return kn(s=>nH(n,e,t,i,s.extractedUrl,r,o).pipe(Be(({state:a,tree:l})=>Ye($({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function aH(n,e){return kn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Fe(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of KA(l))s.add(c);let a=0;return fn(s).pipe(Qo(l=>o.has(l)?lH(l,i,n,e):(l.data=_m(l,l.parent,n).resolve,Fe(void 0))),hn(()=>a++),vl(1),kn(l=>a===s.size?Fe(t):Dn))})}function KA(n){let e=n.children.map(t=>KA(t)).flat();return[n,...e]}function lH(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!HA(r)&&(o[wd]=r.title),Zs(()=>(n.data=_m(n,n.parent,t).resolve,cH(o,n,e,i).pipe(Be(s=>(n._resolvedData=s,n.data=$($({},n.data),s),null)))))}function cH(n,e,t,i){let r=Ix(n);if(r.length===0)return Fe({});let o={};return fn(r).pipe(kn(s=>uH(n[s],e,t,i).pipe(ao(),hn(a=>{if(a instanceof bd)throw bm(new Yl,a);o[s]=a}))),vl(1),Be(()=>o),Ur(s=>qA(s)?Dn:Ko(s)))}function uH(n,e,t,i){let r=ec(e)??i,o=tc(n,r),s=o.resolve?o.resolve(e,t):ri(r,()=>o(e,t));return No(s)}function Tx(n){return Xn(e=>{let t=n(e);return t?fn(t).pipe(Be(()=>e)):Fe(e)})}var JA=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===wt);return i}getResolvedTitleForRoute(t){return t.data[wd]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>M(dH),providedIn:"root"})}return n})(),dH=(()=>{class n extends JA{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Ge(mA))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sm=new J("",{providedIn:"root",factory:()=>({})}),Cm=new J(""),QA=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(z0);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Fe(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=No(ri(t,()=>i.loadComponent())).pipe(Be(eR),hn(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),ns(()=>{this.componentLoaders.delete(i)})),o=new pl(r,()=>new Te).pipe(hl());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Fe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=fH(i,this.compiler,t,this.onLoadEndListener).pipe(ns(()=>{this.childrenLoaders.delete(i)})),s=new pl(o,()=>new Te).pipe(hl());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fH(n,e,t,i){return No(ri(t,()=>n.loadChildren())).pipe(Be(eR),kn(r=>r instanceof Yp||Array.isArray(r)?Fe(r):fn(e.compileModuleAsync(r))),Be(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(Cm,[],{optional:!0,self:!0}).flat()),{routes:s.map(tE),injector:o}}))}function hH(n){return n&&typeof n=="object"&&"default"in n}function eR(n){return hH(n)?n.default:n}var nE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>M(pH),providedIn:"root"})}return n})(),pH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tR=new J("");var nR=new J(""),iR=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Te;transitionAbortWithErrorSubject=new Te;configLoader=M(QA);environmentInjector=M(pn);destroyRef=M(ki);urlSerializer=M(Em);rootContexts=M(Md);location=M(gs);inputBindingEnabled=M(wm,{optional:!0})!==null;titleStrategy=M(JA);options=M(Sm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(nE);createViewTransition=M(tR,{optional:!0});navigationErrorHandler=M(nR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new kx(r)),i=r=>this.events.next(new Ux(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ye($({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(t){return this.transitions=new Ln(null),this.transitions.pipe(Lt(i=>i!==null),Xn(i=>{let r=!1;return Fe(i).pipe(Xn(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",wi.SupersededByNewNavigation),Dn;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ye($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let l="";return this.events.next(new ys(o.id,this.urlSerializer.serialize(o.rawUrl),l,pm.IgnoredSameUrlNavigation)),o.resolve(!1),Dn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Fe(o).pipe(Xn(l=>(this.events.next(new Kl(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Dn:Promise.resolve(l))),sH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),hn(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=Ye($({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let c=new mm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:d,extras:h}=o,f=new Kl(l,this.urlSerializer.serialize(c),u,d);this.events.next(f);let m=BA(this.rootComponentType).snapshot;return this.currentTransition=i=Ye($({},o),{targetSnapshot:m,urlAfterRedirects:c,extras:Ye($({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=c,Fe(i)}else{let l="";return this.events.next(new ys(o.id,this.urlSerializer.serialize(o.extractedUrl),l,pm.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Dn}}),hn(o=>{let s=new Ox(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Be(o=>(this.currentTransition=i=Ye($({},o),{guards:S3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),L3(this.environmentInjector,o=>this.events.next(o)),hn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw bm(this.urlSerializer,o.guardsResult);let s=new Px(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Lt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",wi.GuardRejected),!1)),Tx(o=>{if(o.guards.canActivateChecks.length!==0)return Fe(o).pipe(hn(s=>{let a=new Fx(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Xn(s=>{let a=!1;return Fe(s).pipe(aH(this.paramsInheritanceStrategy,this.environmentInjector),hn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",wi.NoDataFromResolver)}}))}),hn(s=>{let a=new Lx(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Tx(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let c=ec(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(hn(u=>{a.component=u}),Be(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return gl(s(o.targetSnapshot.root)).pipe(ts(null),qn(1))}),Tx(()=>this.afterPreactivation()),Xn(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?fn(a).pipe(Be(()=>i)):Fe(i)}),Be(o=>{let s=b3(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Ye($({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,i}),hn(()=>{this.events.next(new _d)}),M3(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),qn(1),Un(new dt(o=>{let s=i.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Lt(()=>!r&&!i.targetRouterState),hn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",wi.Aborted)}))),hn({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _s(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Un(this.transitionAbortWithErrorSubject.pipe(hn(o=>{throw o}))),ns(()=>{r||this.cancelNavigationTransition(i,"",wi.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ur(o=>{if(this.destroyed)return i.resolve(!1),Dn;if(r=!0,$A(o))this.events.next(new Ao(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),w3(o)?this.events.next(new Jl(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new vd(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let a=ri(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof bd){let{message:l,cancellationCode:c}=bm(this.urlSerializer,a);this.events.next(new Ao(i.id,this.urlSerializer.serialize(i.extractedUrl),l,c)),this.events.next(new Jl(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(a)}}return Dn}))}))}cancelNavigationTransition(t,i,r){let o=new Ao(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mH(n){return n!==pd}var gH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>M(vH),providedIn:"root"})}return n})(),Qx=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},vH=(()=>{class n extends Qx{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rR=(()=>{class n{urlSerializer=M(Em);options=M(Sm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(gs);urlHandlingStrategy=M(nE);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ro;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof Ro?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=BA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:()=>M(_H),providedIn:"root"})}return n})(),_H=(()=>{class n extends rR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Kl?this.updateStateMemento():t instanceof ys?this.commitTransition(i):t instanceof mm?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof _d?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Ao&&t.code!==wi.SupersededByNewNavigation&&t.code!==wi.Redirect?this.restoreHistory(i):t instanceof vd?this.restoreHistory(i,!0):t instanceof _s&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=$($({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=$($({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oR(n,e){n.events.pipe(Lt(t=>t instanceof _s||t instanceof Ao||t instanceof vd||t instanceof ys),Be(t=>t instanceof _s||t instanceof ys?0:(t instanceof Ao?t.code===wi.Redirect||t.code===wi.SupersededByNewNavigation:!1)?2:1),Lt(t=>t!==2),qn(1)).subscribe(()=>{e()})}var yH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},iE=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Jp);stateManager=M(rR);options=M(Sm,{optional:!0})||{};pendingTasks=M(yo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(iR);urlSerializer=M(Em);location=M(gs);urlHandlingStrategy=M(nE);injector=M(pn);_events=new Te;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(gH);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Cm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(wm,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ao&&i.code!==wi.Redirect&&i.code!==wi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof _s)this.navigated=!0;else if(i instanceof Jl){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=$({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||mH(r.source)},s);this.scheduleNavigation(a,pd,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}m3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=$({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o).catch(l=>{this.disposed||this.injector.get(Mr)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=FA(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return LA(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Zl(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,pd,null,i)}navigate(t,i={skipLocationChange:!1}){return xH(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=$({},yH):i===!1?r=$({},bH):r=i,Zl(t))return _A(this.currentUrlTree,t,r);let o=this.parseUrl(t);return _A(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return oR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new be(4008,!1)}var EH=new J("");function rE(n,...e){return fo([{provide:Cm,multi:!0,useValue:n},[],{provide:Sa,useFactory:wH,deps:[iE]},{provide:xa,multi:!0,useFactory:MH},e.map(t=>t.\u0275providers)])}function wH(n){return n.routerState.root}function MH(){let n=M(It);return e=>{let t=n.get(ti);if(e!==t.components[0])return;let i=n.get(iE),r=n.get(SH);n.get(CH)===1&&i.initialNavigation(),n.get(TH,null,{optional:!0})?.setUpPreloading(),n.get(EH,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var SH=new J("",{factory:()=>new Te}),CH=new J("",{providedIn:"root",factory:()=>1});var TH=new J("");var sR={providers:[G0({eventCoalescing:!0}),rE([]),gA()]};var Tm;function IH(){if(Tm===void 0&&(Tm=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Tm=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Tm}function Cd(n){return IH()?.createHTML(n)||n}function aR(n){return Error(`Unable to find icon with the name "${n}"`)}function AH(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function lR(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function cR(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Oo=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},dR=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new Oo(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){let s=this._sanitizer.sanitize(mi.HTML,r);if(!s)throw cR(r);let a=Cd(s);return this._addSvgIconConfig(t,i,new Oo("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Oo(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let o=this._sanitizer.sanitize(mi.HTML,i);if(!o)throw cR(i);let s=Cd(o);return this._addSvgIconSetConfig(t,new Oo("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(mi.RESOURCE_URL,t);if(!i)throw lR(t);let r=this._cachedIconsByUrl.get(i);return r?Fe(Dm(r)):this._loadSvgIconFromConfig(new Oo(t,null)).pipe(hn(o=>this._cachedIconsByUrl.set(i,o)),Be(o=>Dm(o)))}getNamedSvgIcon(t,i=""){let r=uR(i,t),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):Ko(aR(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Fe(Dm(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Be(i=>Dm(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return Fe(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Ur(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(mi.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Fe(null)})));return lu(o).pipe(Be(()=>{let s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw aR(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(hn(i=>t.svgText=i),Be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Fe(null):this._fetchIcon(t).pipe(hn(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let o=t.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(Cd("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(Cd("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw AH();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(mi.RESOURCE_URL,i);if(!s)throw lR(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Be(c=>Cd(c)),ns(()=>this._inProgressUrlFetches.delete(s)),cu());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(uR(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,t);if(o)return RH(o)?new Oo(o.url,null,o.options):new Oo(o,null)}}static \u0275fac=function(i){return new(i||n)(Ge(bx,8),Ge(wx),Ge(st,8),Ge(Zn))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dm(n){return n.cloneNode(!0)}function uR(n,e){return n+":"+e}function RH(n){return!!(n.url&&n.options)}function Td(n){return n.buttons===0||n.detail===0}function Dd(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var oE;function fR(){if(oE==null){let n=typeof document<"u"?document.head:null;oE=!!(n&&(n.createShadowRoot||n.attachShadow))}return oE}function sE(n){if(fR()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function _i(n){return n.composedPath?n.composedPath()[0]:n.target}var aE;try{aE=typeof Intl<"u"&&Intl.v8BreakIterator}catch{aE=!1}var un=(()=>{class n{_platformId=M(ds);isBrowser=this._platformId?KI(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||aE)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Id;function hR(){if(Id==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Id=!0}))}finally{Id=Id||!1}return Id}function nc(n){return hR()?n:!!n.capture}function Gi(n){return n instanceof ft?n.nativeElement:n}var pR=new J("cdk-input-modality-detector-options"),mR={ignoreKeys:[18,17,224,91,16]},gR=650,lE={passive:!0,capture:!0},vR=(()=>{class n{_platform=M(un);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Ln(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=_i(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<gR||(this._modality.next(Td(t)?"keyboard":"mouse"),this._mostRecentTarget=_i(t))};_onTouchstart=t=>{if(Dd(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=_i(t)};constructor(){let t=M(Le),i=M(st),r=M(pR,{optional:!0});if(this._options=$($({},mR),r),this.modalityDetected=this._modality.pipe(uu(1)),this.modalityChanged=this.modalityDetected.pipe(Ph()),this._platform.isBrowser){let o=M(An).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[o.listen(i,"keydown",this._onKeydown,lE),o.listen(i,"mousedown",this._onMousedown,lE),o.listen(i,"touchstart",this._onTouchstart,lE)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ad=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Ad||{}),_R=new J("cdk-focus-monitor-default-options"),Im=nc({passive:!0,capture:!0}),Rd=(()=>{class n{_ngZone=M(Le);_platform=M(un);_inputModalityDetector=M(vR);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=M(st);_stopInputModalityDetector=new Te;constructor(){let t=M(_R,{optional:!0});this._detectionMode=t?.detectionMode||Ad.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=_i(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=Gi(t);if(!this._platform.isBrowser||r.nodeType!==1)return Fe();let o=sE(r)||this._document,s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new Te,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let i=Gi(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=Gi(t),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Ad.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Ad.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?gR:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=_i(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Im),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Im)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Un(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Im),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Im),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Am=new WeakMap,Mi=(()=>{class n{_appRef;_injector=M(It);_environmentInjector=M(pn);load(t){let i=this._appRef=this._appRef||this._injector.get(ti),r=Am.get(i);r||(r={loaders:new Set,refs:[]},Am.set(i,r),i.onDestroy(()=>{Am.get(i)?.refs.forEach(o=>o.destroy()),Am.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(tm(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return n})();function ic(n){return Array.isArray(n)?n:[n]}var bR=new Set,Ca,Rm=(()=>{class n{_platform=M(un);_nonce=M(Fl,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):OH}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&NH(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NH(n,e){if(!bR.has(n))try{Ca||(Ca=document.createElement("style"),e&&Ca.setAttribute("nonce",e),Ca.setAttribute("type","text/css"),document.head.appendChild(Ca)),Ca.sheet&&(Ca.sheet.insertRule(`@media ${n} {body{ }}`,0),bR.add(n))}catch(t){console.error(t)}}function OH(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var cE=(()=>{class n{_mediaMatcher=M(Rm);_zone=M(Le);_queries=new Map;_destroySubject=new Te;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return xR(ic(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=xR(ic(t)).map(s=>this._registerQuery(s).observable),o=gl(r);return o=Jo(o.pipe(qn(1)),o.pipe(uu(1),es(0))),o.pipe(Be(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new dt(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Ai(i),Be(({matches:s})=>({query:t,matches:s})),Un(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xR(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var PH=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ER=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({providers:[PH]})}return n})();var SR=new J("liveAnnouncerElement",{providedIn:"root",factory:CR});function CR(){return null}var TR=new J("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),FH=0,dE=(()=>{class n{_ngZone=M(Le);_defaultOptions=M(TR,{optional:!0});_liveElement;_document=M(st);_previousTimeout;_currentPromise;_currentResolve;constructor(){let t=M(SR,{optional:!0});this._liveElement=t||this._createLiveElement()}announce(t,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${FH++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(t)===-1&&o.setAttribute("aria-owns",s+" "+t):o.setAttribute("aria-owns",t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bs=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(bs||{}),wR="cdk-high-contrast-black-on-white",MR="cdk-high-contrast-white-on-black",uE="cdk-high-contrast-active",fE=(()=>{class n{_platform=M(un);_hasCheckedHighContrastMode;_document=M(st);_breakpointSubscription;constructor(){this._breakpointSubscription=M(cE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return bs.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return bs.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return bs.BLACK_ON_WHITE}return bs.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(uE,wR,MR),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===bs.BLACK_ON_WHITE?t.add(uE,wR):i===bs.WHITE_ON_BLACK&&t.add(uE,MR)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hE={},oi=(()=>{class n{_appId=M(_a);getId(t){return this._appId!=="ng"&&(t+=this._appId),hE.hasOwnProperty(t)||(hE[t]=0),`${t}${hE[t]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var LH=200,Nm=class{_letterKeyStream=new Te;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Te;selectedItem=this._selectedItem;constructor(e,t){let i=typeof t?.debounceInterval=="number"?t.debounceInterval:LH;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(hn(t=>this._pressedLetters.push(t)),es(e),Lt(()=>this._pressedLetters.length>0),Be(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function dr(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Om=class{_items;_activeItemIndex=nn(-1);_activeItem=nn(null);_wrap=!1;_typeaheadSubscription=Mt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof cs?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):_o(e)&&(this._effectRef=Vl(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new Te;change=new Te;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new Nm(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||dr(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex()+e*i+t.length)%t.length,o=t[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return _o(this._items)?this._items():this._items instanceof cs?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let i=e.indexOf(t);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var Nd=class extends Om{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}};var RR=" ";function NR(n,e,t){let i=OR(n,e);t=t.trim(),!i.some(r=>r.trim()===t)&&(i.push(t),n.setAttribute(e,i.join(RR)))}function gE(n,e,t){let i=OR(n,e);t=t.trim();let r=i.filter(o=>o!==t);r.length?n.setAttribute(e,r.join(RR)):n.removeAttribute(e)}function OR(n,e){return n.getAttribute(e)?.match(/\S+/g)??[]}var kH=new J("cdk-dir-doc",{providedIn:"root",factory:UH});function UH(){return M(st)}var BH=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function PR(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?BH.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var xs=(()=>{class n{get value(){return this.valueSignal()}valueSignal=nn("ltr");change=new Ve;constructor(){let t=M(kH,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(PR(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Es=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})();var mn=(()=>{class n{constructor(){M(fE)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[Es,Es]})}return n})();var VH=["*"],HH=new J("MAT_ICON_DEFAULT_OPTIONS"),zH=new J("mat-icon-location",{providedIn:"root",factory:jH});function jH(){let n=M(st),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var FR=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],GH=FR.map(n=>`[${n}]`).join(", "),WH=/^url\(['"]?#(.*?)['"]?\)$/,rc=(()=>{class n{_elementRef=M(ft);_iconRegistry=M(dR);_location=M(zH);_errorHandler=M(Zn);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Mt.EMPTY;constructor(){let t=M(new Do("aria-hidden"),{optional:!0}),i=M(HH,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(GH),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)FR.forEach(s=>{let a=i[o],l=a.getAttribute(s),c=l?l.match(WH):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(qn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(yn("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),To(r.color?"mat-"+r.color:""),Ft("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Ot],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:VH,decls:1,vars:0,template:function(i,r){i&1&&(Wn(),kt(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Pm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn,mn]})}return n})();var Ta;function kR(){if(Ta==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ta=!1,Ta;if("scrollBehavior"in document.documentElement.style)Ta=!0;else{let n=Element.prototype.scrollTo;n?Ta=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Ta=!1}}return Ta}function vE(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var oc,UR=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _E(){if(oc)return oc;if(typeof document!="object"||!document)return oc=new Set(UR),oc;let n=document.createElement("input");return oc=new Set(UR.filter(e=>(n.setAttribute("type",e),n.type===e))),oc}var $H=new J("MATERIAL_ANIMATIONS");var BR=null;function qH(){return M($H,{optional:!0})?.animationsDisabled||M(Vu,{optional:!0})==="NoopAnimations"?"di-disabled":(BR??=M(Rm).matchMedia("(prefers-reduced-motion)").matches,BR?"reduced-motion":"enabled")}function Si(){return qH()!=="enabled"}function Cn(n){return n==null?"":typeof n=="string"?n:`${n}px`}function sc(n){return n!=null&&`${n}`!="false"}var fr=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(fr||{}),yE=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=fr.HIDDEN;constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},HR=nc({passive:!0,capture:!0}),bE=class{_events=new Map;addHandler(e,t,i,r){let o=this._events.get(t);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,HR)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let o=r.get(t);o&&(o.delete(i),o.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,HR)))}_delegateEventHandler=e=>{let t=_i(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}},Od={enterDuration:225,exitDuration:150},XH=800,zR=nc({passive:!0,capture:!0}),jR=["mousedown","touchstart"],GR=["mouseup","mouseleave","touchend","touchcancel"],YH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),Pd=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new bE;constructor(e,t,i,r,o){this._target=e,this._ngZone=t,this._platform=r,r.isBrowser&&(this._containerElement=Gi(i)),o&&o.get(Mi).load(YH)}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=$($({},Od),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let s=i.radius||ZH(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${l-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,v=new yE(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",v.state=fr.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let g=null;return!m&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let p=()=>{g&&(g.fallbackTimer=null),clearTimeout(w),this._finishRippleTransition(v)},T=()=>this._destroyRipple(v),w=setTimeout(T,c+100);u.addEventListener("transitionend",p),u.addEventListener("transitioncancel",T),g={onTransitionEnd:p,onTransitionCancel:T,fallbackTimer:w}}),this._activeRipples.set(v,g),(m||!c)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(e.state===fr.FADING_OUT||e.state===fr.HIDDEN)return;let t=e.element,i=$($({},Od),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=fr.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Gi(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,jR.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{GR.forEach(t=>{this._triggerElement.addEventListener(t,this,zR)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===fr.FADING_IN?this._startFadeOutTransition(e):e.state===fr.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=fr.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=fr.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Td(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+XH;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Dd(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===fr.VISIBLE||e.config.terminateOnPointerUp&&e.state===fr.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(jR.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(GR.forEach(t=>e.removeEventListener(t,this,zR)),this._pointerUpEventsRegistered=!1))}};function ZH(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var xE=new J("mat-ripple-global-options"),WR=(()=>{class n{_elementRef=M(ft);_animationsDisabled=Si();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=M(Le),i=M(un),r=M(xE,{optional:!0}),o=M(It);this._globalOptions=r||{},this._rippleRenderer=new Pd(this,t,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:$($($({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,$($({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,$($({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Ft("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var KH={capture:!0},JH=["focus","mousedown","mouseenter","touchstart"],EE="mat-ripple-loader-uninitialized",wE="mat-ripple-loader-class-name",$R="mat-ripple-loader-centered",Fm="mat-ripple-loader-disabled",qR=(()=>{class n{_document=M(st);_animationsDisabled=Si();_globalRippleOptions=M(xE,{optional:!0});_platform=M(un);_ngZone=M(Le);_injector=M(It);_eventCleanups;_hosts=new Map;constructor(){let t=M(An).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>JH.map(i=>t.listen(this._document,i,this._onInteraction,KH)))}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(t,i){t.setAttribute(EE,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(wE))&&t.setAttribute(wE,i.className||""),i.centered&&t.setAttribute($R,""),i.disabled&&t.setAttribute(Fm,"")}setDisabled(t,i){let r=this._hosts.get(t);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(t))):i?t.setAttribute(Fm,""):t.removeAttribute(Fm)}_onInteraction=t=>{let i=_i(t);if(i instanceof HTMLElement){let r=i.closest(`[${EE}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(wE)),t.append(i);let r=this._globalRippleOptions,o=this._animationsDisabled?0:r?.animation?.enterDuration??Od.enterDuration,s=this._animationsDisabled?0:r?.animation?.exitDuration??Od.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||t.hasAttribute(Fm),rippleConfig:{centered:t.hasAttribute($R),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},l=new Pd(a,this._ngZone,i,this._platform,this._injector),c=!a.rippleDisabled;c&&l.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:l,hasSetUpEvents:c}),t.removeAttribute(EE)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ac=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var QH=["mat-icon-button",""],ez=["*"],tz=new J("MAT_BUTTON_CONFIG");function XR(n){return n==null?void 0:Ea(n)}var ME=(()=>{class n{_elementRef=M(ft);_ngZone=M(Le);_animationsDisabled=Si();_config=M(tz,{optional:!0});_focusMonitor=M(Rd);_cleanupClick;_renderer=M(Rn);_rippleLoader=M(qR);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){M(Mi).load(ac);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(yn("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),To(r.color?"mat-"+r.color:""),Ft("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Ot],disabled:[2,"disabled","disabled",Ot],ariaDisabled:[2,"aria-disabled","ariaDisabled",Ot],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ot],tabIndex:[2,"tabIndex","tabIndex",XR],_tabindex:[2,"tabindex","_tabindex",XR]}})}return n})(),Fd=(()=>{class n extends ME{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[_n],attrs:QH,ngContentSelectors:ez,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Wn(),Gn(0,"span",0),kt(1),Gn(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-icon-button-touch-target-display, block);left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var Lm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn,mn]})}return n})();var nz=["matButton",""],iz=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],rz=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var YR=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),ZR=(()=>{class n extends ME{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=oz(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?YR.get(this._appearance):null,o=YR.get(t);r&&i.remove(...r),i.add(...o),this._appearance=t}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[_n],attrs:nz,ngContentSelectors:rz,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Wn(iz),Gn(0,"span",0),kt(1),Vi(2,"span",1),kt(3,1),sr(),kt(4,2),Gn(5,"span",2)(6,"span",3)),i&2&&Ft("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function oz(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var km=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn,Lm,mn]})}return n})();var qg="178";var I1=0,mw=1,A1=2;var gw=1,Fc=2,Qr=3,zo=0,bi=1,Ki=2,Wo=0,Pa=1,vw=2,_w=3,yw=4,R1=5,As=100,N1=101,O1=102,P1=103,F1=104,L1=200,k1=201,U1=202,B1=203,pg=204,mg=205,V1=206,H1=207,z1=208,j1=209,G1=210,W1=211,$1=212,q1=213,X1=214,Xg=0,Yg=1,Zg=2,Fa=3,Kg=4,Jg=5,Qg=6,ev=7,bw=0,Y1=1,Z1=2,$o=0,K1=1,J1=2,Q1=3,eN=4,tN=5,nN=6,iN=7;var tw=300,Wa=301,$a=302,tv=303,nv=304,bf=306,gg=1e3,Is=1001,vg=1002,pr=1003,rN=1004;var xf=1005;var Rr=1006,iv=1007;var Ls=1008;var Pr=1009,xw=1010,Ew=1011,Lc=1012,rv=1013,ks=1014,eo=1015,kc=1016,ov=1017,sv=1018,Uc=1020,ww=35902,Mw=1021,Sw=1022,_r=1023,Ec=1026,Bc=1027,Cw=1028,av=1029,Tw=1030,lv=1031;var cv=1033,Ef=33776,wf=33777,Mf=33778,Sf=33779,uv=35840,dv=35841,fv=35842,hv=35843,pv=36196,mv=37492,gv=37496,vv=37808,_v=37809,yv=37810,bv=37811,xv=37812,Ev=37813,wv=37814,Mv=37815,Sv=37816,Cv=37817,Tv=37818,Dv=37819,Iv=37820,Av=37821,Cf=36492,Rv=36494,Nv=36495,Dw=36283,Ov=36284,Pv=36285,Fv=36286;var $d=2300,_g=2301,dg=2302,nw=2400,iw=2401,rw=2402;var oN=3200,sN=3201;var Iw=0,aN=1,qo="",qi="srgb",La="srgb-linear",qd="linear",Zt="srgb";var Na=7680;var ow=519,lN=512,cN=513,uN=514,Aw=515,dN=516,fN=517,hN=518,pN=519,sw=35044;var Rw="300 es",Yr=2e3,Xd=2001;var jo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},si=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var fg=Math.PI/180,yg=180/Math.PI;function Vc(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(si[n&255]+si[n>>8&255]+si[n>>16&255]+si[n>>24&255]+"-"+si[e&255]+si[e>>8&255]+"-"+si[e>>16&15|64]+si[e>>24&255]+"-"+si[t&63|128]+si[t>>8&255]+"-"+si[t>>16&255]+si[t>>24&255]+si[i&255]+si[i>>8&255]+si[i>>16&255]+si[i>>24&255]).toLowerCase()}function Dt(n,e,t){return Math.max(e,Math.min(t,n))}function sz(n,e){return(n%e+e)%e}function SE(n,e,t){return(1-t)*n+t*e}function Ld(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ci(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var ue=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Dt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Dt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Nr=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3],h=o[s+0],f=o[s+1],m=o[s+2],v=o[s+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=m,e[t+3]=v;return}if(d!==v||l!==h||c!==f||u!==m){let g=1-a,p=l*h+c*f+u*m+d*v,T=p>=0?1:-1,w=1-p*p;if(w>Number.EPSILON){let N=Math.sqrt(w),R=Math.atan2(N,p*T);g=Math.sin(g*R)/N,a=Math.sin(a*R)/N}let y=a*T;if(l=l*g+h*y,c=c*g+f*y,u=u*g+m*y,d=d*g+v*y,g===1-a){let N=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=N,c*=N,u*=N,d*=N}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=o[s],h=o[s+1],f=o[s+2],m=o[s+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(o/2),h=l(i/2),f=l(r/2),m=l(o/2);switch(s){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(o-c)*f,this._z=(s-r)*f}else if(i>a&&i>d){let f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+c)/f}else if(a>d){let f=2*Math.sqrt(1+a-i-d);this._w=(o-c)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(l+u)/f}else{let f=2*Math.sqrt(1+d-i-a);this._w=(s-r)/f,this._x=(o+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Dt(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+s*a+r*c-o*l,this._y=r*u+s*l+o*a-i*c,this._z=o*u+s*c+i*l-r*a,this._w=s*u-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*o+t*this._z,this.normalize(),this}let c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=s*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=o*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},A=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(JR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(JR.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*r-a*i),u=2*(a*t-o*r),d=2*(o*i-s*t);return this.x=t+l*c+s*d-a*u,this.y=i+l*u+a*c-o*d,this.z=r+l*d+o*u-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this.z=Dt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this.z=Dt(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Dt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return CE.copy(this).projectOnVector(e),this.sub(CE)}reflect(e){return this.sub(CE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Dt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},CE=new A,JR=new Nr,yt=class n{constructor(e,t,i,r,o,s,a,l,c){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,c)}set(e,t,i,r,o,s,a,l,c){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=o,u[5]=l,u[6]=i,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],m=i[8],v=r[0],g=r[3],p=r[6],T=r[1],w=r[4],y=r[7],N=r[2],R=r[5],D=r[8];return o[0]=s*v+a*T+l*N,o[3]=s*g+a*w+l*R,o[6]=s*p+a*y+l*D,o[1]=c*v+u*T+d*N,o[4]=c*g+u*w+d*R,o[7]=c*p+u*y+d*D,o[2]=h*v+f*T+m*N,o[5]=h*g+f*w+m*R,o[8]=h*p+f*y+m*D,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*s*u-t*a*c-i*o*u+i*a*l+r*o*c-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=a*l-u*o,f=c*o-s*l,m=t*d+i*h+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/m;return e[0]=d*v,e[1]=(r*c-u*i)*v,e[2]=(a*i-r*s)*v,e[3]=h*v,e[4]=(u*t-r*l)*v,e[5]=(r*o-a*t)*v,e[6]=f*v,e[7]=(i*l-c*t)*v,e[8]=(s*t-i*o)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(TE.makeScale(e,t)),this}rotate(e){return this.premultiply(TE.makeRotation(-e)),this}translate(e,t){return this.premultiply(TE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},TE=new yt;function Nw(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function wc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function mN(){let n=wc("canvas");return n.style.display="block",n}var QR={};function ka(n){n in QR||(QR[n]=!0,console.warn(n))}function gN(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}function vN(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function _N(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var e1=new yt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),t1=new yt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function az(){let n={enabled:!0,workingColorSpace:La,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Zt&&(r.r=Ho(r.r),r.g=Ho(r.g),r.b=Ho(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Zt&&(r.r=xc(r.r),r.g=xc(r.g),r.b=xc(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===qo?qd:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return ka("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return ka("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,o)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[La]:{primaries:e,whitePoint:i,transfer:qd,toXYZ:e1,fromXYZ:t1,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:qi},outputColorSpaceConfig:{drawingBufferColorSpace:qi}},[qi]:{primaries:e,whitePoint:i,transfer:Zt,toXYZ:e1,fromXYZ:t1,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:qi}}}),n}var Bt=az();function Ho(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function xc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var lc,bg=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{lc===void 0&&(lc=wc("canvas")),lc.width=e.width,lc.height=e.height;let r=lc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=lc}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=wc("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Ho(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ho(t[i]/255)*255):t[i]=Ho(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},lz=0,Mc=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lz++}),this.uuid=Vc(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(DE(r[s].image)):o.push(DE(r[s]))}else o=DE(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function DE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?bg.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var cz=0,IE=new A,Fr=(()=>{class n extends jo{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Is,o=Is,s=Rr,a=Ls,l=_r,c=Pr,u=n.DEFAULT_ANISOTROPY,d=qo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cz++}),this.uuid=Vc(),this.name="",this.source=new Mc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ue(0,0),this.repeat=new ue(1,1),this.center=new ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(IE).x}get height(){return this.source.getSize(IE).y}get depth(){return this.source.getSize(IE).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let i in t){let r=t[i];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let o=this[i];if(o===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tw)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case gg:t.x=t.x-Math.floor(t.x);break;case Is:t.x=t.x<0?0:1;break;case vg:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case gg:t.y=t.y-Math.floor(t.y);break;case Is:t.y=t.y<0?0:1;break;case vg:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=tw,n.DEFAULT_ANISOTROPY=1,n})(),Yt=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],v=l[2],g=l[6],p=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-v)<.01&&Math.abs(m-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+v)<.1&&Math.abs(m+g)<.1&&Math.abs(c+f+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let w=(c+1)/2,y=(f+1)/2,N=(p+1)/2,R=(u+h)/4,D=(d+v)/4,P=(m+g)/4;return w>y&&w>N?w<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(w),r=R/i,o=D/i):y>N?y<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),i=R/r,o=P/r):N<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(N),i=D/o,r=P/o),this.set(i,r,o,t),this}let T=Math.sqrt((g-m)*(g-m)+(d-v)*(d-v)+(h-u)*(h-u));return Math.abs(T)<.001&&(T=1),this.x=(g-m)/T,this.y=(d-v)/T,this.z=(h-u)/T,this.w=Math.acos((c+f+p-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Dt(this.x,e.x,t.x),this.y=Dt(this.y,e.y,t.y),this.z=Dt(this.z,e.z,t.z),this.w=Dt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Dt(this.x,e,t),this.y=Dt(this.y,e,t),this.z=Dt(this.z,e,t),this.w=Dt(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Dt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},xg=class extends jo{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Rr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t);let r={width:e,height:t,depth:i.depth},o=new Fr(r);this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let t={minFilter:Rr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new Mc(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Zr=class extends xg{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Yd=class extends Fr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=pr,this.minFilter=pr,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var Eg=class extends Fr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=pr,this.minFilter=pr,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Rs=class{constructor(e=new A(1/0,1/0,1/0),t=new A(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Dr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Dr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Dr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Dr):Dr.fromBufferAttribute(o,s),Dr.applyMatrix4(e.matrixWorld),this.expandByPoint(Dr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Um.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Um.copy(i.boundingBox)),Um.applyMatrix4(e.matrixWorld),this.union(Um)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Dr),Dr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kd),Bm.subVectors(this.max,kd),cc.subVectors(e.a,kd),uc.subVectors(e.b,kd),dc.subVectors(e.c,kd),ws.subVectors(uc,cc),Ms.subVectors(dc,uc),Da.subVectors(cc,dc);let t=[0,-ws.z,ws.y,0,-Ms.z,Ms.y,0,-Da.z,Da.y,ws.z,0,-ws.x,Ms.z,0,-Ms.x,Da.z,0,-Da.x,-ws.y,ws.x,0,-Ms.y,Ms.x,0,-Da.y,Da.x,0];return!AE(t,cc,uc,dc,Bm)||(t=[1,0,0,0,1,0,0,0,1],!AE(t,cc,uc,dc,Bm))?!1:(Vm.crossVectors(ws,Ms),t=[Vm.x,Vm.y,Vm.z],AE(t,cc,uc,dc,Bm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Dr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Po[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Po[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Po[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Po[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Po[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Po[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Po[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Po[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Po),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},Po=[new A,new A,new A,new A,new A,new A,new A,new A],Dr=new A,Um=new Rs,cc=new A,uc=new A,dc=new A,ws=new A,Ms=new A,Da=new A,kd=new A,Bm=new A,Vm=new A,Ia=new A;function AE(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Ia.fromArray(n,o);let a=r.x*Math.abs(Ia.x)+r.y*Math.abs(Ia.y)+r.z*Math.abs(Ia.z),l=e.dot(Ia),c=t.dot(Ia),u=i.dot(Ia);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}var uz=new Rs,Ud=new A,RE=new A,Ua=class{constructor(e=new A,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):uz.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ud.subVectors(e,this.center);let t=Ud.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Ud,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(RE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ud.copy(e.center).add(RE)),this.expandByPoint(Ud.copy(e.center).sub(RE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},Fo=new A,NE=new A,Hm=new A,Ss=new A,OE=new A,zm=new A,PE=new A,Sc=class{constructor(e=new A,t=new A(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Fo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fo.copy(this.origin).addScaledVector(this.direction,t),Fo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){NE.copy(e).add(t).multiplyScalar(.5),Hm.copy(t).sub(e).normalize(),Ss.copy(this.origin).sub(NE);let o=e.distanceTo(t)*.5,s=-this.direction.dot(Hm),a=Ss.dot(this.direction),l=-Ss.dot(Hm),c=Ss.lengthSq(),u=Math.abs(1-s*s),d,h,f,m;if(u>0)if(d=s*l-a,h=s*a-l,m=o*u,d>=0)if(h>=-m)if(h<=m){let v=1/u;d*=v,h*=v,f=d*(d+s*h+2*a)+h*(s*d+h+2*l)+c}else h=o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h=-o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-s*o+a)),h=d>0?-o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(d=Math.max(0,-(s*o+a)),h=d>0?o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c);else h=s>0?-o:o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(NE).addScaledVector(Hm,h),f}intersectSphere(e,t){Fo.subVectors(e.center,this.origin);let i=Fo.dot(this.direction),r=Fo.dot(Fo)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l,c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Fo)!==null}intersectTriangle(e,t,i,r,o){OE.subVectors(t,e),zm.subVectors(i,e),PE.crossVectors(OE,zm);let s=this.direction.dot(PE),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Ss.subVectors(this.origin,e);let l=a*this.direction.dot(zm.crossVectors(Ss,zm));if(l<0)return null;let c=a*this.direction.dot(OE.cross(Ss));if(c<0||l+c>s)return null;let u=-a*Ss.dot(PE);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},rn=class n{constructor(e,t,i,r,o,s,a,l,c,u,d,h,f,m,v,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,l,c,u,d,h,f,m,v,g)}set(e,t,i,r,o,s,a,l,c,u,d,h,f,m,v,g){let p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=r,p[1]=o,p[5]=s,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=d,p[14]=h,p[3]=f,p[7]=m,p[11]=v,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/fc.setFromMatrixColumn(e,0).length(),o=1/fc.setFromMatrixColumn(e,1).length(),s=1/fc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){let h=s*u,f=s*d,m=a*u,v=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-v*c,t[9]=-a*l,t[2]=v-h*c,t[6]=m+f*c,t[10]=s*l}else if(e.order==="YXZ"){let h=l*u,f=l*d,m=c*u,v=c*d;t[0]=h+v*a,t[4]=m*a-f,t[8]=s*c,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=f*a-m,t[6]=v+h*a,t[10]=s*l}else if(e.order==="ZXY"){let h=l*u,f=l*d,m=c*u,v=c*d;t[0]=h-v*a,t[4]=-s*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*u,t[9]=v-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){let h=s*u,f=s*d,m=a*u,v=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+v,t[1]=l*d,t[5]=v*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){let h=s*l,f=s*c,m=a*l,v=a*c;t[0]=l*u,t[4]=v-h*d,t[8]=m*d+f,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-v*d}else if(e.order==="XZY"){let h=s*l,f=s*c,m=a*l,v=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+v,t[5]=s*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=v*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dz,e,fz)}lookAt(e,t,i){let r=this.elements;return Wi.subVectors(e,t),Wi.lengthSq()===0&&(Wi.z=1),Wi.normalize(),Cs.crossVectors(i,Wi),Cs.lengthSq()===0&&(Math.abs(i.z)===1?Wi.x+=1e-4:Wi.z+=1e-4,Wi.normalize(),Cs.crossVectors(i,Wi)),Cs.normalize(),jm.crossVectors(Wi,Cs),r[0]=Cs.x,r[4]=jm.x,r[8]=Wi.x,r[1]=Cs.y,r[5]=jm.y,r[9]=Wi.y,r[2]=Cs.z,r[6]=jm.z,r[10]=Wi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],m=i[2],v=i[6],g=i[10],p=i[14],T=i[3],w=i[7],y=i[11],N=i[15],R=r[0],D=r[4],P=r[8],E=r[12],b=r[1],I=r[5],H=r[9],U=r[13],X=r[2],q=r[6],W=r[10],Q=r[14],z=r[3],pe=r[7],Ee=r[11],Ie=r[15];return o[0]=s*R+a*b+l*X+c*z,o[4]=s*D+a*I+l*q+c*pe,o[8]=s*P+a*H+l*W+c*Ee,o[12]=s*E+a*U+l*Q+c*Ie,o[1]=u*R+d*b+h*X+f*z,o[5]=u*D+d*I+h*q+f*pe,o[9]=u*P+d*H+h*W+f*Ee,o[13]=u*E+d*U+h*Q+f*Ie,o[2]=m*R+v*b+g*X+p*z,o[6]=m*D+v*I+g*q+p*pe,o[10]=m*P+v*H+g*W+p*Ee,o[14]=m*E+v*U+g*Q+p*Ie,o[3]=T*R+w*b+y*X+N*z,o[7]=T*D+w*I+y*q+N*pe,o[11]=T*P+w*H+y*W+N*Ee,o[15]=T*E+w*U+y*Q+N*Ie,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],m=e[3],v=e[7],g=e[11],p=e[15];return m*(+o*l*d-r*c*d-o*a*h+i*c*h+r*a*f-i*l*f)+v*(+t*l*f-t*c*h+o*s*h-r*s*f+r*c*u-o*l*u)+g*(+t*c*d-t*a*f-o*s*d+i*s*f+o*a*u-i*c*u)+p*(-r*a*u-t*l*d+t*a*h+r*s*d-i*s*h+i*l*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],v=e[13],g=e[14],p=e[15],T=d*g*c-v*h*c+v*l*f-a*g*f-d*l*p+a*h*p,w=m*h*c-u*g*c-m*l*f+s*g*f+u*l*p-s*h*p,y=u*v*c-m*d*c+m*a*f-s*v*f-u*a*p+s*d*p,N=m*d*l-u*v*l-m*a*h+s*v*h+u*a*g-s*d*g,R=t*T+i*w+r*y+o*N;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let D=1/R;return e[0]=T*D,e[1]=(v*h*o-d*g*o-v*r*f+i*g*f+d*r*p-i*h*p)*D,e[2]=(a*g*o-v*l*o+v*r*c-i*g*c-a*r*p+i*l*p)*D,e[3]=(d*l*o-a*h*o-d*r*c+i*h*c+a*r*f-i*l*f)*D,e[4]=w*D,e[5]=(u*g*o-m*h*o+m*r*f-t*g*f-u*r*p+t*h*p)*D,e[6]=(m*l*o-s*g*o-m*r*c+t*g*c+s*r*p-t*l*p)*D,e[7]=(s*h*o-u*l*o+u*r*c-t*h*c-s*r*f+t*l*f)*D,e[8]=y*D,e[9]=(m*d*o-u*v*o-m*i*f+t*v*f+u*i*p-t*d*p)*D,e[10]=(s*v*o-m*a*o+m*i*c-t*v*c-s*i*p+t*a*p)*D,e[11]=(u*a*o-s*d*o-u*i*c+t*d*c+s*i*f-t*a*f)*D,e[12]=N*D,e[13]=(u*v*r-m*d*r+m*i*h-t*v*h-u*i*g+t*d*g)*D,e[14]=(m*a*r-s*v*r-m*i*l+t*v*l+s*i*g-t*a*g)*D,e[15]=(s*d*r-u*a*r+u*i*l-t*d*l-s*i*h+t*a*h)*D,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*s,0,c*l-r*a,u*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,u=s+s,d=a+a,h=o*c,f=o*u,m=o*d,v=s*u,g=s*d,p=a*d,T=l*c,w=l*u,y=l*d,N=i.x,R=i.y,D=i.z;return r[0]=(1-(v+p))*N,r[1]=(f+y)*N,r[2]=(m-w)*N,r[3]=0,r[4]=(f-y)*R,r[5]=(1-(h+p))*R,r[6]=(g+T)*R,r[7]=0,r[8]=(m+w)*D,r[9]=(g-T)*D,r[10]=(1-(h+v))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=fc.set(r[0],r[1],r[2]).length(),s=fc.set(r[4],r[5],r[6]).length(),a=fc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Ir.copy(this);let c=1/o,u=1/s,d=1/a;return Ir.elements[0]*=c,Ir.elements[1]*=c,Ir.elements[2]*=c,Ir.elements[4]*=u,Ir.elements[5]*=u,Ir.elements[6]*=u,Ir.elements[8]*=d,Ir.elements[9]*=d,Ir.elements[10]*=d,t.setFromRotationMatrix(Ir),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Yr){let l=this.elements,c=2*o/(t-e),u=2*o/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r),f,m;if(a===Yr)f=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===Xd)f=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Yr){let l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(s-o),h=(t+e)*c,f=(i+r)*u,m,v;if(a===Yr)m=(s+o)*d,v=-2*d;else if(a===Xd)m=o*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},fc=new A,Ir=new rn,dz=new A(0,0,0),fz=new A(1,1,1),Cs=new A,jm=new A,Wi=new A,n1=new rn,i1=new Nr,Tn=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],l=o[8],c=o[1],u=o[5],d=o[9],h=o[2],f=o[6],m=o[10];switch(i){case"XYZ":this._y=Math.asin(Dt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Dt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Dt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Dt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Dt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-Dt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return n1.makeRotationFromQuaternion(t),this.setFromRotationMatrix(n1,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return i1.setFromEuler(this),this.setFromQuaternion(i1,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Cc=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},hz=0,r1=new A,hc=new Nr,Lo=new rn,Gm=new A,Bd=new A,pz=new A,mz=new Nr,o1=new A(1,0,0),s1=new A(0,1,0),a1=new A(0,0,1),l1={type:"added"},gz={type:"removed"},pc={type:"childadded",child:null},FE={type:"childremoved",child:null},mr=(()=>{class n extends jo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hz++}),this.uuid=Vc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new A,i=new Tn,r=new Nr,o=new A(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new rn},normalMatrix:{value:new yt}}),this.matrix=new rn,this.matrixWorld=new rn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Cc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return hc.setFromAxisAngle(t,i),this.quaternion.multiply(hc),this}rotateOnWorldAxis(t,i){return hc.setFromAxisAngle(t,i),this.quaternion.premultiply(hc),this}rotateX(t){return this.rotateOnAxis(o1,t)}rotateY(t){return this.rotateOnAxis(s1,t)}rotateZ(t){return this.rotateOnAxis(a1,t)}translateOnAxis(t,i){return r1.copy(t).applyQuaternion(this.quaternion),this.position.add(r1.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(o1,t)}translateY(t){return this.translateOnAxis(s1,t)}translateZ(t){return this.translateOnAxis(a1,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Lo.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Gm.copy(t):Gm.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Bd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lo.lookAt(Bd,Gm,this.up):Lo.lookAt(Gm,Bd,this.up),this.quaternion.setFromRotationMatrix(Lo),o&&(Lo.extractRotation(o.matrixWorld),hc.setFromRotationMatrix(Lo),this.quaternion.premultiply(hc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(l1),pc.child=t,this.dispatchEvent(pc),pc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(gz),FE.child=t,this.dispatchEvent(FE),FE.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Lo.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Lo.multiply(t.parent.matrixWorld)),t.applyMatrix4(Lo),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(l1),pc.child=t,this.dispatchEvent(pc),pc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bd,t,pz),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bd,mz,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>Ye($({},l),{boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(l=>$({},l)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){let h=c[u];s(t.shapes,h)}else s(t.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(t.materials,this.material[c]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let c=this.animations[l];o.animations.push(s(t.animations,c))}}if(i){let l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),m=a(t.animations),v=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=o,r;function a(l){let c=[];for(let u in l){let d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new A(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ar=new A,ko=new A,LE=new A,Uo=new A,mc=new A,gc=new A,c1=new A,kE=new A,UE=new A,BE=new A,VE=new Yt,HE=new Yt,zE=new Yt,Bo=class n{constructor(e=new A,t=new A,i=new A){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ar.subVectors(e,t),r.cross(Ar);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Ar.subVectors(r,t),ko.subVectors(i,t),LE.subVectors(e,t);let s=Ar.dot(Ar),a=Ar.dot(ko),l=Ar.dot(LE),c=ko.dot(ko),u=ko.dot(LE),d=s*c-a*a;if(d===0)return o.set(0,0,0),null;let h=1/d,f=(c*l-a*u)*h,m=(s*u-a*l)*h;return o.set(1-f-m,m,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Uo)===null?!1:Uo.x>=0&&Uo.y>=0&&Uo.x+Uo.y<=1}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,Uo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Uo.x),l.addScaledVector(s,Uo.y),l.addScaledVector(a,Uo.z),l)}static getInterpolatedAttribute(e,t,i,r,o,s){return VE.setScalar(0),HE.setScalar(0),zE.setScalar(0),VE.fromBufferAttribute(e,t),HE.fromBufferAttribute(e,i),zE.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(VE,o.x),s.addScaledVector(HE,o.y),s.addScaledVector(zE,o.z),s}static isFrontFacing(e,t,i,r){return Ar.subVectors(i,t),ko.subVectors(e,t),Ar.cross(ko).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ar.subVectors(this.c,this.b),ko.subVectors(this.a,this.b),Ar.cross(ko).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;mc.subVectors(r,i),gc.subVectors(o,i),kE.subVectors(e,i);let l=mc.dot(kE),c=gc.dot(kE);if(l<=0&&c<=0)return t.copy(i);UE.subVectors(e,r);let u=mc.dot(UE),d=gc.dot(UE);if(u>=0&&d<=u)return t.copy(r);let h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(i).addScaledVector(mc,s);BE.subVectors(e,o);let f=mc.dot(BE),m=gc.dot(BE);if(m>=0&&f<=m)return t.copy(o);let v=f*c-l*m;if(v<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(gc,a);let g=u*m-f*d;if(g<=0&&d-u>=0&&f-m>=0)return c1.subVectors(o,r),a=(d-u)/(d-u+(f-m)),t.copy(r).addScaledVector(c1,a);let p=1/(g+v+h);return s=v*p,a=h*p,t.copy(i).addScaledVector(mc,s).addScaledVector(gc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},yN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ts={h:0,s:0,l:0},Wm={h:0,s:0,l:0};function jE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var St=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=qi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Bt.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Bt.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Bt.workingColorSpace){if(e=sz(e,1),t=Dt(t,0,1),i=Dt(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=jE(s,o,e+1/3),this.g=jE(s,o,e),this.b=jE(s,o,e-1/3)}return Bt.colorSpaceToWorking(this,r),this}setStyle(e,t=qi){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=qi){let i=yN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ho(e.r),this.g=Ho(e.g),this.b=Ho(e.b),this}copyLinearToSRGB(e){return this.r=xc(e.r),this.g=xc(e.g),this.b=xc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qi){return Bt.workingToColorSpace(ai.copy(this),e),Math.round(Dt(ai.r*255,0,255))*65536+Math.round(Dt(ai.g*255,0,255))*256+Math.round(Dt(ai.b*255,0,255))}getHexString(e=qi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Bt.workingColorSpace){Bt.workingToColorSpace(ai.copy(this),t);let i=ai.r,r=ai.g,o=ai.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,c,u=(a+s)/2;if(a===s)l=0,c=0;else{let d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case i:l=(r-o)/d+(r<o?6:0);break;case r:l=(o-i)/d+2;break;case o:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Bt.workingColorSpace){return Bt.workingToColorSpace(ai.copy(this),t),e.r=ai.r,e.g=ai.g,e.b=ai.b,e}getStyle(e=qi){Bt.workingToColorSpace(ai.copy(this),e);let t=ai.r,i=ai.g,r=ai.b;return e!==qi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ts),this.setHSL(Ts.h+e,Ts.s+t,Ts.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ts),e.getHSL(Wm);let i=SE(Ts.h,Wm.h,t),r=SE(Ts.s,Wm.s,t),o=SE(Ts.l,Wm.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},ai=new St;St.NAMES=yN;var vz=0,Go=class extends jo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vz++}),this.uuid=Vc(),this.name="",this.type="Material",this.blending=Pa,this.side=zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=pg,this.blendDst=mg,this.blendEquation=As,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new St(0,0,0),this.blendAlpha=0,this.depthFunc=Fa,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ow,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Na,this.stencilZFail=Na,this.stencilZPass=Na,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Pa&&(i.blending=this.blending),this.side!==zo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==pg&&(i.blendSrc=this.blendSrc),this.blendDst!==mg&&(i.blendDst=this.blendDst),this.blendEquation!==As&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Fa&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ow&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Na&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Na&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Na&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Tc=class extends Go{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Tn,this.combine=bw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var Nn=new A,$m=new ue,_z=0,Xi=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_z++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=sw,this.updateRanges=[],this.gpuType=eo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)$m.fromBufferAttribute(this,t),$m.applyMatrix3(e),this.setXY(t,$m.x,$m.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyMatrix3(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyMatrix4(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.applyNormalMatrix(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Nn.fromBufferAttribute(this,t),Nn.transformDirection(e),this.setXYZ(t,Nn.x,Nn.y,Nn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ld(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ci(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ld(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ci(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ld(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ci(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ld(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ci(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ld(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ci(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ci(t,this.array),i=Ci(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ci(t,this.array),i=Ci(i,this.array),r=Ci(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=Ci(t,this.array),i=Ci(i,this.array),r=Ci(r,this.array),o=Ci(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==sw&&(e.usage=this.usage),e}};var Zd=class extends Xi{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Kd=class extends Xi{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var gn=class extends Xi{constructor(e,t,i){super(new Float32Array(e),t,i)}},yz=0,hr=new rn,GE=new mr,vc=new A,$i=new Rs,Vd=new Rs,$n=new A,yi=class n extends jo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yz++}),this.uuid=Vc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Nw(e)?Kd:Zd)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new yt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hr.makeRotationFromQuaternion(e),this.applyMatrix4(hr),this}rotateX(e){return hr.makeRotationX(e),this.applyMatrix4(hr),this}rotateY(e){return hr.makeRotationY(e),this.applyMatrix4(hr),this}rotateZ(e){return hr.makeRotationZ(e),this.applyMatrix4(hr),this}translate(e,t,i){return hr.makeTranslation(e,t,i),this.applyMatrix4(hr),this}scale(e,t,i){return hr.makeScale(e,t,i),this.applyMatrix4(hr),this}lookAt(e){return GE.lookAt(e),GE.updateMatrix(),this.applyMatrix4(GE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vc).negate(),this.translate(vc.x,vc.y,vc.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new gn(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Rs);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new A(-1/0,-1/0,-1/0),new A(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];$i.setFromBufferAttribute(o),this.morphTargetsRelative?($n.addVectors(this.boundingBox.min,$i.min),this.boundingBox.expandByPoint($n),$n.addVectors(this.boundingBox.max,$i.max),this.boundingBox.expandByPoint($n)):(this.boundingBox.expandByPoint($i.min),this.boundingBox.expandByPoint($i.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ua);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new A,1/0);return}if(e){let i=this.boundingSphere.center;if($i.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];Vd.setFromBufferAttribute(a),this.morphTargetsRelative?($n.addVectors($i.min,Vd.min),$i.expandByPoint($n),$n.addVectors($i.max,Vd.max),$i.expandByPoint($n)):($i.expandByPoint(Vd.min),$i.expandByPoint(Vd.max))}$i.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)$n.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared($n));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)$n.fromBufferAttribute(a,c),l&&(vc.fromBufferAttribute(e,c),$n.add(vc)),r=Math.max(r,i.distanceToSquared($n))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<i.count;P++)a[P]=new A,l[P]=new A;let c=new A,u=new A,d=new A,h=new ue,f=new ue,m=new ue,v=new A,g=new A;function p(P,E,b){c.fromBufferAttribute(i,P),u.fromBufferAttribute(i,E),d.fromBufferAttribute(i,b),h.fromBufferAttribute(o,P),f.fromBufferAttribute(o,E),m.fromBufferAttribute(o,b),u.sub(c),d.sub(c),f.sub(h),m.sub(h);let I=1/(f.x*m.y-m.x*f.y);isFinite(I)&&(v.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(I),g.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(I),a[P].add(v),a[E].add(v),a[b].add(v),l[P].add(g),l[E].add(g),l[b].add(g))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let P=0,E=T.length;P<E;++P){let b=T[P],I=b.start,H=b.count;for(let U=I,X=I+H;U<X;U+=3)p(e.getX(U+0),e.getX(U+1),e.getX(U+2))}let w=new A,y=new A,N=new A,R=new A;function D(P){N.fromBufferAttribute(r,P),R.copy(N);let E=a[P];w.copy(E),w.sub(N.multiplyScalar(N.dot(E))).normalize(),y.crossVectors(R,E);let I=y.dot(l[P])<0?-1:1;s.setXYZW(P,w.x,w.y,w.z,I)}for(let P=0,E=T.length;P<E;++P){let b=T[P],I=b.start,H=b.count;for(let U=I,X=I+H;U<X;U+=3)D(e.getX(U+0)),D(e.getX(U+1)),D(e.getX(U+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new A,o=new A,s=new A,a=new A,l=new A,c=new A,u=new A,d=new A;if(e)for(let h=0,f=e.count;h<f;h+=3){let m=e.getX(h+0),v=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)$n.fromBufferAttribute(e,t),$n.normalize(),e.setXYZ(t,$n.x,$n.y,$n.z)}toNonIndexed(){function e(a,l){let c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u),f=0,m=0;for(let v=0,g=l.length;v<g;v++){a.isInterleavedBufferAttribute?f=l[v]*a.data.stride+a.offset:f=l[v]*u;for(let p=0;p<u;p++)h[m++]=c[f++]}return new Xi(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],c=e(l,i);t.setAttribute(a,c)}let o=this.morphAttributes;for(let a in o){let l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){let h=c[u],f=e(h,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let c=i[l];e.data.attributes[l]=c.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){let f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(r[l]=u,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let c in r){let u=r[c];this.setAttribute(c,u.clone(t))}let o=e.morphAttributes;for(let c in o){let u=[],d=o[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let c=0,u=s.length;c<u;c++){let d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},u1=new rn,Aa=new Sc,qm=new Ua,d1=new A,Xm=new A,Ym=new A,Zm=new A,WE=new A,Km=new A,f1=new A,Jm=new A,On=class extends mr{constructor(e=new yi,t=new Tc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){Km.set(0,0,0);for(let l=0,c=o.length;l<c;l++){let u=a[l],d=o[l];u!==0&&(WE.fromBufferAttribute(d,e),s?Km.addScaledVector(WE,u):Km.addScaledVector(WE.sub(t),u))}t.add(Km)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),qm.copy(i.boundingSphere),qm.applyMatrix4(o),Aa.copy(e.ray).recast(e.near),!(qm.containsPoint(Aa.origin)===!1&&(Aa.intersectSphere(qm,d1)===null||Aa.origin.distanceToSquared(d1)>(e.far-e.near)**2))&&(u1.copy(o).invert(),Aa.copy(e.ray).applyMatrix4(u1),!(i.boundingBox!==null&&Aa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Aa)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,v=h.length;m<v;m++){let g=h[m],p=s[g.materialIndex],T=Math.max(g.start,f.start),w=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let y=T,N=w;y<N;y+=3){let R=a.getX(y),D=a.getX(y+1),P=a.getX(y+2);r=Qm(this,p,e,i,c,u,d,R,D,P),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let m=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let g=m,p=v;g<p;g+=3){let T=a.getX(g),w=a.getX(g+1),y=a.getX(g+2);r=Qm(this,s,e,i,c,u,d,T,w,y),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,v=h.length;m<v;m++){let g=h[m],p=s[g.materialIndex],T=Math.max(g.start,f.start),w=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let y=T,N=w;y<N;y+=3){let R=y,D=y+1,P=y+2;r=Qm(this,p,e,i,c,u,d,R,D,P),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let m=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let g=m,p=v;g<p;g+=3){let T=g,w=g+1,y=g+2;r=Qm(this,s,e,i,c,u,d,T,w,y),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function bz(n,e,t,i,r,o,s,a){let l;if(e.side===bi?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===zo,a),l===null)return null;Jm.copy(a),Jm.applyMatrix4(n.matrixWorld);let c=t.ray.origin.distanceTo(Jm);return c<t.near||c>t.far?null:{distance:c,point:Jm.clone(),object:n}}function Qm(n,e,t,i,r,o,s,a,l,c){n.getVertexPosition(a,Xm),n.getVertexPosition(l,Ym),n.getVertexPosition(c,Zm);let u=bz(n,e,t,i,Xm,Ym,Zm,f1);if(u){let d=new A;Bo.getBarycoord(f1,Xm,Ym,Zm,d),r&&(u.uv=Bo.getInterpolatedAttribute(r,a,l,c,d,new ue)),o&&(u.uv1=Bo.getInterpolatedAttribute(o,a,l,c,d,new ue)),s&&(u.normal=Bo.getInterpolatedAttribute(s,a,l,c,d,new A),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:l,c,normal:new A,materialIndex:0};Bo.getNormal(Xm,Ym,Zm,h.normal),u.face=h,u.barycoord=d}return u}var Kr=class n extends yi{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],c=[],u=[],d=[],h=0,f=0;m("z","y","x",-1,-1,i,t,e,s,o,0),m("z","y","x",1,-1,i,t,-e,s,o,1),m("x","z","y",1,1,e,i,t,r,s,2),m("x","z","y",1,-1,e,i,-t,r,s,3),m("x","y","z",1,-1,e,t,i,r,o,4),m("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new gn(c,3)),this.setAttribute("normal",new gn(u,3)),this.setAttribute("uv",new gn(d,2));function m(v,g,p,T,w,y,N,R,D,P,E){let b=y/D,I=N/P,H=y/2,U=N/2,X=R/2,q=D+1,W=P+1,Q=0,z=0,pe=new A;for(let Ee=0;Ee<W;Ee++){let Ie=Ee*I-U;for(let _t=0;_t<q;_t++){let Pt=_t*b-H;pe[v]=Pt*T,pe[g]=Ie*w,pe[p]=X,c.push(pe.x,pe.y,pe.z),pe[v]=0,pe[g]=0,pe[p]=R>0?1:-1,u.push(pe.x,pe.y,pe.z),d.push(_t/D),d.push(1-Ee/P),Q+=1}}for(let Ee=0;Ee<P;Ee++)for(let Ie=0;Ie<D;Ie++){let _t=h+Ie+q*Ee,Pt=h+Ie+q*(Ee+1),Y=h+(Ie+1)+q*(Ee+1),de=h+(Ie+1)+q*Ee;l.push(_t,Pt,de),l.push(Pt,Y,de),z+=6}a.addGroup(f,z,E),f+=z,h+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function qa(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function li(n){let e={};for(let t=0;t<n.length;t++){let i=qa(n[t]);for(let r in i)e[r]=i[r]}return e}function xz(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Ow(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Bt.workingColorSpace}var bN={clone:qa,merge:li},Ez=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Or=class extends Go{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ez,this.fragmentShader=wz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qa(e.uniforms),this.uniformsGroups=xz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Jd=class extends mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rn,this.projectionMatrix=new rn,this.projectionMatrixInverse=new rn,this.coordinateSystem=Yr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ds=new A,h1=new ue,p1=new ue,Hn=class extends Jd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=yg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(fg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return yg*2*Math.atan(Math.tan(fg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ds.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ds.x,Ds.y).multiplyScalar(-e/Ds.z),Ds.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ds.x,Ds.y).multiplyScalar(-e/Ds.z)}getViewSize(e,t){return this.getViewBounds(e,h1,p1),t.subVectors(p1,h1)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(fg*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},_c=-90,yc=1,wg=class extends mr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Hn(_c,yc,e,t);r.layers=this.layers,this.add(r);let o=new Hn(_c,yc,e,t);o.layers=this.layers,this.add(o);let s=new Hn(_c,yc,e,t);s.layers=this.layers,this.add(s);let a=new Hn(_c,yc,e,t);a.layers=this.layers,this.add(a);let l=new Hn(_c,yc,e,t);l.layers=this.layers,this.add(l);let c=new Hn(_c,yc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(let c of t)this.remove(c);if(e===Yr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;let v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}},Qd=class extends Fr{constructor(e=[],t=Wa,i,r,o,s,a,l,c,u){super(e,t,i,r,o,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Mg=class extends Zr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Qd(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Kr(5,5,5),o=new Or({name:"CubemapFromEquirect",uniforms:qa(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:bi,blending:Wo});o.uniforms.tEquirect.value=t;let s=new On(r,o),a=t.minFilter;return t.minFilter===Ls&&(t.minFilter=Rr),new wg(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},Vo=class extends mr{constructor(){super(),this.isGroup=!0,this.type="Group"}},Mz={type:"move"},Dc=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Vo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Vo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new A,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new A),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Vo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new A,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new A),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(let v of e.hand.values()){let g=t.getJointPose(v,i),p=this._getHandJoint(c,v);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}let u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Mz)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Vo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var Ba=class extends mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Tn,this.environmentIntensity=1,this.environmentRotation=new Tn,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var $E=new A,Sz=new A,Cz=new yt,Xr=class{constructor(e=new A(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=$E.subVectors(i,t).cross(Sz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta($E),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||Cz.getNormalMatrix(e),r=this.coplanarPoint($E).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Ra=new Ua,Tz=new ue(.5,.5),eg=new A,Ic=class{constructor(e=new Xr,t=new Xr,i=new Xr,r=new Xr,o=new Xr,s=new Xr){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Yr){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],h=r[7],f=r[8],m=r[9],v=r[10],g=r[11],p=r[12],T=r[13],w=r[14],y=r[15];if(i[0].setComponents(l-o,h-c,g-f,y-p).normalize(),i[1].setComponents(l+o,h+c,g+f,y+p).normalize(),i[2].setComponents(l+s,h+u,g+m,y+T).normalize(),i[3].setComponents(l-s,h-u,g-m,y-T).normalize(),i[4].setComponents(l-a,h-d,g-v,y-w).normalize(),t===Yr)i[5].setComponents(l+a,h+d,g+v,y+w).normalize();else if(t===Xd)i[5].setComponents(a,d,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ra.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ra.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ra)}intersectsSprite(e){Ra.center.set(0,0,0);let t=Tz.distanceTo(e.center);return Ra.radius=.7071067811865476+t,Ra.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ra)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(eg.x=r.normal.x>0?e.max.x:e.min.x,eg.y=r.normal.y>0?e.max.y:e.min.y,eg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(eg)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Jr=class extends Go{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Sg=new A,Cg=new A,m1=new rn,Hd=new Sc,tg=new Ua,qE=new A,g1=new A,ef=class extends mr{constructor(e=new yi,t=new Jr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)Sg.fromBufferAttribute(t,r-1),Cg.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Sg.distanceTo(Cg);e.setAttribute("lineDistance",new gn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),tg.copy(i.boundingSphere),tg.applyMatrix4(r),tg.radius+=o,e.ray.intersectsSphere(tg)===!1)return;m1.copy(r).invert(),Hd.copy(e.ray).applyMatrix4(m1);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){let f=Math.max(0,s.start),m=Math.min(u.count,s.start+s.count);for(let v=f,g=m-1;v<g;v+=c){let p=u.getX(v),T=u.getX(v+1),w=ng(this,e,Hd,l,p,T,v);w&&t.push(w)}if(this.isLineLoop){let v=u.getX(m-1),g=u.getX(f),p=ng(this,e,Hd,l,v,g,m-1);p&&t.push(p)}}else{let f=Math.max(0,s.start),m=Math.min(h.count,s.start+s.count);for(let v=f,g=m-1;v<g;v+=c){let p=ng(this,e,Hd,l,v,v+1,v);p&&t.push(p)}if(this.isLineLoop){let v=ng(this,e,Hd,l,m-1,f,m-1);v&&t.push(v)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function ng(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(Sg.fromBufferAttribute(a,r),Cg.fromBufferAttribute(a,o),t.distanceSqToSegment(Sg,Cg,qE,g1)>i)return;qE.applyMatrix4(n.matrixWorld);let c=e.ray.origin.distanceTo(qE);if(!(c<e.near||c>e.far))return{distance:c,point:g1.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var v1=new A,_1=new A,Ns=class extends ef{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)v1.fromBufferAttribute(t,r),_1.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+v1.distanceTo(_1);e.setAttribute("lineDistance",new gn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var tf=class extends Fr{constructor(e,t,i=ks,r,o,s,a=pr,l=pr,c,u=Ec,d=1){if(u!==Ec&&u!==Bc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:e,height:t,depth:d};super(h,r,o,s,a,l,u,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Mc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var Ac=class n extends yi{constructor(e=1,t=1,i=1,r=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};let c=this;r=Math.floor(r),o=Math.floor(o);let u=[],d=[],h=[],f=[],m=0,v=[],g=i/2,p=0;T(),s===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new gn(d,3)),this.setAttribute("normal",new gn(h,3)),this.setAttribute("uv",new gn(f,2));function T(){let y=new A,N=new A,R=0,D=(t-e)/i;for(let P=0;P<=o;P++){let E=[],b=P/o,I=b*(t-e)+e;for(let H=0;H<=r;H++){let U=H/r,X=U*l+a,q=Math.sin(X),W=Math.cos(X);N.x=I*q,N.y=-b*i+g,N.z=I*W,d.push(N.x,N.y,N.z),y.set(q,D,W).normalize(),h.push(y.x,y.y,y.z),f.push(U,1-b),E.push(m++)}v.push(E)}for(let P=0;P<r;P++)for(let E=0;E<o;E++){let b=v[E][P],I=v[E+1][P],H=v[E+1][P+1],U=v[E][P+1];(e>0||E!==0)&&(u.push(b,I,U),R+=3),(t>0||E!==o-1)&&(u.push(I,H,U),R+=3)}c.addGroup(p,R,0),p+=R}function w(y){let N=m,R=new ue,D=new A,P=0,E=y===!0?e:t,b=y===!0?1:-1;for(let H=1;H<=r;H++)d.push(0,g*b,0),h.push(0,b,0),f.push(.5,.5),m++;let I=m;for(let H=0;H<=r;H++){let X=H/r*l+a,q=Math.cos(X),W=Math.sin(X);D.x=E*W,D.y=g*b,D.z=E*q,d.push(D.x,D.y,D.z),h.push(0,b,0),R.x=q*.5+.5,R.y=W*.5*b+.5,f.push(R.x,R.y),m++}for(let H=0;H<r;H++){let U=N+H,X=I+H;y===!0?u.push(X,X+1,U):u.push(X+1,X,U),P+=3}c.addGroup(p,P,y===!0?1:2),p+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Tg=class n extends Ac{constructor(e=1,t=1,i=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};var ig=new A,rg=new A,XE=new A,og=new Bo,Va=class extends yi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){let r=Math.pow(10,4),o=Math.cos(fg*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},f=[];for(let m=0;m<l;m+=3){s?(c[0]=s.getX(m),c[1]=s.getX(m+1),c[2]=s.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);let{a:v,b:g,c:p}=og;if(v.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),p.fromBufferAttribute(a,c[2]),og.getNormal(XE),d[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,d[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,d[2]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let T=0;T<3;T++){let w=(T+1)%3,y=d[T],N=d[w],R=og[u[T]],D=og[u[w]],P=`${y}_${N}`,E=`${N}_${y}`;E in h&&h[E]?(XE.dot(h[E].normal)<=o&&(f.push(R.x,R.y,R.z),f.push(D.x,D.y,D.z)),h[E]=null):P in h||(h[P]={index0:c[T],index1:c[w],normal:XE.clone()})}}for(let m in h)if(h[m]){let{index0:v,index1:g}=h[m];ig.fromBufferAttribute(a,v),rg.fromBufferAttribute(a,g),f.push(ig.x,ig.y,ig.z),f.push(rg.x,rg.y,rg.z)}this.setAttribute("position",new gn(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},Yi=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let i=this.getLengths(),r=0,o=i.length,s;t?s=t:s=e*i[o-1];let a=0,l=o-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-s,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let u=i[r],h=i[r+1]-u,f=(s-u)/h;return(r+f)/(o-1)}getTangent(e,t){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new ue:new A);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){let i=new A,r=[],o=[],s=[],a=new A,l=new rn;for(let f=0;f<=e;f++){let m=f/e;r[f]=this.getTangentAt(m,new A)}o[0]=new A,s[0]=new A;let c=Number.MAX_VALUE,u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Dt(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(a,m))}s[f].crossVectors(r[f],o[f])}if(t===!0){let f=Math.acos(Dt(o[0].dot(o[e]),-1,1));f/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let m=1;m<=e;m++)o[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),s[m].crossVectors(r[m],o[m])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Rc=class extends Yi{constructor(e=0,t=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ue){let i=t,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Dg=class extends Rc{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function Pw(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let h=(s-o)/c-(a-o)/(c+u)+(a-s)/u,f=(a-s)/u-(l-s)/(u+d)+(l-a)/d;h*=u,f*=u,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+i*a}}}var sg=new A,YE=new Pw,ZE=new Pw,KE=new Pw,Ig=class extends Yi{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new A){let i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%o]:(sg.subVectors(r[0],r[1]).add(r[0]),c=sg);let d=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?u=r[(a+2)%o]:(sg.subVectors(r[o-1],r[o-2]).add(r[o-1]),u=sg),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,m=Math.pow(c.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(u),f);v<1e-4&&(v=1),m<1e-4&&(m=v),g<1e-4&&(g=v),YE.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,v,g),ZE.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,v,g),KE.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,v,g)}else this.curveType==="catmullrom"&&(YE.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),ZE.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),KE.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(YE.calc(l),ZE.calc(l),KE.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new A().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function y1(n,e,t,i,r){let o=(i-e)*.5,s=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}function Dz(n,e){let t=1-n;return t*t*e}function Iz(n,e){return 2*(1-n)*n*e}function Az(n,e){return n*n*e}function Gd(n,e,t,i){return Dz(n,e)+Iz(n,t)+Az(n,i)}function Rz(n,e){let t=1-n;return t*t*t*e}function Nz(n,e){let t=1-n;return 3*t*t*n*e}function Oz(n,e){return 3*(1-n)*n*n*e}function Pz(n,e){return n*n*n*e}function Wd(n,e,t,i,r){return Rz(n,e)+Nz(n,t)+Oz(n,i)+Pz(n,r)}var nf=class extends Yi{constructor(e=new ue,t=new ue,i=new ue,r=new ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ue){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Wd(e,r.x,o.x,s.x,a.x),Wd(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ag=class extends Yi{constructor(e=new A,t=new A,i=new A,r=new A){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new A){let i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Wd(e,r.x,o.x,s.x,a.x),Wd(e,r.y,o.y,s.y,a.y),Wd(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},rf=class extends Yi{constructor(e=new ue,t=new ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ue){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Rg=class extends Yi{constructor(e=new A,t=new A){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new A){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new A){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},of=class extends Yi{constructor(e=new ue,t=new ue,i=new ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ue){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Gd(e,r.x,o.x,s.x),Gd(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ng=class extends Yi{constructor(e=new A,t=new A,i=new A){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new A){let i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(Gd(e,r.x,o.x,s.x),Gd(e,r.y,o.y,s.y),Gd(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},sf=class extends Yi{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ue){let i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],c=r[s],u=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(y1(a,l.x,c.x,u.x,d.x),y1(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new ue().fromArray(r))}return this}},aw=Object.freeze({__proto__:null,ArcCurve:Dg,CatmullRomCurve3:Ig,CubicBezierCurve:nf,CubicBezierCurve3:Ag,EllipseCurve:Rc,LineCurve:rf,LineCurve3:Rg,QuadraticBezierCurve:of,QuadraticBezierCurve3:Ng,SplineCurve:sf}),Og=class extends Yi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new aw[i](t,e))}return this}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){let u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new aw[r.type]().fromJSON(r))}return this}},af=class extends Og{constructor(e){super(),this.type="Path",this.currentPoint=new ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new rf(this.currentPoint.clone(),new ue(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let o=new of(this.currentPoint.clone(),new ue(e,t),new ue(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){let a=new nf(this.currentPoint.clone(),new ue(e,t),new ue(i,r),new ue(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new sf(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){let c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){let c=new Rc(e,t,i,r,o,s,a,l);if(this.curves.length>0){let d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);let u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Nc=class extends af{constructor(e){super(e),this.uuid=Vc(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new af().fromJSON(r))}return this}};function Fz(n,e,t=2){let i=e&&e.length,r=i?e[0]*t:n.length,o=xN(n,0,r,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(i&&(o=Vz(n,e,o,t)),n.length>80*t){a=1/0,l=1/0;let u=-1/0,d=-1/0;for(let h=t;h<r;h+=t){let f=n[h],m=n[h+1];f<a&&(a=f),m<l&&(l=m),f>u&&(u=f),m>d&&(d=m)}c=Math.max(u-a,d-l),c=c!==0?32767/c:0}return lf(o,s,t,a,l,c,0),s}function xN(n,e,t,i,r){let o;if(r===Kz(n,e,t,i)>0)for(let s=e;s<t;s+=i)o=b1(s/i|0,n[s],n[s+1],o);else for(let s=t-i;s>=e;s-=i)o=b1(s/i|0,n[s],n[s+1],o);return o&&Oc(o,o.next)&&(uf(o),o=o.next),o}function Ha(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Oc(t,t.next)||xn(t.prev,t,t.next)===0)){if(uf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function lf(n,e,t,i,r,o,s){if(!n)return;!s&&o&&Wz(n,i,r,o);let a=n;for(;n.prev!==n.next;){let l=n.prev,c=n.next;if(o?kz(n,i,r,o):Lz(n)){e.push(l.i,n.i,c.i),uf(n),n=c.next,a=c.next;continue}if(n=c,n===a){s?s===1?(n=Uz(Ha(n),e),lf(n,e,t,i,r,o,2)):s===2&&Bz(n,e,t,i,r,o):lf(Ha(n),e,t,i,r,o,1);break}}}function Lz(n){let e=n.prev,t=n,i=n.next;if(xn(e,t,i)>=0)return!1;let r=e.x,o=t.x,s=i.x,a=e.y,l=t.y,c=i.y,u=Math.min(r,o,s),d=Math.min(a,l,c),h=Math.max(r,o,s),f=Math.max(a,l,c),m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=f&&jd(r,a,o,l,s,c,m.x,m.y)&&xn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function kz(n,e,t,i){let r=n.prev,o=n,s=n.next;if(xn(r,o,s)>=0)return!1;let a=r.x,l=o.x,c=s.x,u=r.y,d=o.y,h=s.y,f=Math.min(a,l,c),m=Math.min(u,d,h),v=Math.max(a,l,c),g=Math.max(u,d,h),p=lw(f,m,e,t,i),T=lw(v,g,e,t,i),w=n.prevZ,y=n.nextZ;for(;w&&w.z>=p&&y&&y.z<=T;){if(w.x>=f&&w.x<=v&&w.y>=m&&w.y<=g&&w!==r&&w!==s&&jd(a,u,l,d,c,h,w.x,w.y)&&xn(w.prev,w,w.next)>=0||(w=w.prevZ,y.x>=f&&y.x<=v&&y.y>=m&&y.y<=g&&y!==r&&y!==s&&jd(a,u,l,d,c,h,y.x,y.y)&&xn(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;w&&w.z>=p;){if(w.x>=f&&w.x<=v&&w.y>=m&&w.y<=g&&w!==r&&w!==s&&jd(a,u,l,d,c,h,w.x,w.y)&&xn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;y&&y.z<=T;){if(y.x>=f&&y.x<=v&&y.y>=m&&y.y<=g&&y!==r&&y!==s&&jd(a,u,l,d,c,h,y.x,y.y)&&xn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function Uz(n,e){let t=n;do{let i=t.prev,r=t.next.next;!Oc(i,r)&&wN(i,t,t.next,r)&&cf(i,r)&&cf(r,i)&&(e.push(i.i,t.i,r.i),uf(t),uf(t.next),t=n=r),t=t.next}while(t!==n);return Ha(t)}function Bz(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Xz(s,a)){let l=MN(s,a);s=Ha(s,s.next),l=Ha(l,l.next),lf(s,e,t,i,r,o,0),lf(l,e,t,i,r,o,0);return}a=a.next}s=s.next}while(s!==n)}function Vz(n,e,t,i){let r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,c=xN(n,a,l,i,!1);c===c.next&&(c.steiner=!0),r.push(qz(c))}r.sort(Hz);for(let o=0;o<r.length;o++)t=zz(r[o],t);return t}function Hz(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function zz(n,e){let t=jz(n,e);if(!t)return e;let i=MN(t,n);return Ha(i,i.next),Ha(t,t.next)}function jz(n,e){let t=e,i=n.x,r=n.y,o=-1/0,s;if(Oc(n,t))return t;do{if(Oc(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){let d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>o&&(o=d,s=t.x<t.next.x?t:t.next,d===i))return s}t=t.next}while(t!==e);if(!s)return null;let a=s,l=s.x,c=s.y,u=1/0;t=s;do{if(i>=t.x&&t.x>=l&&i!==t.x&&EN(r<c?i:o,r,l,c,r<c?o:i,r,t.x,t.y)){let d=Math.abs(r-t.y)/(i-t.x);cf(t,n)&&(d<u||d===u&&(t.x>s.x||t.x===s.x&&Gz(s,t)))&&(s=t,u=d)}t=t.next}while(t!==a);return s}function Gz(n,e){return xn(n.prev,n,e.prev)<0&&xn(e.next,n,n.next)<0}function Wz(n,e,t,i){let r=n;do r.z===0&&(r.z=lw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,$z(r)}function $z(n){let e,t=1;do{let i=n,r;n=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let c=0;c<t&&(a++,s=s.nextZ,!!s);c++);let l=t;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;i=s}o.nextZ=null,t*=2}while(e>1);return n}function lw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function qz(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function EN(n,e,t,i,r,o,s,a){return(r-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(r-s)*(i-a)}function jd(n,e,t,i,r,o,s,a){return!(n===s&&e===a)&&EN(n,e,t,i,r,o,s,a)}function Xz(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Yz(n,e)&&(cf(n,e)&&cf(e,n)&&Zz(n,e)&&(xn(n.prev,n,e.prev)||xn(n,e.prev,e))||Oc(n,e)&&xn(n.prev,n,n.next)>0&&xn(e.prev,e,e.next)>0)}function xn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Oc(n,e){return n.x===e.x&&n.y===e.y}function wN(n,e,t,i){let r=lg(xn(n,e,t)),o=lg(xn(n,e,i)),s=lg(xn(t,i,n)),a=lg(xn(t,i,e));return!!(r!==o&&s!==a||r===0&&ag(n,t,e)||o===0&&ag(n,i,e)||s===0&&ag(t,n,i)||a===0&&ag(t,e,i))}function ag(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function lg(n){return n>0?1:n<0?-1:0}function Yz(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&wN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function cf(n,e){return xn(n.prev,n,n.next)<0?xn(n,e,n.next)>=0&&xn(n,n.prev,e)>=0:xn(n,e,n.prev)<0||xn(n,n.next,e)<0}function Zz(n,e){let t=n,i=!1,r=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function MN(n,e){let t=cw(n.i,n.x,n.y),i=cw(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function b1(n,e,t,i){let r=cw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function uf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cw(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Kz(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}var uw=class{static triangulate(e,t,i=2){return Fz(e,t,i)}},Oa=class n{static area(e){let t=e.length,i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let i=[],r=[],o=[];x1(e),E1(i,e);let s=e.length;t.forEach(x1);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,E1(i,t[l]);let a=uw.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function x1(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function E1(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var df=class n extends yi{constructor(e=new Nc([new ue(.5,.5),new ue(-.5,.5),new ue(-.5,-.5),new ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let i=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++){let c=e[a];s(c)}this.setAttribute("position",new gn(r,3)),this.setAttribute("uv",new gn(o,2)),this.computeVertexNormals();function s(a){let l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:f-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3,p=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:Jz,w,y=!1,N,R,D,P;p&&(w=p.getSpacedPoints(u),y=!0,h=!1,N=p.computeFrenetFrames(u,!1),R=new A,D=new A,P=new A),h||(g=0,f=0,m=0,v=0);let E=a.extractPoints(c),b=E.shape,I=E.holes;if(!Oa.isClockWise(b)){b=b.reverse();for(let S=0,fe=I.length;S<fe;S++){let ie=I[S];Oa.isClockWise(ie)&&(I[S]=ie.reverse())}}function U(S){let ie=10000000000000001e-36,he=S[0];for(let Z=1;Z<=S.length;Z++){let we=Z%S.length,oe=S[we],Me=oe.x-he.x,pt=oe.y-he.y,C=Me*Me+pt*pt,_=Math.max(Math.abs(oe.x),Math.abs(oe.y),Math.abs(he.x),Math.abs(he.y)),k=ie*_*_;if(C<=k){S.splice(we,1),Z--;continue}he=oe}}U(b),I.forEach(U);let X=I.length,q=b;for(let S=0;S<X;S++){let fe=I[S];b=b.concat(fe)}function W(S,fe,ie){return fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),S.clone().addScaledVector(fe,ie)}let Q=b.length;function z(S,fe,ie){let he,Z,we,oe=S.x-fe.x,Me=S.y-fe.y,pt=ie.x-S.x,C=ie.y-S.y,_=oe*oe+Me*Me,k=oe*C-Me*pt;if(Math.abs(k)>Number.EPSILON){let j=Math.sqrt(_),ee=Math.sqrt(pt*pt+C*C),G=fe.x-Me/j,Oe=fe.y+oe/j,me=ie.x-C/ee,Ae=ie.y+pt/ee,Pe=((me-G)*C-(Ae-Oe)*pt)/(oe*C-Me*pt);he=G+oe*Pe-S.x,Z=Oe+Me*Pe-S.y;let te=he*he+Z*Z;if(te<=2)return new ue(he,Z);we=Math.sqrt(te/2)}else{let j=!1;oe>Number.EPSILON?pt>Number.EPSILON&&(j=!0):oe<-Number.EPSILON?pt<-Number.EPSILON&&(j=!0):Math.sign(Me)===Math.sign(C)&&(j=!0),j?(he=-Me,Z=oe,we=Math.sqrt(_)):(he=oe,Z=Me,we=Math.sqrt(_/2))}return new ue(he/we,Z/we)}let pe=[];for(let S=0,fe=q.length,ie=fe-1,he=S+1;S<fe;S++,ie++,he++)ie===fe&&(ie=0),he===fe&&(he=0),pe[S]=z(q[S],q[ie],q[he]);let Ee=[],Ie,_t=pe.concat();for(let S=0,fe=X;S<fe;S++){let ie=I[S];Ie=[];for(let he=0,Z=ie.length,we=Z-1,oe=he+1;he<Z;he++,we++,oe++)we===Z&&(we=0),oe===Z&&(oe=0),Ie[he]=z(ie[he],ie[we],ie[oe]);Ee.push(Ie),_t=_t.concat(Ie)}let Pt;if(g===0)Pt=Oa.triangulateShape(q,I);else{let S=[],fe=[];for(let ie=0;ie<g;ie++){let he=ie/g,Z=f*Math.cos(he*Math.PI/2),we=m*Math.sin(he*Math.PI/2)+v;for(let oe=0,Me=q.length;oe<Me;oe++){let pt=W(q[oe],pe[oe],we);bt(pt.x,pt.y,-Z),he===0&&S.push(pt)}for(let oe=0,Me=X;oe<Me;oe++){let pt=I[oe];Ie=Ee[oe];let C=[];for(let _=0,k=pt.length;_<k;_++){let j=W(pt[_],Ie[_],we);bt(j.x,j.y,-Z),he===0&&C.push(j)}he===0&&fe.push(C)}}Pt=Oa.triangulateShape(S,fe)}let Y=Pt.length,de=m+v;for(let S=0;S<Q;S++){let fe=h?W(b[S],_t[S],de):b[S];y?(D.copy(N.normals[0]).multiplyScalar(fe.x),R.copy(N.binormals[0]).multiplyScalar(fe.y),P.copy(w[0]).add(D).add(R),bt(P.x,P.y,P.z)):bt(fe.x,fe.y,0)}for(let S=1;S<=u;S++)for(let fe=0;fe<Q;fe++){let ie=h?W(b[fe],_t[fe],de):b[fe];y?(D.copy(N.normals[S]).multiplyScalar(ie.x),R.copy(N.binormals[S]).multiplyScalar(ie.y),P.copy(w[S]).add(D).add(R),bt(P.x,P.y,P.z)):bt(ie.x,ie.y,d/u*S)}for(let S=g-1;S>=0;S--){let fe=S/g,ie=f*Math.cos(fe*Math.PI/2),he=m*Math.sin(fe*Math.PI/2)+v;for(let Z=0,we=q.length;Z<we;Z++){let oe=W(q[Z],pe[Z],he);bt(oe.x,oe.y,d+ie)}for(let Z=0,we=I.length;Z<we;Z++){let oe=I[Z];Ie=Ee[Z];for(let Me=0,pt=oe.length;Me<pt;Me++){let C=W(oe[Me],Ie[Me],he);y?bt(C.x,C.y+w[u-1].y,w[u-1].x+ie):bt(C.x,C.y,d+ie)}}}ke(),xe();function ke(){let S=r.length/3;if(h){let fe=0,ie=Q*fe;for(let he=0;he<Y;he++){let Z=Pt[he];je(Z[2]+ie,Z[1]+ie,Z[0]+ie)}fe=u+g*2,ie=Q*fe;for(let he=0;he<Y;he++){let Z=Pt[he];je(Z[0]+ie,Z[1]+ie,Z[2]+ie)}}else{for(let fe=0;fe<Y;fe++){let ie=Pt[fe];je(ie[2],ie[1],ie[0])}for(let fe=0;fe<Y;fe++){let ie=Pt[fe];je(ie[0]+Q*u,ie[1]+Q*u,ie[2]+Q*u)}}i.addGroup(S,r.length/3-S,0)}function xe(){let S=r.length/3,fe=0;Ue(q,fe),fe+=q.length;for(let ie=0,he=I.length;ie<he;ie++){let Z=I[ie];Ue(Z,fe),fe+=Z.length}i.addGroup(S,r.length/3-S,1)}function Ue(S,fe){let ie=S.length;for(;--ie>=0;){let he=ie,Z=ie-1;Z<0&&(Z=S.length-1);for(let we=0,oe=u+g*2;we<oe;we++){let Me=Q*we,pt=Q*(we+1),C=fe+he+Me,_=fe+Z+Me,k=fe+Z+pt,j=fe+he+pt;sn(C,_,k,j)}}}function bt(S,fe,ie){l.push(S),l.push(fe),l.push(ie)}function je(S,fe,ie){Ut(S),Ut(fe),Ut(ie);let he=r.length/3,Z=T.generateTopUV(i,r,he-3,he-2,he-1);xt(Z[0]),xt(Z[1]),xt(Z[2])}function sn(S,fe,ie,he){Ut(S),Ut(fe),Ut(he),Ut(fe),Ut(ie),Ut(he);let Z=r.length/3,we=T.generateSideWallUV(i,r,Z-6,Z-3,Z-2,Z-1);xt(we[0]),xt(we[1]),xt(we[3]),xt(we[1]),xt(we[2]),xt(we[3])}function Ut(S){r.push(l[S*3+0]),r.push(l[S*3+1]),r.push(l[S*3+2])}function xt(S){o.push(S.x),o.push(S.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Qz(t,i,e)}static fromJSON(e,t){let i=[];for(let o=0,s=e.shapes.length;o<s;o++){let a=t[e.shapes[o]];i.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new aw[r.type]().fromJSON(r)),new n(i,e.options)}},Jz={generateTopUV:function(n,e,t,i,r){let o=e[t*3],s=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new ue(o,s),new ue(a,l),new ue(c,u)]},generateSideWallUV:function(n,e,t,i,r,o){let s=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[r*3],f=e[r*3+1],m=e[r*3+2],v=e[o*3],g=e[o*3+1],p=e[o*3+2];return Math.abs(a-u)<Math.abs(s-c)?[new ue(s,1-l),new ue(c,1-d),new ue(h,1-m),new ue(v,1-p)]:[new ue(a,1-l),new ue(u,1-d),new ue(f,1-m),new ue(g,1-p)]}};function Qz(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){let o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var ff=class n extends yi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],v=[],g=[];for(let p=0;p<u;p++){let T=p*h-s;for(let w=0;w<c;w++){let y=w*d-o;m.push(y,-T,0),v.push(0,0,1),g.push(w/a),g.push(1-p/l)}}for(let p=0;p<l;p++)for(let T=0;T<a;T++){let w=T+c*p,y=T+c*(p+1),N=T+1+c*(p+1),R=T+1+c*p;f.push(w,y,R),f.push(y,N,R)}this.setIndex(f),this.setAttribute("position",new gn(m,3)),this.setAttribute("normal",new gn(v,3)),this.setAttribute("uv",new gn(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var hf=class n extends yi{constructor(e=1,t=32,i=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let l=Math.min(s+a,Math.PI),c=0,u=[],d=new A,h=new A,f=[],m=[],v=[],g=[];for(let p=0;p<=i;p++){let T=[],w=p/i,y=0;p===0&&s===0?y=.5/t:p===i&&l===Math.PI&&(y=-.5/t);for(let N=0;N<=t;N++){let R=N/t;d.x=-e*Math.cos(r+R*o)*Math.sin(s+w*a),d.y=e*Math.cos(s+w*a),d.z=e*Math.sin(r+R*o)*Math.sin(s+w*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),v.push(h.x,h.y,h.z),g.push(R+y,1-w),T.push(c++)}u.push(T)}for(let p=0;p<i;p++)for(let T=0;T<t;T++){let w=u[p][T+1],y=u[p][T],N=u[p+1][T],R=u[p+1][T+1];(p!==0||s>0)&&f.push(w,y,R),(p!==i-1||l<Math.PI)&&f.push(y,N,R)}this.setIndex(f),this.setAttribute("position",new gn(m,3)),this.setAttribute("normal",new gn(v,3)),this.setAttribute("uv",new gn(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};var gr=class extends Go{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new St(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Iw,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Tn,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},vr=class extends gr{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Dt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new St(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new St(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new St(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}};var Pg=class extends Go{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=oN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Fg=class extends Go{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function cg(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function ej(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}var za=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Lg=class extends za{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nw,endingEnd:nw}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case iw:o=e,a=2*t-i;break;case rw:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case iw:s=e,l=2*i-t;break;case rw:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-t)/(r-t),v=m*m,g=v*m,p=-h*g+2*h*v-h*m,T=(1+h)*g+(-1.5-2*h)*v+(-.5+h)*m+1,w=(-1-f)*g+(1.5+f)*v+.5*m,y=f*g-f*v;for(let N=0;N!==a;++N)o[N]=p*s[u+N]+T*s[c+N]+w*s[l+N]+y*s[d+N];return o}},kg=class extends za{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)o[h]=s[c+h]*d+s[l+h]*u;return o}},Ug=class extends za{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Zi=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cg(t,this.TimeBufferType),this.values=cg(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:cg(e.times,Array),values:cg(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Ug(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kg(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Lg(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case $d:t=this.InterpolantFactoryMethodDiscrete;break;case _g:t=this.InterpolantFactoryMethodLinear;break;case dg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $d;case this.InterpolantFactoryMethodLinear:return _g;case this.InterpolantFactoryMethodSmooth:return dg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&ej(r))for(let a=0,l=r.length;a!==l;++a){let c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===dg,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{let d=a*i,h=d-i,f=d+i;for(let m=0;m!==i;++m){let v=t[d+m];if(v!==t[h+m]||v!==t[f+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let d=a*i,h=s*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,c=0;c!==i;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Zi.prototype.ValueTypeName="";Zi.prototype.TimeBufferType=Float32Array;Zi.prototype.ValueBufferType=Float32Array;Zi.prototype.DefaultInterpolation=_g;var Os=class extends Zi{constructor(e,t,i){super(e,t,i)}};Os.prototype.ValueTypeName="bool";Os.prototype.ValueBufferType=Array;Os.prototype.DefaultInterpolation=$d;Os.prototype.InterpolantFactoryMethodLinear=void 0;Os.prototype.InterpolantFactoryMethodSmooth=void 0;var Bg=class extends Zi{constructor(e,t,i,r){super(e,t,i,r)}};Bg.prototype.ValueTypeName="color";var Vg=class extends Zi{constructor(e,t,i,r){super(e,t,i,r)}};Vg.prototype.ValueTypeName="number";var Hg=class extends za{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),c=e*a;for(let u=c+a;c!==u;c+=4)Nr.slerpFlat(o,0,s,c-a,s,c,l);return o}},pf=class extends Zi{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new Hg(this.times,this.values,this.getValueSize(),e)}};pf.prototype.ValueTypeName="quaternion";pf.prototype.InterpolantFactoryMethodSmooth=void 0;var Ps=class extends Zi{constructor(e,t,i){super(e,t,i)}};Ps.prototype.ValueTypeName="string";Ps.prototype.ValueBufferType=Array;Ps.prototype.DefaultInterpolation=$d;Ps.prototype.InterpolantFactoryMethodLinear=void 0;Ps.prototype.InterpolantFactoryMethodSmooth=void 0;var zg=class extends Zi{constructor(e,t,i,r){super(e,t,i,r)}};zg.prototype.ValueTypeName="vector";var hg={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},jg=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,l,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,o===!1&&r.onStart!==void 0&&r.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,r.onProgress!==void 0&&r.onProgress(u,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){let d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){let f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}},SN=new jg,Fw=(()=>{class n{constructor(t){this.manager=t!==void 0?t:SN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();var bc=new WeakMap,Gg=class extends Fw{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=hg.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0);else{let d=bc.get(s);d===void 0&&(d=[],bc.set(s,d)),d.push({onLoad:t,onError:r})}return s}let a=wc("img");function l(){u(),t&&t(this);let d=bc.get(this)||[];for(let h=0;h<d.length;h++){let f=d[h];f.onLoad&&f.onLoad(this)}bc.delete(this),o.manager.itemEnd(e)}function c(d){u(),r&&r(d),hg.remove(`image:${e}`);let h=bc.get(this)||[];for(let f=0;f<h.length;f++){let m=h[f];m.onError&&m.onError(d)}bc.delete(this),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),hg.add(`image:${e}`,a),o.manager.itemStart(e),a.src=e,a}};var mf=class extends Fw{constructor(e){super(e)}load(e,t,i,r){let o=new Fr,s=new Gg(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},Pc=class extends mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new St(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var JE=new rn,w1=new A,M1=new A,Wg=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ue(512,512),this.mapType=Pr,this.map=null,this.mapPass=null,this.matrix=new rn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ic,this._frameExtents=new ue(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;w1.setFromMatrixPosition(e.matrixWorld),t.position.copy(w1),M1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(M1),t.updateMatrixWorld(),JE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(JE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var S1=new rn,zd=new A,QE=new A,dw=class extends Wg{constructor(){super(new Hn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ue(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new A(1,0,0),new A(-1,0,0),new A(0,0,1),new A(0,0,-1),new A(0,1,0),new A(0,-1,0)],this._cubeUps=[new A(0,1,0),new A(0,1,0),new A(0,1,0),new A(0,1,0),new A(0,0,1),new A(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),zd.setFromMatrixPosition(e.matrixWorld),i.position.copy(zd),QE.copy(i.position),QE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(QE),i.updateMatrixWorld(),r.makeTranslation(-zd.x,-zd.y,-zd.z),S1.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(S1)}},gf=class extends Pc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new dw}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},vf=class extends Jd{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},fw=class extends Wg{constructor(){super(new vf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Fs=class extends Pc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.shadow=new fw}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},_f=class extends Pc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var $g=class extends Hn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var Lw="\\[\\]\\.:\\/",tj=new RegExp("["+Lw+"]","g"),kw="[^"+Lw+"]",nj="[^"+Lw.replace("\\.","")+"]",ij=/((?:WC+[\/:])*)/.source.replace("WC",kw),rj=/(WCOD+)?/.source.replace("WCOD",nj),oj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kw),sj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kw),aj=new RegExp("^"+ij+rj+oj+sj+"$"),lj=["material","materials","bones","map"],hw=class{constructor(e,t,i){let r=i||wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},wn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(tj,"")}static parseTrackName(t){let i=aj.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);lj.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let c=r(l.children);if(c)return c}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[o];if(a===void 0){let u=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+o+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=hw,n})();wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};wn.prototype.GetterByBindingType=[wn.prototype._getValue_direct,wn.prototype._getValue_array,wn.prototype._getValue_arrayElement,wn.prototype._getValue_toArray];wn.prototype.SetterByBindingTypeAndVersioning=[[wn.prototype._setValue_direct,wn.prototype._setValue_direct_setNeedsUpdate,wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_array,wn.prototype._setValue_array_setNeedsUpdate,wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_arrayElement,wn.prototype._setValue_arrayElement_setNeedsUpdate,wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_fromArray,wn.prototype._setValue_fromArray_setNeedsUpdate,wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var wue=new Float32Array(1);var C1=new rn,ja=class{constructor(e,t,i=0,r=1/0){this.ray=new Sc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Cc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return C1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(C1),this}intersectObject(e,t=!0,i=[]){return pw(e,this,i,t),i.sort(T1),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)pw(e[r],this,i,t);return i.sort(T1),i}};function T1(n,e){return n.distance-e.distance}function pw(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)pw(o[s],e,t,!0)}}var yf=class extends Ns{constructor(e=10,t=10,i=4473924,r=8947848){i=new St(i),r=new St(r);let o=t/2,s=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);let v=h===o?i:r;v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3}let u=new yi;u.setAttribute("position",new gn(l,3)),u.setAttribute("color",new gn(c,3));let d=new Jr({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};var D1=new A,ug,ew,Ga=class extends mr{constructor(e=new A(0,0,1),t=new A(0,0,0),i=1,r=16776960,o=i*.2,s=o*.2){super(),this.type="ArrowHelper",ug===void 0&&(ug=new yi,ug.setAttribute("position",new gn([0,0,0,0,1,0],3)),ew=new Tg(.5,1,5,1),ew.translate(0,-.5,0)),this.position.copy(t),this.line=new ef(ug,new Jr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new On(ew,new Tc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{D1.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(D1,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}};function Uw(n,e,t,i){let r=cj(i);switch(t){case Mw:return n*e;case Cw:return n*e/r.components*r.byteLength;case av:return n*e/r.components*r.byteLength;case Tw:return n*e*2/r.components*r.byteLength;case lv:return n*e*2/r.components*r.byteLength;case Sw:return n*e*3/r.components*r.byteLength;case _r:return n*e*4/r.components*r.byteLength;case cv:return n*e*4/r.components*r.byteLength;case Ef:case wf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Mf:case Sf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case dv:case hv:return Math.max(n,16)*Math.max(e,8)/4;case uv:case fv:return Math.max(n,8)*Math.max(e,8)/2;case pv:case mv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case gv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case vv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case _v:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case yv:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case bv:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case xv:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Ev:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case wv:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Mv:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Sv:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Cv:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Tv:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Dv:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Iv:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Av:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Cf:case Rv:case Nv:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Dw:case Ov:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Pv:case Fv:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function cj(n){switch(n){case Pr:case xw:return{byteLength:1,components:1};case Lc:case Ew:case kc:return{byteLength:2,components:1};case ov:case sv:return{byteLength:2,components:4};case ks:case rv:case eo:return{byteLength:4,components:1};case ww:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:qg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=qg);function YN(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function uj(n){let e=new WeakMap;function t(a,l){let c=a.array,u=a.usage,d=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)f=n.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,c){let u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),d.length===0)n.bufferSubData(c,0,u);else{d.sort((f,m)=>f.start-m.start);let h=0;for(let f=1;f<d.length;f++){let m=d[h],v=d[f];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++h,d[h]=v)}d.length=h+1;for(let f=0,m=d.length;f<m;f++){let v=d[f];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:o,update:s}}var dj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,fj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,hj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,pj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,gj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_j=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yj=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,bj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,xj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ej=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Mj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Sj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Cj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Tj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Dj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ij=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Aj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Rj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Nj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Oj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Pj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Fj=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Lj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kj=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Uj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Bj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Vj=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Hj="gl_FragColor = linearToOutputTexel( gl_FragColor );",zj=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Gj=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Wj=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$j=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Xj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Yj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Zj=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Kj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Jj=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Qj=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,iG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,rG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,sG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,aG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,cG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,uG=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,fG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hG=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pG=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mG=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gG=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,vG=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_G=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,EG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wG=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,MG=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,SG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CG=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,TG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,DG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,IG=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,AG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,OG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,PG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,FG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,LG=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,kG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,UG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,BG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,VG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,HG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,zG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,WG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$G=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,qG=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XG=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,YG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ZG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,JG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,QG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,e4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,t4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,n4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,i4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,r4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,o4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,s4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,a4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,l4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,c4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,u4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,d4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,f4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,h4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,p4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,m4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,g4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,v4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,y4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,b4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,x4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,w4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,M4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,S4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,I4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,R4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,N4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,F4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U4=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,B4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,V4=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,H4=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,z4=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,j4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ct={alphahash_fragment:dj,alphahash_pars_fragment:fj,alphamap_fragment:hj,alphamap_pars_fragment:pj,alphatest_fragment:mj,alphatest_pars_fragment:gj,aomap_fragment:vj,aomap_pars_fragment:_j,batching_pars_vertex:yj,batching_vertex:bj,begin_vertex:xj,beginnormal_vertex:Ej,bsdfs:wj,iridescence_fragment:Mj,bumpmap_pars_fragment:Sj,clipping_planes_fragment:Cj,clipping_planes_pars_fragment:Tj,clipping_planes_pars_vertex:Dj,clipping_planes_vertex:Ij,color_fragment:Aj,color_pars_fragment:Rj,color_pars_vertex:Nj,color_vertex:Oj,common:Pj,cube_uv_reflection_fragment:Fj,defaultnormal_vertex:Lj,displacementmap_pars_vertex:kj,displacementmap_vertex:Uj,emissivemap_fragment:Bj,emissivemap_pars_fragment:Vj,colorspace_fragment:Hj,colorspace_pars_fragment:zj,envmap_fragment:jj,envmap_common_pars_fragment:Gj,envmap_pars_fragment:Wj,envmap_pars_vertex:$j,envmap_physical_pars_fragment:iG,envmap_vertex:qj,fog_vertex:Xj,fog_pars_vertex:Yj,fog_fragment:Zj,fog_pars_fragment:Kj,gradientmap_pars_fragment:Jj,lightmap_pars_fragment:Qj,lights_lambert_fragment:eG,lights_lambert_pars_fragment:tG,lights_pars_begin:nG,lights_toon_fragment:rG,lights_toon_pars_fragment:oG,lights_phong_fragment:sG,lights_phong_pars_fragment:aG,lights_physical_fragment:lG,lights_physical_pars_fragment:cG,lights_fragment_begin:uG,lights_fragment_maps:dG,lights_fragment_end:fG,logdepthbuf_fragment:hG,logdepthbuf_pars_fragment:pG,logdepthbuf_pars_vertex:mG,logdepthbuf_vertex:gG,map_fragment:vG,map_pars_fragment:_G,map_particle_fragment:yG,map_particle_pars_fragment:bG,metalnessmap_fragment:xG,metalnessmap_pars_fragment:EG,morphinstance_vertex:wG,morphcolor_vertex:MG,morphnormal_vertex:SG,morphtarget_pars_vertex:CG,morphtarget_vertex:TG,normal_fragment_begin:DG,normal_fragment_maps:IG,normal_pars_fragment:AG,normal_pars_vertex:RG,normal_vertex:NG,normalmap_pars_fragment:OG,clearcoat_normal_fragment_begin:PG,clearcoat_normal_fragment_maps:FG,clearcoat_pars_fragment:LG,iridescence_pars_fragment:kG,opaque_fragment:UG,packing:BG,premultiplied_alpha_fragment:VG,project_vertex:HG,dithering_fragment:zG,dithering_pars_fragment:jG,roughnessmap_fragment:GG,roughnessmap_pars_fragment:WG,shadowmap_pars_fragment:$G,shadowmap_pars_vertex:qG,shadowmap_vertex:XG,shadowmask_pars_fragment:YG,skinbase_vertex:ZG,skinning_pars_vertex:KG,skinning_vertex:JG,skinnormal_vertex:QG,specularmap_fragment:e4,specularmap_pars_fragment:t4,tonemapping_fragment:n4,tonemapping_pars_fragment:i4,transmission_fragment:r4,transmission_pars_fragment:o4,uv_pars_fragment:s4,uv_pars_vertex:a4,uv_vertex:l4,worldpos_vertex:c4,background_vert:u4,background_frag:d4,backgroundCube_vert:f4,backgroundCube_frag:h4,cube_vert:p4,cube_frag:m4,depth_vert:g4,depth_frag:v4,distanceRGBA_vert:_4,distanceRGBA_frag:y4,equirect_vert:b4,equirect_frag:x4,linedashed_vert:E4,linedashed_frag:w4,meshbasic_vert:M4,meshbasic_frag:S4,meshlambert_vert:C4,meshlambert_frag:T4,meshmatcap_vert:D4,meshmatcap_frag:I4,meshnormal_vert:A4,meshnormal_frag:R4,meshphong_vert:N4,meshphong_frag:O4,meshphysical_vert:P4,meshphysical_frag:F4,meshtoon_vert:L4,meshtoon_frag:k4,points_vert:U4,points_frag:B4,shadow_vert:V4,shadow_frag:H4,sprite_vert:z4,sprite_frag:j4},ve={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yt},alphaMap:{value:null},alphaMapTransform:{value:new yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yt}},envmap:{envMap:{value:null},envMapRotation:{value:new yt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yt},normalScale:{value:new ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yt},alphaTest:{value:0},uvTransform:{value:new yt}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yt},alphaMap:{value:null},alphaMapTransform:{value:new yt},alphaTest:{value:0}}},to={basic:{uniforms:li([ve.common,ve.specularmap,ve.envmap,ve.aomap,ve.lightmap,ve.fog]),vertexShader:Ct.meshbasic_vert,fragmentShader:Ct.meshbasic_frag},lambert:{uniforms:li([ve.common,ve.specularmap,ve.envmap,ve.aomap,ve.lightmap,ve.emissivemap,ve.bumpmap,ve.normalmap,ve.displacementmap,ve.fog,ve.lights,{emissive:{value:new St(0)}}]),vertexShader:Ct.meshlambert_vert,fragmentShader:Ct.meshlambert_frag},phong:{uniforms:li([ve.common,ve.specularmap,ve.envmap,ve.aomap,ve.lightmap,ve.emissivemap,ve.bumpmap,ve.normalmap,ve.displacementmap,ve.fog,ve.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:Ct.meshphong_vert,fragmentShader:Ct.meshphong_frag},standard:{uniforms:li([ve.common,ve.envmap,ve.aomap,ve.lightmap,ve.emissivemap,ve.bumpmap,ve.normalmap,ve.displacementmap,ve.roughnessmap,ve.metalnessmap,ve.fog,ve.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag},toon:{uniforms:li([ve.common,ve.aomap,ve.lightmap,ve.emissivemap,ve.bumpmap,ve.normalmap,ve.displacementmap,ve.gradientmap,ve.fog,ve.lights,{emissive:{value:new St(0)}}]),vertexShader:Ct.meshtoon_vert,fragmentShader:Ct.meshtoon_frag},matcap:{uniforms:li([ve.common,ve.bumpmap,ve.normalmap,ve.displacementmap,ve.fog,{matcap:{value:null}}]),vertexShader:Ct.meshmatcap_vert,fragmentShader:Ct.meshmatcap_frag},points:{uniforms:li([ve.points,ve.fog]),vertexShader:Ct.points_vert,fragmentShader:Ct.points_frag},dashed:{uniforms:li([ve.common,ve.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ct.linedashed_vert,fragmentShader:Ct.linedashed_frag},depth:{uniforms:li([ve.common,ve.displacementmap]),vertexShader:Ct.depth_vert,fragmentShader:Ct.depth_frag},normal:{uniforms:li([ve.common,ve.bumpmap,ve.normalmap,ve.displacementmap,{opacity:{value:1}}]),vertexShader:Ct.meshnormal_vert,fragmentShader:Ct.meshnormal_frag},sprite:{uniforms:li([ve.sprite,ve.fog]),vertexShader:Ct.sprite_vert,fragmentShader:Ct.sprite_frag},background:{uniforms:{uvTransform:{value:new yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ct.background_vert,fragmentShader:Ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yt}},vertexShader:Ct.backgroundCube_vert,fragmentShader:Ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ct.cube_vert,fragmentShader:Ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ct.equirect_vert,fragmentShader:Ct.equirect_frag},distanceRGBA:{uniforms:li([ve.common,ve.displacementmap,{referencePosition:{value:new A},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ct.distanceRGBA_vert,fragmentShader:Ct.distanceRGBA_frag},shadow:{uniforms:li([ve.lights,ve.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:Ct.shadow_vert,fragmentShader:Ct.shadow_frag}};to.physical={uniforms:li([to.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yt},clearcoatNormalScale:{value:new ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yt},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yt},transmissionSamplerSize:{value:new ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yt},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yt},anisotropyVector:{value:new ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yt}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag};var Lv={r:0,b:0,g:0},Xa=new Tn,G4=new rn;function W4(n,e,t,i,r,o,s){let a=new St(0),l=o===!0?0:1,c,u,d=null,h=0,f=null;function m(w){let y=w.isScene===!0?w.background:null;return y&&y.isTexture&&(y=(w.backgroundBlurriness>0?t:e).get(y)),y}function v(w){let y=!1,N=m(w);N===null?p(a,l):N&&N.isColor&&(p(N,1),y=!0);let R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,s):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||y)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(w,y){let N=m(y);N&&(N.isCubeTexture||N.mapping===bf)?(u===void 0&&(u=new On(new Kr(1,1,1),new Or({name:"BackgroundCubeMaterial",uniforms:qa(to.backgroundCube.uniforms),vertexShader:to.backgroundCube.vertexShader,fragmentShader:to.backgroundCube.fragmentShader,side:bi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,D,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Xa.copy(y.backgroundRotation),Xa.x*=-1,Xa.y*=-1,Xa.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Xa.y*=-1,Xa.z*=-1),u.material.uniforms.envMap.value=N,u.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(G4.makeRotationFromEuler(Xa)),u.material.toneMapped=Bt.getTransfer(N.colorSpace)!==Zt,(d!==N||h!==N.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=N,h=N.version,f=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):N&&N.isTexture&&(c===void 0&&(c=new On(new ff(2,2),new Or({name:"BackgroundMaterial",uniforms:qa(to.background.uniforms),vertexShader:to.background.vertexShader,fragmentShader:to.background.fragmentShader,side:zo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=N,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=Bt.getTransfer(N.colorSpace)!==Zt,N.matrixAutoUpdate===!0&&N.updateMatrix(),c.material.uniforms.uvTransform.value.copy(N.matrix),(d!==N||h!==N.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=N,h=N.version,f=n.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function p(w,y){w.getRGB(Lv,Ow(n)),i.buffers.color.setClear(Lv.r,Lv.g,Lv.b,y,s)}function T(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(w,y=1){a.set(w),l=y,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,p(a,l)},render:v,addToRenderList:g,dispose:T}}function $4(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),o=r,s=!1;function a(b,I,H,U,X){let q=!1,W=d(U,H,I);o!==W&&(o=W,c(o.object)),q=f(b,U,H,X),q&&m(b,U,H,X),X!==null&&e.update(X,n.ELEMENT_ARRAY_BUFFER),(q||s)&&(s=!1,y(b,I,H,U),X!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(X).buffer))}function l(){return n.createVertexArray()}function c(b){return n.bindVertexArray(b)}function u(b){return n.deleteVertexArray(b)}function d(b,I,H){let U=H.wireframe===!0,X=i[b.id];X===void 0&&(X={},i[b.id]=X);let q=X[I.id];q===void 0&&(q={},X[I.id]=q);let W=q[U];return W===void 0&&(W=h(l()),q[U]=W),W}function h(b){let I=[],H=[],U=[];for(let X=0;X<t;X++)I[X]=0,H[X]=0,U[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:H,attributeDivisors:U,object:b,attributes:{},index:null}}function f(b,I,H,U){let X=o.attributes,q=I.attributes,W=0,Q=H.getAttributes();for(let z in Q)if(Q[z].location>=0){let Ee=X[z],Ie=q[z];if(Ie===void 0&&(z==="instanceMatrix"&&b.instanceMatrix&&(Ie=b.instanceMatrix),z==="instanceColor"&&b.instanceColor&&(Ie=b.instanceColor)),Ee===void 0||Ee.attribute!==Ie||Ie&&Ee.data!==Ie.data)return!0;W++}return o.attributesNum!==W||o.index!==U}function m(b,I,H,U){let X={},q=I.attributes,W=0,Q=H.getAttributes();for(let z in Q)if(Q[z].location>=0){let Ee=q[z];Ee===void 0&&(z==="instanceMatrix"&&b.instanceMatrix&&(Ee=b.instanceMatrix),z==="instanceColor"&&b.instanceColor&&(Ee=b.instanceColor));let Ie={};Ie.attribute=Ee,Ee&&Ee.data&&(Ie.data=Ee.data),X[z]=Ie,W++}o.attributes=X,o.attributesNum=W,o.index=U}function v(){let b=o.newAttributes;for(let I=0,H=b.length;I<H;I++)b[I]=0}function g(b){p(b,0)}function p(b,I){let H=o.newAttributes,U=o.enabledAttributes,X=o.attributeDivisors;H[b]=1,U[b]===0&&(n.enableVertexAttribArray(b),U[b]=1),X[b]!==I&&(n.vertexAttribDivisor(b,I),X[b]=I)}function T(){let b=o.newAttributes,I=o.enabledAttributes;for(let H=0,U=I.length;H<U;H++)I[H]!==b[H]&&(n.disableVertexAttribArray(H),I[H]=0)}function w(b,I,H,U,X,q,W){W===!0?n.vertexAttribIPointer(b,I,H,X,q):n.vertexAttribPointer(b,I,H,U,X,q)}function y(b,I,H,U){v();let X=U.attributes,q=H.getAttributes(),W=I.defaultAttributeValues;for(let Q in q){let z=q[Q];if(z.location>=0){let pe=X[Q];if(pe===void 0&&(Q==="instanceMatrix"&&b.instanceMatrix&&(pe=b.instanceMatrix),Q==="instanceColor"&&b.instanceColor&&(pe=b.instanceColor)),pe!==void 0){let Ee=pe.normalized,Ie=pe.itemSize,_t=e.get(pe);if(_t===void 0)continue;let Pt=_t.buffer,Y=_t.type,de=_t.bytesPerElement,ke=Y===n.INT||Y===n.UNSIGNED_INT||pe.gpuType===rv;if(pe.isInterleavedBufferAttribute){let xe=pe.data,Ue=xe.stride,bt=pe.offset;if(xe.isInstancedInterleavedBuffer){for(let je=0;je<z.locationSize;je++)p(z.location+je,xe.meshPerAttribute);b.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let je=0;je<z.locationSize;je++)g(z.location+je);n.bindBuffer(n.ARRAY_BUFFER,Pt);for(let je=0;je<z.locationSize;je++)w(z.location+je,Ie/z.locationSize,Y,Ee,Ue*de,(bt+Ie/z.locationSize*je)*de,ke)}else{if(pe.isInstancedBufferAttribute){for(let xe=0;xe<z.locationSize;xe++)p(z.location+xe,pe.meshPerAttribute);b.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let xe=0;xe<z.locationSize;xe++)g(z.location+xe);n.bindBuffer(n.ARRAY_BUFFER,Pt);for(let xe=0;xe<z.locationSize;xe++)w(z.location+xe,Ie/z.locationSize,Y,Ee,Ie*de,Ie/z.locationSize*xe*de,ke)}}else if(W!==void 0){let Ee=W[Q];if(Ee!==void 0)switch(Ee.length){case 2:n.vertexAttrib2fv(z.location,Ee);break;case 3:n.vertexAttrib3fv(z.location,Ee);break;case 4:n.vertexAttrib4fv(z.location,Ee);break;default:n.vertexAttrib1fv(z.location,Ee)}}}}T()}function N(){P();for(let b in i){let I=i[b];for(let H in I){let U=I[H];for(let X in U)u(U[X].object),delete U[X];delete I[H]}delete i[b]}}function R(b){if(i[b.id]===void 0)return;let I=i[b.id];for(let H in I){let U=I[H];for(let X in U)u(U[X].object),delete U[X];delete I[H]}delete i[b.id]}function D(b){for(let I in i){let H=i[I];if(H[b.id]===void 0)continue;let U=H[b.id];for(let X in U)u(U[X].object),delete U[X];delete H[b.id]}}function P(){E(),s=!0,o!==r&&(o=r,c(o.object))}function E(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:P,resetDefaultState:E,dispose:N,releaseStatesOfGeometry:R,releaseStatesOfProgram:D,initAttributes:v,enableAttribute:g,disableUnusedAttributes:T}}function q4(n,e,t){let i;function r(c){i=c}function o(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function s(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let f=0;for(let m=0;m<d;m++)f+=u[m];t.update(f,i,1)}function l(c,u,d,h){if(d===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<c.length;m++)s(c[m],u[m],h[m]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,d);let m=0;for(let v=0;v<d;v++)m+=u[v]*h[v];t.update(m,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function X4(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let D=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(D){return!(D!==_r&&i.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){let P=D===kc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==Pr&&i.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==eo&&!P)}function l(D){if(D==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp",u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);let d=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),p=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=m>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:T,maxVaryings:w,maxFragmentUniforms:y,vertexTextures:N,maxSamples:R}}function Y4(n){let e=this,t=null,i=0,r=!1,o=!1,s=new Xr,a=new yt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||i!==0||r;return r=h,i=d.length,f},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){let m=d.clippingPlanes,v=d.clipIntersection,g=d.clipShadows,p=n.get(d);if(!r||m===null||m.length===0||o&&!g)o?u(null):c();else{let T=o?0:i,w=T*4,y=p.clippingState||null;l.value=y,y=u(m,h,w,f);for(let N=0;N!==w;++N)y[N]=t[N];p.clippingState=y,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=T}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,m){let v=d!==null?d.length:0,g=null;if(v!==0){if(g=l.value,m!==!0||g===null){let p=f+v*4,T=h.matrixWorldInverse;a.getNormalMatrix(T),(g===null||g.length<p)&&(g=new Float32Array(p));for(let w=0,y=f;w!==v;++w,y+=4)s.copy(d[w]).applyMatrix4(T,a),s.normal.toArray(g,y),g[y+3]=s.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function Z4(n){let e=new WeakMap;function t(s,a){return a===tv?s.mapping=Wa:a===nv&&(s.mapping=$a),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===tv||a===nv)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let c=new Mg(l.height);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",r),t(c.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var zc=4,CN=[.125,.215,.35,.446,.526,.582],Ka=20,Bw=new vf,TN=new St,Vw=null,Hw=0,zw=0,jw=!1,Za=(1+Math.sqrt(5))/2,Hc=1/Za,DN=[new A(-Za,Hc,0),new A(Za,Hc,0),new A(-Hc,0,Za),new A(Hc,0,Za),new A(0,Za,-Hc),new A(0,Za,Hc),new A(-1,1,-1),new A(1,1,-1),new A(-1,1,1),new A(1,1,1)],K4=new A,Bv=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=K4}=o;Vw=this._renderer.getRenderTarget(),Hw=this._renderer.getActiveCubeFace(),zw=this._renderer.getActiveMipmapLevel(),jw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=AN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Vw,Hw,zw),this._renderer.xr.enabled=jw,e.scissorTest=!1,kv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wa||e.mapping===$a?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Vw=this._renderer.getRenderTarget(),Hw=this._renderer.getActiveCubeFace(),zw=this._renderer.getActiveMipmapLevel(),jw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Rr,minFilter:Rr,generateMipmaps:!1,type:kc,format:_r,colorSpace:La,depthBuffer:!1},r=IN(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=IN(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=J4(o)),this._blurMaterial=Q4(o,e,t)}return r}_compileMaterial(e){let t=new On(this._lodPlanes[0],e);this._renderer.compile(t,Bw)}_sceneToCubeUV(e,t,i,r,o){let l=new Hn(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(TN),d.toneMapping=$o,d.autoClear=!1;let m=new Tc({name:"PMREM.Background",side:bi,depthWrite:!1,depthTest:!1}),v=new On(new Kr,m),g=!1,p=e.background;p?p.isColor&&(m.color.copy(p),e.background=null,g=!0):(m.color.copy(TN),g=!0);for(let T=0;T<6;T++){let w=T%3;w===0?(l.up.set(0,c[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+u[T],o.y,o.z)):w===1?(l.up.set(0,0,c[T]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+u[T],o.z)):(l.up.set(0,c[T],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+u[T]));let y=this._cubeSize;kv(r,w*y,T>2?y:0,y,y),d.setRenderTarget(r),g&&d.render(v,l),d.render(e,l)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=p}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Wa||e.mapping===$a;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=RN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=AN());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new On(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;kv(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,Bw)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=DN[(r-o-1)%DN.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new On(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*Ka-1),v=o/m,g=isFinite(o)?1+Math.floor(u*v):Ka;g>Ka&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ka}`);let p=[],T=0;for(let D=0;D<Ka;++D){let P=D/v,E=Math.exp(-P*P/2);p.push(E),D===0?T+=E:D<g&&(T+=2*E)}for(let D=0;D<p.length;D++)p[D]=p[D]/T;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:w}=this;h.dTheta.value=m,h.mipInt.value=w-i;let y=this._sizeLods[r],N=3*y*(r>w-zc?r-w+zc:0),R=4*(this._cubeSize-y);kv(t,N,R,3*y,2*y),l.setRenderTarget(t),l.render(d,Bw)}};function J4(n){let e=[],t=[],i=[],r=n,o=n-zc+1+CN.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let l=1/a;s>n-zc?l=CN[s-n+zc-1]:s===0&&(l=0),i.push(l);let c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,v=3,g=2,p=1,T=new Float32Array(v*m*f),w=new Float32Array(g*m*f),y=new Float32Array(p*m*f);for(let R=0;R<f;R++){let D=R%3*2/3-1,P=R>2?0:-1,E=[D,P,0,D+2/3,P,0,D+2/3,P+1,0,D,P,0,D+2/3,P+1,0,D,P+1,0];T.set(E,v*m*R),w.set(h,g*m*R);let b=[R,R,R,R,R,R];y.set(b,p*m*R)}let N=new yi;N.setAttribute("position",new Xi(T,v)),N.setAttribute("uv",new Xi(w,g)),N.setAttribute("faceIndex",new Xi(y,p)),e.push(N),r>zc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function IN(n,e,t){let i=new Zr(n,e,t);return i.texture.mapping=bf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function kv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Q4(n,e,t){let i=new Float32Array(Ka),r=new A(0,1,0);return new Or({name:"SphericalGaussianBlur",defines:{n:Ka,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Qw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function AN(){return new Or({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Qw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function RN(){return new Or({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Qw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function Qw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function eW(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===tv||l===nv,u=l===Wa||l===$a;if(c||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new Bv(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let f=a.image;return c&&f&&f.height>0||u&&f&&r(f)?(t===null&&(t=new Bv(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function r(a){let l=0,c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function o(a){let l=a.target;l.removeEventListener("dispose",o);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function tW(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&ka("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function nW(n,e,t,i){let r={},o=new WeakMap;function s(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(e.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,t.memory.geometries++),h}function l(d){let h=d.attributes;for(let f in h)e.update(h[f],n.ARRAY_BUFFER)}function c(d){let h=[],f=d.index,m=d.attributes.position,v=0;if(f!==null){let T=f.array;v=f.version;for(let w=0,y=T.length;w<y;w+=3){let N=T[w+0],R=T[w+1],D=T[w+2];h.push(N,R,R,D,D,N)}}else if(m!==void 0){let T=m.array;v=m.version;for(let w=0,y=T.length/3-1;w<y;w+=3){let N=w+0,R=w+1,D=w+2;h.push(N,R,R,D,D,N)}}else return;let g=new(Nw(h)?Kd:Zd)(h,1);g.version=v;let p=o.get(d);p&&e.remove(p),o.set(d,g)}function u(d){let h=o.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function iW(n,e,t){let i;function r(h){i=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function l(h,f){n.drawElements(i,f,o,h*s),t.update(f,i,1)}function c(h,f,m){m!==0&&(n.drawElementsInstanced(i,f,o,h*s,m),t.update(f,i,m))}function u(h,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,o,h,0,m);let g=0;for(let p=0;p<m;p++)g+=f[p];t.update(g,i,1)}function d(h,f,m,v){if(m===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let p=0;p<h.length;p++)c(h[p]/s,f[p],v[p]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,o,h,0,v,0,m);let p=0;for(let T=0;T<m;T++)p+=f[T]*v[T];t.update(p,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function rW(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function oW(n,e,t){let i=new WeakMap,r=new Yt;function o(s,a,l){let c=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let b=function(){P.dispose(),i.delete(a),a.removeEventListener("dispose",b)};var f=b;h!==void 0&&h.texture.dispose();let m=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,p=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],w=a.morphAttributes.color||[],y=0;m===!0&&(y=1),v===!0&&(y=2),g===!0&&(y=3);let N=a.attributes.position.count*y,R=1;N>e.maxTextureSize&&(R=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);let D=new Float32Array(N*R*4*d),P=new Yd(D,N,R,d);P.type=eo,P.needsUpdate=!0;let E=y*4;for(let I=0;I<d;I++){let H=p[I],U=T[I],X=w[I],q=N*R*4*I;for(let W=0;W<H.count;W++){let Q=W*E;m===!0&&(r.fromBufferAttribute(H,W),D[q+Q+0]=r.x,D[q+Q+1]=r.y,D[q+Q+2]=r.z,D[q+Q+3]=0),v===!0&&(r.fromBufferAttribute(U,W),D[q+Q+4]=r.x,D[q+Q+5]=r.y,D[q+Q+6]=r.z,D[q+Q+7]=0),g===!0&&(r.fromBufferAttribute(X,W),D[q+Q+8]=r.x,D[q+Q+9]=r.y,D[q+Q+10]=r.z,D[q+Q+11]=X.itemSize===4?r.w:1)}}h={count:d,texture:P,size:new ue(N,R)},i.set(a,h),a.addEventListener("dispose",b)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let m=0;for(let g=0;g<c.length;g++)m+=c[g];let v=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function sW(n,e,t,i){let r=new WeakMap;function o(l){let c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){let h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return d}function s(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:o,dispose:s}}var ZN=new Fr,NN=new tf(1,1),KN=new Yd,JN=new Eg,QN=new Qd,ON=[],PN=[],FN=new Float32Array(16),LN=new Float32Array(9),kN=new Float32Array(4);function Gc(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=ON[r];if(o===void 0&&(o=new Float32Array(r),ON[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function zn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function jn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Vv(n,e){let t=PN[e];t===void 0&&(t=new Int32Array(e),PN[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function aW(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function lW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zn(t,e))return;n.uniform2fv(this.addr,e),jn(t,e)}}function cW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(zn(t,e))return;n.uniform3fv(this.addr,e),jn(t,e)}}function uW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zn(t,e))return;n.uniform4fv(this.addr,e),jn(t,e)}}function dW(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(zn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),jn(t,e)}else{if(zn(t,i))return;kN.set(i),n.uniformMatrix2fv(this.addr,!1,kN),jn(t,i)}}function fW(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(zn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),jn(t,e)}else{if(zn(t,i))return;LN.set(i),n.uniformMatrix3fv(this.addr,!1,LN),jn(t,i)}}function hW(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(zn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),jn(t,e)}else{if(zn(t,i))return;FN.set(i),n.uniformMatrix4fv(this.addr,!1,FN),jn(t,i)}}function pW(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function mW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zn(t,e))return;n.uniform2iv(this.addr,e),jn(t,e)}}function gW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zn(t,e))return;n.uniform3iv(this.addr,e),jn(t,e)}}function vW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zn(t,e))return;n.uniform4iv(this.addr,e),jn(t,e)}}function _W(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function yW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zn(t,e))return;n.uniform2uiv(this.addr,e),jn(t,e)}}function bW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zn(t,e))return;n.uniform3uiv(this.addr,e),jn(t,e)}}function xW(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zn(t,e))return;n.uniform4uiv(this.addr,e),jn(t,e)}}function EW(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(NN.compareFunction=Aw,o=NN):o=ZN,t.setTexture2D(e||o,r)}function wW(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||JN,r)}function MW(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||QN,r)}function SW(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||KN,r)}function CW(n){switch(n){case 5126:return aW;case 35664:return lW;case 35665:return cW;case 35666:return uW;case 35674:return dW;case 35675:return fW;case 35676:return hW;case 5124:case 35670:return pW;case 35667:case 35671:return mW;case 35668:case 35672:return gW;case 35669:case 35673:return vW;case 5125:return _W;case 36294:return yW;case 36295:return bW;case 36296:return xW;case 35678:case 36198:case 36298:case 36306:case 35682:return EW;case 35679:case 36299:case 36307:return wW;case 35680:case 36300:case 36308:case 36293:return MW;case 36289:case 36303:case 36311:case 36292:return SW}}function TW(n,e){n.uniform1fv(this.addr,e)}function DW(n,e){let t=Gc(e,this.size,2);n.uniform2fv(this.addr,t)}function IW(n,e){let t=Gc(e,this.size,3);n.uniform3fv(this.addr,t)}function AW(n,e){let t=Gc(e,this.size,4);n.uniform4fv(this.addr,t)}function RW(n,e){let t=Gc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function NW(n,e){let t=Gc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function OW(n,e){let t=Gc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function PW(n,e){n.uniform1iv(this.addr,e)}function FW(n,e){n.uniform2iv(this.addr,e)}function LW(n,e){n.uniform3iv(this.addr,e)}function kW(n,e){n.uniform4iv(this.addr,e)}function UW(n,e){n.uniform1uiv(this.addr,e)}function BW(n,e){n.uniform2uiv(this.addr,e)}function VW(n,e){n.uniform3uiv(this.addr,e)}function HW(n,e){n.uniform4uiv(this.addr,e)}function zW(n,e,t){let i=this.cache,r=e.length,o=Vv(t,r);zn(i,o)||(n.uniform1iv(this.addr,o),jn(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||ZN,o[s])}function jW(n,e,t){let i=this.cache,r=e.length,o=Vv(t,r);zn(i,o)||(n.uniform1iv(this.addr,o),jn(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||JN,o[s])}function GW(n,e,t){let i=this.cache,r=e.length,o=Vv(t,r);zn(i,o)||(n.uniform1iv(this.addr,o),jn(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||QN,o[s])}function WW(n,e,t){let i=this.cache,r=e.length,o=Vv(t,r);zn(i,o)||(n.uniform1iv(this.addr,o),jn(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||KN,o[s])}function $W(n){switch(n){case 5126:return TW;case 35664:return DW;case 35665:return IW;case 35666:return AW;case 35674:return RW;case 35675:return NW;case 35676:return OW;case 5124:case 35670:return PW;case 35667:case 35671:return FW;case 35668:case 35672:return LW;case 35669:case 35673:return kW;case 5125:return UW;case 36294:return BW;case 36295:return VW;case 36296:return HW;case 35678:case 36198:case 36298:case 36306:case 35682:return zW;case 35679:case 36299:case 36307:return jW;case 35680:case 36300:case 36308:case 36293:return GW;case 36289:case 36303:case 36311:case 36292:return WW}}var Ww=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=CW(t.type)}},$w=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=$W(t.type)}},qw=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},Gw=/(\w+)(\])?(\[|\.)?/g;function UN(n,e){n.seq.push(e),n.map[e.id]=e}function qW(n,e,t){let i=n.name,r=i.length;for(Gw.lastIndex=0;;){let o=Gw.exec(i),s=Gw.lastIndex,a=o[1],l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===r){UN(t,c===void 0?new Ww(a,n,e):new $w(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new qw(a),UN(t,d)),t=d}}}var jc=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);qW(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function BN(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var XW=37297,YW=0;function ZW(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var VN=new yt;function KW(n){Bt._getMatrix(VN,Bt.workingColorSpace,n);let e=`mat3( ${VN.elements.map(t=>t.toFixed(4))} )`;switch(Bt.getTransfer(n)){case qd:return[e,"LinearTransferOETF"];case Zt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function HN(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+r+`

`+ZW(n.getShaderSource(e),s)}else return r}function JW(n,e){let t=KW(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function QW(n,e){let t;switch(e){case K1:t="Linear";break;case J1:t="Reinhard";break;case Q1:t="Cineon";break;case eN:t="ACESFilmic";break;case nN:t="AgX";break;case iN:t="Neutral";break;case tN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Uv=new A;function e5(){Bt.getLuminanceCoefficients(Uv);let n=Uv.x.toFixed(4),e=Uv.y.toFixed(4),t=Uv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function t5(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Tf).join(`
`)}function n5(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function i5(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function Tf(n){return n!==""}function zN(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jN(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var r5=/^[ \t]*#include +<([\w\d./]+)>/gm;function Xw(n){return n.replace(r5,s5)}var o5=new Map;function s5(n,e){let t=Ct[e];if(t===void 0){let i=o5.get(e);if(i!==void 0)t=Ct[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Xw(t)}var a5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function GN(n){return n.replace(a5,l5)}function l5(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function WN(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function c5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===gw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Fc?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Qr&&(e="SHADOWMAP_TYPE_VSM"),e}function u5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Wa:case $a:e="ENVMAP_TYPE_CUBE";break;case bf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function d5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case $a:e="ENVMAP_MODE_REFRACTION";break}return e}function f5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bw:e="ENVMAP_BLENDING_MULTIPLY";break;case Y1:e="ENVMAP_BLENDING_MIX";break;case Z1:e="ENVMAP_BLENDING_ADD";break}return e}function h5(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function p5(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,l=c5(t),c=u5(t),u=d5(t),d=f5(t),h=h5(t),f=t5(t),m=n5(o),v=r.createProgram(),g,p,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Tf).join(`
`),g.length>0&&(g+=`
`),p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Tf).join(`
`),p.length>0&&(p+=`
`)):(g=[WN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Tf).join(`
`),p=[WN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==$o?"#define TONE_MAPPING":"",t.toneMapping!==$o?Ct.tonemapping_pars_fragment:"",t.toneMapping!==$o?QW("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ct.colorspace_pars_fragment,JW("linearToOutputTexel",t.outputColorSpace),e5(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Tf).join(`
`)),s=Xw(s),s=zN(s,t),s=jN(s,t),a=Xw(a),a=zN(a,t),a=jN(a,t),s=GN(s),a=GN(a),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["#define varying in",t.glslVersion===Rw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Rw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);let w=T+g+s,y=T+p+a,N=BN(r,r.VERTEX_SHADER,w),R=BN(r,r.FRAGMENT_SHADER,y);r.attachShader(v,N),r.attachShader(v,R),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function D(I){if(n.debug.checkShaderErrors){let H=r.getProgramInfoLog(v).trim(),U=r.getShaderInfoLog(N).trim(),X=r.getShaderInfoLog(R).trim(),q=!0,W=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,v,N,R);else{let Q=HN(r,N,"vertex"),z=HN(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+H+`
`+Q+`
`+z)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(U===""||X==="")&&(W=!1);W&&(I.diagnostics={runnable:q,programLog:H,vertexShader:{log:U,prefix:g},fragmentShader:{log:X,prefix:p}})}r.deleteShader(N),r.deleteShader(R),P=new jc(r,v),E=i5(r,v)}let P;this.getUniforms=function(){return P===void 0&&D(this),P};let E;this.getAttributes=function(){return E===void 0&&D(this),E};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=r.getProgramParameter(v,XW)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=YW++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=N,this.fragmentShader=R,this}var m5=0,Yw=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new Zw(e),t.set(e,i)),i}},Zw=class{constructor(e){this.id=m5++,this.code=e,this.usedTimes=0}};function g5(n,e,t,i,r,o,s){let a=new Cc,l=new Yw,c=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(E){return c.add(E),E===0?"uv":`uv${E}`}function g(E,b,I,H,U){let X=H.fog,q=U.geometry,W=E.isMeshStandardMaterial?H.environment:null,Q=(E.isMeshStandardMaterial?t:e).get(E.envMap||W),z=Q&&Q.mapping===bf?Q.image.height:null,pe=m[E.type];E.precision!==null&&(f=r.getMaxPrecision(E.precision),f!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",f,"instead."));let Ee=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,Ie=Ee!==void 0?Ee.length:0,_t=0;q.morphAttributes.position!==void 0&&(_t=1),q.morphAttributes.normal!==void 0&&(_t=2),q.morphAttributes.color!==void 0&&(_t=3);let Pt,Y,de,ke;if(pe){let Wt=to[pe];Pt=Wt.vertexShader,Y=Wt.fragmentShader}else Pt=E.vertexShader,Y=E.fragmentShader,l.update(E),de=l.getVertexShaderID(E),ke=l.getFragmentShaderID(E);let xe=n.getRenderTarget(),Ue=n.state.buffers.depth.getReversed(),bt=U.isInstancedMesh===!0,je=U.isBatchedMesh===!0,sn=!!E.map,Ut=!!E.matcap,xt=!!Q,S=!!E.aoMap,fe=!!E.lightMap,ie=!!E.bumpMap,he=!!E.normalMap,Z=!!E.displacementMap,we=!!E.emissiveMap,oe=!!E.metalnessMap,Me=!!E.roughnessMap,pt=E.anisotropy>0,C=E.clearcoat>0,_=E.dispersion>0,k=E.iridescence>0,j=E.sheen>0,ee=E.transmission>0,G=pt&&!!E.anisotropyMap,Oe=C&&!!E.clearcoatMap,me=C&&!!E.clearcoatNormalMap,Ae=C&&!!E.clearcoatRoughnessMap,Pe=k&&!!E.iridescenceMap,te=k&&!!E.iridescenceThicknessMap,Se=j&&!!E.sheenColorMap,Ke=j&&!!E.sheenRoughnessMap,Xe=!!E.specularMap,ge=!!E.specularColorMap,ut=!!E.specularIntensityMap,O=ee&&!!E.transmissionMap,_e=ee&&!!E.thicknessMap,re=!!E.gradientMap,De=!!E.alphaMap,se=E.alphaTest>0,K=!!E.alphaHash,Re=!!E.extensions,mt=$o;E.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(mt=n.toneMapping);let an={shaderID:pe,shaderType:E.type,shaderName:E.name,vertexShader:Pt,fragmentShader:Y,defines:E.defines,customVertexShaderID:de,customFragmentShaderID:ke,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:f,batching:je,batchingColor:je&&U._colorsTexture!==null,instancing:bt,instancingColor:bt&&U.instanceColor!==null,instancingMorph:bt&&U.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:xe===null?n.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:La,alphaToCoverage:!!E.alphaToCoverage,map:sn,matcap:Ut,envMap:xt,envMapMode:xt&&Q.mapping,envMapCubeUVHeight:z,aoMap:S,lightMap:fe,bumpMap:ie,normalMap:he,displacementMap:h&&Z,emissiveMap:we,normalMapObjectSpace:he&&E.normalMapType===aN,normalMapTangentSpace:he&&E.normalMapType===Iw,metalnessMap:oe,roughnessMap:Me,anisotropy:pt,anisotropyMap:G,clearcoat:C,clearcoatMap:Oe,clearcoatNormalMap:me,clearcoatRoughnessMap:Ae,dispersion:_,iridescence:k,iridescenceMap:Pe,iridescenceThicknessMap:te,sheen:j,sheenColorMap:Se,sheenRoughnessMap:Ke,specularMap:Xe,specularColorMap:ge,specularIntensityMap:ut,transmission:ee,transmissionMap:O,thicknessMap:_e,gradientMap:re,opaque:E.transparent===!1&&E.blending===Pa&&E.alphaToCoverage===!1,alphaMap:De,alphaTest:se,alphaHash:K,combine:E.combine,mapUv:sn&&v(E.map.channel),aoMapUv:S&&v(E.aoMap.channel),lightMapUv:fe&&v(E.lightMap.channel),bumpMapUv:ie&&v(E.bumpMap.channel),normalMapUv:he&&v(E.normalMap.channel),displacementMapUv:Z&&v(E.displacementMap.channel),emissiveMapUv:we&&v(E.emissiveMap.channel),metalnessMapUv:oe&&v(E.metalnessMap.channel),roughnessMapUv:Me&&v(E.roughnessMap.channel),anisotropyMapUv:G&&v(E.anisotropyMap.channel),clearcoatMapUv:Oe&&v(E.clearcoatMap.channel),clearcoatNormalMapUv:me&&v(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ae&&v(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Pe&&v(E.iridescenceMap.channel),iridescenceThicknessMapUv:te&&v(E.iridescenceThicknessMap.channel),sheenColorMapUv:Se&&v(E.sheenColorMap.channel),sheenRoughnessMapUv:Ke&&v(E.sheenRoughnessMap.channel),specularMapUv:Xe&&v(E.specularMap.channel),specularColorMapUv:ge&&v(E.specularColorMap.channel),specularIntensityMapUv:ut&&v(E.specularIntensityMap.channel),transmissionMapUv:O&&v(E.transmissionMap.channel),thicknessMapUv:_e&&v(E.thicknessMap.channel),alphaMapUv:De&&v(E.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(he||pt),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:U.isPoints===!0&&!!q.attributes.uv&&(sn||De),fog:!!X,useFog:E.fog===!0,fogExp2:!!X&&X.isFogExp2,flatShading:E.flatShading===!0&&E.wireframe===!1,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Ue,skinning:U.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:_t,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:E.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:mt,decodeVideoTexture:sn&&E.map.isVideoTexture===!0&&Bt.getTransfer(E.map.colorSpace)===Zt,decodeVideoTextureEmissive:we&&E.emissiveMap.isVideoTexture===!0&&Bt.getTransfer(E.emissiveMap.colorSpace)===Zt,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Ki,flipSided:E.side===bi,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:Re&&E.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Re&&E.extensions.multiDraw===!0||je)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return an.vertexUv1s=c.has(1),an.vertexUv2s=c.has(2),an.vertexUv3s=c.has(3),c.clear(),an}function p(E){let b=[];if(E.shaderID?b.push(E.shaderID):(b.push(E.customVertexShaderID),b.push(E.customFragmentShaderID)),E.defines!==void 0)for(let I in E.defines)b.push(I),b.push(E.defines[I]);return E.isRawShaderMaterial===!1&&(T(b,E),w(b,E),b.push(n.outputColorSpace)),b.push(E.customProgramCacheKey),b.join()}function T(E,b){E.push(b.precision),E.push(b.outputColorSpace),E.push(b.envMapMode),E.push(b.envMapCubeUVHeight),E.push(b.mapUv),E.push(b.alphaMapUv),E.push(b.lightMapUv),E.push(b.aoMapUv),E.push(b.bumpMapUv),E.push(b.normalMapUv),E.push(b.displacementMapUv),E.push(b.emissiveMapUv),E.push(b.metalnessMapUv),E.push(b.roughnessMapUv),E.push(b.anisotropyMapUv),E.push(b.clearcoatMapUv),E.push(b.clearcoatNormalMapUv),E.push(b.clearcoatRoughnessMapUv),E.push(b.iridescenceMapUv),E.push(b.iridescenceThicknessMapUv),E.push(b.sheenColorMapUv),E.push(b.sheenRoughnessMapUv),E.push(b.specularMapUv),E.push(b.specularColorMapUv),E.push(b.specularIntensityMapUv),E.push(b.transmissionMapUv),E.push(b.thicknessMapUv),E.push(b.combine),E.push(b.fogExp2),E.push(b.sizeAttenuation),E.push(b.morphTargetsCount),E.push(b.morphAttributeCount),E.push(b.numDirLights),E.push(b.numPointLights),E.push(b.numSpotLights),E.push(b.numSpotLightMaps),E.push(b.numHemiLights),E.push(b.numRectAreaLights),E.push(b.numDirLightShadows),E.push(b.numPointLightShadows),E.push(b.numSpotLightShadows),E.push(b.numSpotLightShadowsWithMaps),E.push(b.numLightProbes),E.push(b.shadowMapType),E.push(b.toneMapping),E.push(b.numClippingPlanes),E.push(b.numClipIntersection),E.push(b.depthPacking)}function w(E,b){a.disableAll(),b.supportsVertexTextures&&a.enable(0),b.instancing&&a.enable(1),b.instancingColor&&a.enable(2),b.instancingMorph&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUv1s&&a.enable(13),b.vertexUv2s&&a.enable(14),b.vertexUv3s&&a.enable(15),b.vertexTangents&&a.enable(16),b.anisotropy&&a.enable(17),b.alphaHash&&a.enable(18),b.batching&&a.enable(19),b.dispersion&&a.enable(20),b.batchingColor&&a.enable(21),b.gradientMap&&a.enable(22),E.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.reverseDepthBuffer&&a.enable(4),b.skinning&&a.enable(5),b.morphTargets&&a.enable(6),b.morphNormals&&a.enable(7),b.morphColors&&a.enable(8),b.premultipliedAlpha&&a.enable(9),b.shadowMapEnabled&&a.enable(10),b.doubleSided&&a.enable(11),b.flipSided&&a.enable(12),b.useDepthPacking&&a.enable(13),b.dithering&&a.enable(14),b.transmission&&a.enable(15),b.sheen&&a.enable(16),b.opaque&&a.enable(17),b.pointsUvs&&a.enable(18),b.decodeVideoTexture&&a.enable(19),b.decodeVideoTextureEmissive&&a.enable(20),b.alphaToCoverage&&a.enable(21),E.push(a.mask)}function y(E){let b=m[E.type],I;if(b){let H=to[b];I=bN.clone(H.uniforms)}else I=E.uniforms;return I}function N(E,b){let I;for(let H=0,U=u.length;H<U;H++){let X=u[H];if(X.cacheKey===b){I=X,++I.usedTimes;break}}return I===void 0&&(I=new p5(n,b,E,o),u.push(I)),I}function R(E){if(--E.usedTimes===0){let b=u.indexOf(E);u[b]=u[u.length-1],u.pop(),E.destroy()}}function D(E){l.remove(E)}function P(){l.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:y,acquireProgram:N,releaseProgram:R,releaseShaderCache:D,programs:u,dispose:P}}function v5(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function _5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function $N(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qN(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(d,h,f,m,v,g){let p=n[e];return p===void 0?(p={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:v,group:g},n[e]=p):(p.id=d.id,p.object=d,p.geometry=h,p.material=f,p.groupOrder=m,p.renderOrder=d.renderOrder,p.z=v,p.group=g),e++,p}function a(d,h,f,m,v,g){let p=s(d,h,f,m,v,g);f.transmission>0?i.push(p):f.transparent===!0?r.push(p):t.push(p)}function l(d,h,f,m,v,g){let p=s(d,h,f,m,v,g);f.transmission>0?i.unshift(p):f.transparent===!0?r.unshift(p):t.unshift(p)}function c(d,h){t.length>1&&t.sort(d||_5),i.length>1&&i.sort(h||$N),r.length>1&&r.sort(h||$N)}function u(){for(let d=e,h=n.length;d<h;d++){let f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:u,sort:c}}function y5(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new qN,n.set(i,[s])):r>=o.length?(s=new qN,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function b5(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new A,color:new St};break;case"SpotLight":t={position:new A,direction:new A,color:new St,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new A,color:new St,distance:0,decay:0};break;case"HemisphereLight":t={direction:new A,skyColor:new St,groundColor:new St};break;case"RectAreaLight":t={color:new St,position:new A,halfWidth:new A,halfHeight:new A};break}return n[e.id]=t,t}}}function x5(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var E5=0;function w5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function M5(n){let e=new b5,t=x5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new A);let r=new A,o=new rn,s=new rn;function a(c){let u=0,d=0,h=0;for(let E=0;E<9;E++)i.probe[E].set(0,0,0);let f=0,m=0,v=0,g=0,p=0,T=0,w=0,y=0,N=0,R=0,D=0;c.sort(w5);for(let E=0,b=c.length;E<b;E++){let I=c[E],H=I.color,U=I.intensity,X=I.distance,q=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)u+=H.r*U,d+=H.g*U,h+=H.b*U;else if(I.isLightProbe){for(let W=0;W<9;W++)i.probe[W].addScaledVector(I.sh.coefficients[W],U);D++}else if(I.isDirectionalLight){let W=e.get(I);if(W.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){let Q=I.shadow,z=t.get(I);z.shadowIntensity=Q.intensity,z.shadowBias=Q.bias,z.shadowNormalBias=Q.normalBias,z.shadowRadius=Q.radius,z.shadowMapSize=Q.mapSize,i.directionalShadow[f]=z,i.directionalShadowMap[f]=q,i.directionalShadowMatrix[f]=I.shadow.matrix,T++}i.directional[f]=W,f++}else if(I.isSpotLight){let W=e.get(I);W.position.setFromMatrixPosition(I.matrixWorld),W.color.copy(H).multiplyScalar(U),W.distance=X,W.coneCos=Math.cos(I.angle),W.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),W.decay=I.decay,i.spot[v]=W;let Q=I.shadow;if(I.map&&(i.spotLightMap[N]=I.map,N++,Q.updateMatrices(I),I.castShadow&&R++),i.spotLightMatrix[v]=Q.matrix,I.castShadow){let z=t.get(I);z.shadowIntensity=Q.intensity,z.shadowBias=Q.bias,z.shadowNormalBias=Q.normalBias,z.shadowRadius=Q.radius,z.shadowMapSize=Q.mapSize,i.spotShadow[v]=z,i.spotShadowMap[v]=q,y++}v++}else if(I.isRectAreaLight){let W=e.get(I);W.color.copy(H).multiplyScalar(U),W.halfWidth.set(I.width*.5,0,0),W.halfHeight.set(0,I.height*.5,0),i.rectArea[g]=W,g++}else if(I.isPointLight){let W=e.get(I);if(W.color.copy(I.color).multiplyScalar(I.intensity),W.distance=I.distance,W.decay=I.decay,I.castShadow){let Q=I.shadow,z=t.get(I);z.shadowIntensity=Q.intensity,z.shadowBias=Q.bias,z.shadowNormalBias=Q.normalBias,z.shadowRadius=Q.radius,z.shadowMapSize=Q.mapSize,z.shadowCameraNear=Q.camera.near,z.shadowCameraFar=Q.camera.far,i.pointShadow[m]=z,i.pointShadowMap[m]=q,i.pointShadowMatrix[m]=I.shadow.matrix,w++}i.point[m]=W,m++}else if(I.isHemisphereLight){let W=e.get(I);W.skyColor.copy(I.color).multiplyScalar(U),W.groundColor.copy(I.groundColor).multiplyScalar(U),i.hemi[p]=W,p++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ve.LTC_FLOAT_1,i.rectAreaLTC2=ve.LTC_FLOAT_2):(i.rectAreaLTC1=ve.LTC_HALF_1,i.rectAreaLTC2=ve.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let P=i.hash;(P.directionalLength!==f||P.pointLength!==m||P.spotLength!==v||P.rectAreaLength!==g||P.hemiLength!==p||P.numDirectionalShadows!==T||P.numPointShadows!==w||P.numSpotShadows!==y||P.numSpotMaps!==N||P.numLightProbes!==D)&&(i.directional.length=f,i.spot.length=v,i.rectArea.length=g,i.point.length=m,i.hemi.length=p,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=y+N-R,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=D,P.directionalLength=f,P.pointLength=m,P.spotLength=v,P.rectAreaLength=g,P.hemiLength=p,P.numDirectionalShadows=T,P.numPointShadows=w,P.numSpotShadows=y,P.numSpotMaps=N,P.numLightProbes=D,i.version=E5++)}function l(c,u){let d=0,h=0,f=0,m=0,v=0,g=u.matrixWorldInverse;for(let p=0,T=c.length;p<T;p++){let w=c[p];if(w.isDirectionalLight){let y=i.directional[d];y.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),d++}else if(w.isSpotLight){let y=i.spot[f];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(g),y.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),f++}else if(w.isRectAreaLight){let y=i.rectArea[m];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(g),s.identity(),o.copy(w.matrixWorld),o.premultiply(g),s.extractRotation(o),y.halfWidth.set(w.width*.5,0,0),y.halfHeight.set(0,w.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),m++}else if(w.isPointLight){let y=i.point[h];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(g),h++}else if(w.isHemisphereLight){let y=i.hemi[v];y.direction.setFromMatrixPosition(w.matrixWorld),y.direction.transformDirection(g),v++}}}return{setup:a,setupView:l,state:i}}function XN(n){let e=new M5(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function o(u){t.push(u)}function s(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}let c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function S5(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new XN(n),e.set(r,[a])):o>=s.length?(a=new XN(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var C5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,T5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function D5(n,e,t){let i=new Ic,r=new ue,o=new ue,s=new Yt,a=new Pg({depthPacking:sN}),l=new Fg,c={},u=t.maxTextureSize,d={[zo]:bi,[bi]:zo,[Ki]:Ki},h=new Or({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ue},radius:{value:4}},vertexShader:C5,fragmentShader:T5}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let m=new yi;m.setAttribute("position",new Xi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new On(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gw;let p=this.type;this.render=function(R,D,P){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||R.length===0)return;let E=n.getRenderTarget(),b=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),H=n.state;H.setBlending(Wo),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);let U=p!==Qr&&this.type===Qr,X=p===Qr&&this.type!==Qr;for(let q=0,W=R.length;q<W;q++){let Q=R[q],z=Q.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;r.copy(z.mapSize);let pe=z.getFrameExtents();if(r.multiply(pe),o.copy(z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/pe.x),r.x=o.x*pe.x,z.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/pe.y),r.y=o.y*pe.y,z.mapSize.y=o.y)),z.map===null||U===!0||X===!0){let Ie=this.type!==Qr?{minFilter:pr,magFilter:pr}:{};z.map!==null&&z.map.dispose(),z.map=new Zr(r.x,r.y,Ie),z.map.texture.name=Q.name+".shadowMap",z.camera.updateProjectionMatrix()}n.setRenderTarget(z.map),n.clear();let Ee=z.getViewportCount();for(let Ie=0;Ie<Ee;Ie++){let _t=z.getViewport(Ie);s.set(o.x*_t.x,o.y*_t.y,o.x*_t.z,o.y*_t.w),H.viewport(s),z.updateMatrices(Q,Ie),i=z.getFrustum(),y(D,P,z.camera,Q,this.type)}z.isPointLightShadow!==!0&&this.type===Qr&&T(z,P),z.needsUpdate=!1}p=this.type,g.needsUpdate=!1,n.setRenderTarget(E,b,I)};function T(R,D){let P=e.update(v);h.defines.VSM_SAMPLES!==R.blurSamples&&(h.defines.VSM_SAMPLES=R.blurSamples,f.defines.VSM_SAMPLES=R.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new Zr(r.x,r.y)),h.uniforms.shadow_pass.value=R.map.texture,h.uniforms.resolution.value=R.mapSize,h.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(D,null,P,h,v,null),f.uniforms.shadow_pass.value=R.mapPass.texture,f.uniforms.resolution.value=R.mapSize,f.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(D,null,P,f,v,null)}function w(R,D,P,E){let b=null,I=P.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(I!==void 0)b=I;else if(b=P.isPointLight===!0?l:a,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0||D.alphaToCoverage===!0){let H=b.uuid,U=D.uuid,X=c[H];X===void 0&&(X={},c[H]=X);let q=X[U];q===void 0&&(q=b.clone(),X[U]=q,D.addEventListener("dispose",N)),b=q}if(b.visible=D.visible,b.wireframe=D.wireframe,E===Qr?b.side=D.shadowSide!==null?D.shadowSide:D.side:b.side=D.shadowSide!==null?D.shadowSide:d[D.side],b.alphaMap=D.alphaMap,b.alphaTest=D.alphaToCoverage===!0?.5:D.alphaTest,b.map=D.map,b.clipShadows=D.clipShadows,b.clippingPlanes=D.clippingPlanes,b.clipIntersection=D.clipIntersection,b.displacementMap=D.displacementMap,b.displacementScale=D.displacementScale,b.displacementBias=D.displacementBias,b.wireframeLinewidth=D.wireframeLinewidth,b.linewidth=D.linewidth,P.isPointLight===!0&&b.isMeshDistanceMaterial===!0){let H=n.properties.get(b);H.light=P}return b}function y(R,D,P,E,b){if(R.visible===!1)return;if(R.layers.test(D.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&b===Qr)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,R.matrixWorld);let U=e.update(R),X=R.material;if(Array.isArray(X)){let q=U.groups;for(let W=0,Q=q.length;W<Q;W++){let z=q[W],pe=X[z.materialIndex];if(pe&&pe.visible){let Ee=w(R,pe,E,b);R.onBeforeShadow(n,R,D,P,U,Ee,z),n.renderBufferDirect(P,null,U,Ee,R,z),R.onAfterShadow(n,R,D,P,U,Ee,z)}}}else if(X.visible){let q=w(R,X,E,b);R.onBeforeShadow(n,R,D,P,U,q,null),n.renderBufferDirect(P,null,U,q,R,null),R.onAfterShadow(n,R,D,P,U,q,null)}}let H=R.children;for(let U=0,X=H.length;U<X;U++)y(H[U],D,P,E,b)}function N(R){R.target.removeEventListener("dispose",N);for(let P in c){let E=c[P],b=R.target.uuid;b in E&&(E[b].dispose(),delete E[b])}}}var I5={[Xg]:Yg,[Zg]:Qg,[Kg]:ev,[Fa]:Jg,[Yg]:Xg,[Qg]:Zg,[ev]:Kg,[Jg]:Fa};function A5(n,e){function t(){let O=!1,_e=new Yt,re=null,De=new Yt(0,0,0,0);return{setMask:function(se){re!==se&&!O&&(n.colorMask(se,se,se,se),re=se)},setLocked:function(se){O=se},setClear:function(se,K,Re,mt,an){an===!0&&(se*=mt,K*=mt,Re*=mt),_e.set(se,K,Re,mt),De.equals(_e)===!1&&(n.clearColor(se,K,Re,mt),De.copy(_e))},reset:function(){O=!1,re=null,De.set(-1,0,0,0)}}}function i(){let O=!1,_e=!1,re=null,De=null,se=null;return{setReversed:function(K){if(_e!==K){let Re=e.get("EXT_clip_control");K?Re.clipControlEXT(Re.LOWER_LEFT_EXT,Re.ZERO_TO_ONE_EXT):Re.clipControlEXT(Re.LOWER_LEFT_EXT,Re.NEGATIVE_ONE_TO_ONE_EXT),_e=K;let mt=se;se=null,this.setClear(mt)}},getReversed:function(){return _e},setTest:function(K){K?xe(n.DEPTH_TEST):Ue(n.DEPTH_TEST)},setMask:function(K){re!==K&&!O&&(n.depthMask(K),re=K)},setFunc:function(K){if(_e&&(K=I5[K]),De!==K){switch(K){case Xg:n.depthFunc(n.NEVER);break;case Yg:n.depthFunc(n.ALWAYS);break;case Zg:n.depthFunc(n.LESS);break;case Fa:n.depthFunc(n.LEQUAL);break;case Kg:n.depthFunc(n.EQUAL);break;case Jg:n.depthFunc(n.GEQUAL);break;case Qg:n.depthFunc(n.GREATER);break;case ev:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}De=K}},setLocked:function(K){O=K},setClear:function(K){se!==K&&(_e&&(K=1-K),n.clearDepth(K),se=K)},reset:function(){O=!1,re=null,De=null,se=null,_e=!1}}}function r(){let O=!1,_e=null,re=null,De=null,se=null,K=null,Re=null,mt=null,an=null;return{setTest:function(Wt){O||(Wt?xe(n.STENCIL_TEST):Ue(n.STENCIL_TEST))},setMask:function(Wt){_e!==Wt&&!O&&(n.stencilMask(Wt),_e=Wt)},setFunc:function(Wt,br,no){(re!==Wt||De!==br||se!==no)&&(n.stencilFunc(Wt,br,no),re=Wt,De=br,se=no)},setOp:function(Wt,br,no){(K!==Wt||Re!==br||mt!==no)&&(n.stencilOp(Wt,br,no),K=Wt,Re=br,mt=no)},setLocked:function(Wt){O=Wt},setClear:function(Wt){an!==Wt&&(n.clearStencil(Wt),an=Wt)},reset:function(){O=!1,_e=null,re=null,De=null,se=null,K=null,Re=null,mt=null,an=null}}}let o=new t,s=new i,a=new r,l=new WeakMap,c=new WeakMap,u={},d={},h=new WeakMap,f=[],m=null,v=!1,g=null,p=null,T=null,w=null,y=null,N=null,R=null,D=new St(0,0,0),P=0,E=!1,b=null,I=null,H=null,U=null,X=null,q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),W=!1,Q=0,z=n.getParameter(n.VERSION);z.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(z)[1]),W=Q>=1):z.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),W=Q>=2);let pe=null,Ee={},Ie=n.getParameter(n.SCISSOR_BOX),_t=n.getParameter(n.VIEWPORT),Pt=new Yt().fromArray(Ie),Y=new Yt().fromArray(_t);function de(O,_e,re,De){let se=new Uint8Array(4),K=n.createTexture();n.bindTexture(O,K),n.texParameteri(O,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(O,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Re=0;Re<re;Re++)O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY?n.texImage3D(_e,0,n.RGBA,1,1,De,0,n.RGBA,n.UNSIGNED_BYTE,se):n.texImage2D(_e+Re,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,se);return K}let ke={};ke[n.TEXTURE_2D]=de(n.TEXTURE_2D,n.TEXTURE_2D,1),ke[n.TEXTURE_CUBE_MAP]=de(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ke[n.TEXTURE_2D_ARRAY]=de(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ke[n.TEXTURE_3D]=de(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),xe(n.DEPTH_TEST),s.setFunc(Fa),ie(!1),he(mw),xe(n.CULL_FACE),S(Wo);function xe(O){u[O]!==!0&&(n.enable(O),u[O]=!0)}function Ue(O){u[O]!==!1&&(n.disable(O),u[O]=!1)}function bt(O,_e){return d[O]!==_e?(n.bindFramebuffer(O,_e),d[O]=_e,O===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=_e),O===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=_e),!0):!1}function je(O,_e){let re=f,De=!1;if(O){re=h.get(_e),re===void 0&&(re=[],h.set(_e,re));let se=O.textures;if(re.length!==se.length||re[0]!==n.COLOR_ATTACHMENT0){for(let K=0,Re=se.length;K<Re;K++)re[K]=n.COLOR_ATTACHMENT0+K;re.length=se.length,De=!0}}else re[0]!==n.BACK&&(re[0]=n.BACK,De=!0);De&&n.drawBuffers(re)}function sn(O){return m!==O?(n.useProgram(O),m=O,!0):!1}let Ut={[As]:n.FUNC_ADD,[N1]:n.FUNC_SUBTRACT,[O1]:n.FUNC_REVERSE_SUBTRACT};Ut[P1]=n.MIN,Ut[F1]=n.MAX;let xt={[L1]:n.ZERO,[k1]:n.ONE,[U1]:n.SRC_COLOR,[pg]:n.SRC_ALPHA,[G1]:n.SRC_ALPHA_SATURATE,[z1]:n.DST_COLOR,[V1]:n.DST_ALPHA,[B1]:n.ONE_MINUS_SRC_COLOR,[mg]:n.ONE_MINUS_SRC_ALPHA,[j1]:n.ONE_MINUS_DST_COLOR,[H1]:n.ONE_MINUS_DST_ALPHA,[W1]:n.CONSTANT_COLOR,[$1]:n.ONE_MINUS_CONSTANT_COLOR,[q1]:n.CONSTANT_ALPHA,[X1]:n.ONE_MINUS_CONSTANT_ALPHA};function S(O,_e,re,De,se,K,Re,mt,an,Wt){if(O===Wo){v===!0&&(Ue(n.BLEND),v=!1);return}if(v===!1&&(xe(n.BLEND),v=!0),O!==R1){if(O!==g||Wt!==E){if((p!==As||y!==As)&&(n.blendEquation(n.FUNC_ADD),p=As,y=As),Wt)switch(O){case Pa:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case vw:n.blendFunc(n.ONE,n.ONE);break;case _w:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yw:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}else switch(O){case Pa:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case vw:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case _w:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case yw:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}T=null,w=null,N=null,R=null,D.set(0,0,0),P=0,g=O,E=Wt}return}se=se||_e,K=K||re,Re=Re||De,(_e!==p||se!==y)&&(n.blendEquationSeparate(Ut[_e],Ut[se]),p=_e,y=se),(re!==T||De!==w||K!==N||Re!==R)&&(n.blendFuncSeparate(xt[re],xt[De],xt[K],xt[Re]),T=re,w=De,N=K,R=Re),(mt.equals(D)===!1||an!==P)&&(n.blendColor(mt.r,mt.g,mt.b,an),D.copy(mt),P=an),g=O,E=!1}function fe(O,_e){O.side===Ki?Ue(n.CULL_FACE):xe(n.CULL_FACE);let re=O.side===bi;_e&&(re=!re),ie(re),O.blending===Pa&&O.transparent===!1?S(Wo):S(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),s.setFunc(O.depthFunc),s.setTest(O.depthTest),s.setMask(O.depthWrite),o.setMask(O.colorWrite);let De=O.stencilWrite;a.setTest(De),De&&(a.setMask(O.stencilWriteMask),a.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),a.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),we(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),O.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):Ue(n.SAMPLE_ALPHA_TO_COVERAGE)}function ie(O){b!==O&&(O?n.frontFace(n.CW):n.frontFace(n.CCW),b=O)}function he(O){O!==I1?(xe(n.CULL_FACE),O!==I&&(O===mw?n.cullFace(n.BACK):O===A1?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ue(n.CULL_FACE),I=O}function Z(O){O!==H&&(W&&n.lineWidth(O),H=O)}function we(O,_e,re){O?(xe(n.POLYGON_OFFSET_FILL),(U!==_e||X!==re)&&(n.polygonOffset(_e,re),U=_e,X=re)):Ue(n.POLYGON_OFFSET_FILL)}function oe(O){O?xe(n.SCISSOR_TEST):Ue(n.SCISSOR_TEST)}function Me(O){O===void 0&&(O=n.TEXTURE0+q-1),pe!==O&&(n.activeTexture(O),pe=O)}function pt(O,_e,re){re===void 0&&(pe===null?re=n.TEXTURE0+q-1:re=pe);let De=Ee[re];De===void 0&&(De={type:void 0,texture:void 0},Ee[re]=De),(De.type!==O||De.texture!==_e)&&(pe!==re&&(n.activeTexture(re),pe=re),n.bindTexture(O,_e||ke[O]),De.type=O,De.texture=_e)}function C(){let O=Ee[pe];O!==void 0&&O.type!==void 0&&(n.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)}function _(){try{n.compressedTexImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function k(){try{n.compressedTexImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function j(){try{n.texSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ee(){try{n.texSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function G(){try{n.compressedTexSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Oe(){try{n.compressedTexSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function me(){try{n.texStorage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ae(){try{n.texStorage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Pe(){try{n.texImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function te(){try{n.texImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Se(O){Pt.equals(O)===!1&&(n.scissor(O.x,O.y,O.z,O.w),Pt.copy(O))}function Ke(O){Y.equals(O)===!1&&(n.viewport(O.x,O.y,O.z,O.w),Y.copy(O))}function Xe(O,_e){let re=c.get(_e);re===void 0&&(re=new WeakMap,c.set(_e,re));let De=re.get(O);De===void 0&&(De=n.getUniformBlockIndex(_e,O.name),re.set(O,De))}function ge(O,_e){let De=c.get(_e).get(O);l.get(_e)!==De&&(n.uniformBlockBinding(_e,De,O.__bindingPointIndex),l.set(_e,De))}function ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},pe=null,Ee={},d={},h=new WeakMap,f=[],m=null,v=!1,g=null,p=null,T=null,w=null,y=null,N=null,R=null,D=new St(0,0,0),P=0,E=!1,b=null,I=null,H=null,U=null,X=null,Pt.set(0,0,n.canvas.width,n.canvas.height),Y.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:xe,disable:Ue,bindFramebuffer:bt,drawBuffers:je,useProgram:sn,setBlending:S,setMaterial:fe,setFlipSided:ie,setCullFace:he,setLineWidth:Z,setPolygonOffset:we,setScissorTest:oe,activeTexture:Me,bindTexture:pt,unbindTexture:C,compressedTexImage2D:_,compressedTexImage3D:k,texImage2D:Pe,texImage3D:te,updateUBOMapping:Xe,uniformBlockBinding:ge,texStorage2D:me,texStorage3D:Ae,texSubImage2D:j,texSubImage3D:ee,compressedTexSubImage2D:G,compressedTexSubImage3D:Oe,scissor:Se,viewport:Ke,reset:ut}}function R5(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ue,u=new WeakMap,d,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(C,_){return f?new OffscreenCanvas(C,_):wc("canvas")}function v(C,_,k){let j=1,ee=pt(C);if((ee.width>k||ee.height>k)&&(j=k/Math.max(ee.width,ee.height)),j<1)if(typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap||typeof VideoFrame<"u"&&C instanceof VideoFrame){let G=Math.floor(j*ee.width),Oe=Math.floor(j*ee.height);d===void 0&&(d=m(G,Oe));let me=_?m(G,Oe):d;return me.width=G,me.height=Oe,me.getContext("2d").drawImage(C,0,0,G,Oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+G+"x"+Oe+")."),me}else return"data"in C&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),C;return C}function g(C){return C.generateMipmaps}function p(C){n.generateMipmap(C)}function T(C){return C.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:C.isWebGL3DRenderTarget?n.TEXTURE_3D:C.isWebGLArrayRenderTarget||C.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(C,_,k,j,ee=!1){if(C!==null){if(n[C]!==void 0)return n[C];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+C+"'")}let G=_;if(_===n.RED&&(k===n.FLOAT&&(G=n.R32F),k===n.HALF_FLOAT&&(G=n.R16F),k===n.UNSIGNED_BYTE&&(G=n.R8)),_===n.RED_INTEGER&&(k===n.UNSIGNED_BYTE&&(G=n.R8UI),k===n.UNSIGNED_SHORT&&(G=n.R16UI),k===n.UNSIGNED_INT&&(G=n.R32UI),k===n.BYTE&&(G=n.R8I),k===n.SHORT&&(G=n.R16I),k===n.INT&&(G=n.R32I)),_===n.RG&&(k===n.FLOAT&&(G=n.RG32F),k===n.HALF_FLOAT&&(G=n.RG16F),k===n.UNSIGNED_BYTE&&(G=n.RG8)),_===n.RG_INTEGER&&(k===n.UNSIGNED_BYTE&&(G=n.RG8UI),k===n.UNSIGNED_SHORT&&(G=n.RG16UI),k===n.UNSIGNED_INT&&(G=n.RG32UI),k===n.BYTE&&(G=n.RG8I),k===n.SHORT&&(G=n.RG16I),k===n.INT&&(G=n.RG32I)),_===n.RGB_INTEGER&&(k===n.UNSIGNED_BYTE&&(G=n.RGB8UI),k===n.UNSIGNED_SHORT&&(G=n.RGB16UI),k===n.UNSIGNED_INT&&(G=n.RGB32UI),k===n.BYTE&&(G=n.RGB8I),k===n.SHORT&&(G=n.RGB16I),k===n.INT&&(G=n.RGB32I)),_===n.RGBA_INTEGER&&(k===n.UNSIGNED_BYTE&&(G=n.RGBA8UI),k===n.UNSIGNED_SHORT&&(G=n.RGBA16UI),k===n.UNSIGNED_INT&&(G=n.RGBA32UI),k===n.BYTE&&(G=n.RGBA8I),k===n.SHORT&&(G=n.RGBA16I),k===n.INT&&(G=n.RGBA32I)),_===n.RGB&&k===n.UNSIGNED_INT_5_9_9_9_REV&&(G=n.RGB9_E5),_===n.RGBA){let Oe=ee?qd:Bt.getTransfer(j);k===n.FLOAT&&(G=n.RGBA32F),k===n.HALF_FLOAT&&(G=n.RGBA16F),k===n.UNSIGNED_BYTE&&(G=Oe===Zt?n.SRGB8_ALPHA8:n.RGBA8),k===n.UNSIGNED_SHORT_4_4_4_4&&(G=n.RGBA4),k===n.UNSIGNED_SHORT_5_5_5_1&&(G=n.RGB5_A1)}return(G===n.R16F||G===n.R32F||G===n.RG16F||G===n.RG32F||G===n.RGBA16F||G===n.RGBA32F)&&e.get("EXT_color_buffer_float"),G}function y(C,_){let k;return C?_===null||_===ks||_===Uc?k=n.DEPTH24_STENCIL8:_===eo?k=n.DEPTH32F_STENCIL8:_===Lc&&(k=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):_===null||_===ks||_===Uc?k=n.DEPTH_COMPONENT24:_===eo?k=n.DEPTH_COMPONENT32F:_===Lc&&(k=n.DEPTH_COMPONENT16),k}function N(C,_){return g(C)===!0||C.isFramebufferTexture&&C.minFilter!==pr&&C.minFilter!==Rr?Math.log2(Math.max(_.width,_.height))+1:C.mipmaps!==void 0&&C.mipmaps.length>0?C.mipmaps.length:C.isCompressedTexture&&Array.isArray(C.image)?_.mipmaps.length:1}function R(C){let _=C.target;_.removeEventListener("dispose",R),P(_),_.isVideoTexture&&u.delete(_)}function D(C){let _=C.target;_.removeEventListener("dispose",D),b(_)}function P(C){let _=i.get(C);if(_.__webglInit===void 0)return;let k=C.source,j=h.get(k);if(j){let ee=j[_.__cacheKey];ee.usedTimes--,ee.usedTimes===0&&E(C),Object.keys(j).length===0&&h.delete(k)}i.remove(C)}function E(C){let _=i.get(C);n.deleteTexture(_.__webglTexture);let k=C.source,j=h.get(k);delete j[_.__cacheKey],s.memory.textures--}function b(C){let _=i.get(C);if(C.depthTexture&&(C.depthTexture.dispose(),i.remove(C.depthTexture)),C.isWebGLCubeRenderTarget)for(let j=0;j<6;j++){if(Array.isArray(_.__webglFramebuffer[j]))for(let ee=0;ee<_.__webglFramebuffer[j].length;ee++)n.deleteFramebuffer(_.__webglFramebuffer[j][ee]);else n.deleteFramebuffer(_.__webglFramebuffer[j]);_.__webglDepthbuffer&&n.deleteRenderbuffer(_.__webglDepthbuffer[j])}else{if(Array.isArray(_.__webglFramebuffer))for(let j=0;j<_.__webglFramebuffer.length;j++)n.deleteFramebuffer(_.__webglFramebuffer[j]);else n.deleteFramebuffer(_.__webglFramebuffer);if(_.__webglDepthbuffer&&n.deleteRenderbuffer(_.__webglDepthbuffer),_.__webglMultisampledFramebuffer&&n.deleteFramebuffer(_.__webglMultisampledFramebuffer),_.__webglColorRenderbuffer)for(let j=0;j<_.__webglColorRenderbuffer.length;j++)_.__webglColorRenderbuffer[j]&&n.deleteRenderbuffer(_.__webglColorRenderbuffer[j]);_.__webglDepthRenderbuffer&&n.deleteRenderbuffer(_.__webglDepthRenderbuffer)}let k=C.textures;for(let j=0,ee=k.length;j<ee;j++){let G=i.get(k[j]);G.__webglTexture&&(n.deleteTexture(G.__webglTexture),s.memory.textures--),i.remove(k[j])}i.remove(C)}let I=0;function H(){I=0}function U(){let C=I;return C>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+C+" texture units while this GPU supports only "+r.maxTextures),I+=1,C}function X(C){let _=[];return _.push(C.wrapS),_.push(C.wrapT),_.push(C.wrapR||0),_.push(C.magFilter),_.push(C.minFilter),_.push(C.anisotropy),_.push(C.internalFormat),_.push(C.format),_.push(C.type),_.push(C.generateMipmaps),_.push(C.premultiplyAlpha),_.push(C.flipY),_.push(C.unpackAlignment),_.push(C.colorSpace),_.join()}function q(C,_){let k=i.get(C);if(C.isVideoTexture&&oe(C),C.isRenderTargetTexture===!1&&C.version>0&&k.__version!==C.version){let j=C.image;if(j===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(j.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ke(k,C,_);return}}t.bindTexture(n.TEXTURE_2D,k.__webglTexture,n.TEXTURE0+_)}function W(C,_){let k=i.get(C);if(C.version>0&&k.__version!==C.version){ke(k,C,_);return}t.bindTexture(n.TEXTURE_2D_ARRAY,k.__webglTexture,n.TEXTURE0+_)}function Q(C,_){let k=i.get(C);if(C.version>0&&k.__version!==C.version){ke(k,C,_);return}t.bindTexture(n.TEXTURE_3D,k.__webglTexture,n.TEXTURE0+_)}function z(C,_){let k=i.get(C);if(C.version>0&&k.__version!==C.version){xe(k,C,_);return}t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+_)}let pe={[gg]:n.REPEAT,[Is]:n.CLAMP_TO_EDGE,[vg]:n.MIRRORED_REPEAT},Ee={[pr]:n.NEAREST,[rN]:n.NEAREST_MIPMAP_NEAREST,[xf]:n.NEAREST_MIPMAP_LINEAR,[Rr]:n.LINEAR,[iv]:n.LINEAR_MIPMAP_NEAREST,[Ls]:n.LINEAR_MIPMAP_LINEAR},Ie={[lN]:n.NEVER,[pN]:n.ALWAYS,[cN]:n.LESS,[Aw]:n.LEQUAL,[uN]:n.EQUAL,[hN]:n.GEQUAL,[dN]:n.GREATER,[fN]:n.NOTEQUAL};function _t(C,_){if(_.type===eo&&e.has("OES_texture_float_linear")===!1&&(_.magFilter===Rr||_.magFilter===iv||_.magFilter===xf||_.magFilter===Ls||_.minFilter===Rr||_.minFilter===iv||_.minFilter===xf||_.minFilter===Ls)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(C,n.TEXTURE_WRAP_S,pe[_.wrapS]),n.texParameteri(C,n.TEXTURE_WRAP_T,pe[_.wrapT]),(C===n.TEXTURE_3D||C===n.TEXTURE_2D_ARRAY)&&n.texParameteri(C,n.TEXTURE_WRAP_R,pe[_.wrapR]),n.texParameteri(C,n.TEXTURE_MAG_FILTER,Ee[_.magFilter]),n.texParameteri(C,n.TEXTURE_MIN_FILTER,Ee[_.minFilter]),_.compareFunction&&(n.texParameteri(C,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(C,n.TEXTURE_COMPARE_FUNC,Ie[_.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(_.magFilter===pr||_.minFilter!==xf&&_.minFilter!==Ls||_.type===eo&&e.has("OES_texture_float_linear")===!1)return;if(_.anisotropy>1||i.get(_).__currentAnisotropy){let k=e.get("EXT_texture_filter_anisotropic");n.texParameterf(C,k.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(_.anisotropy,r.getMaxAnisotropy())),i.get(_).__currentAnisotropy=_.anisotropy}}}function Pt(C,_){let k=!1;C.__webglInit===void 0&&(C.__webglInit=!0,_.addEventListener("dispose",R));let j=_.source,ee=h.get(j);ee===void 0&&(ee={},h.set(j,ee));let G=X(_);if(G!==C.__cacheKey){ee[G]===void 0&&(ee[G]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,k=!0),ee[G].usedTimes++;let Oe=ee[C.__cacheKey];Oe!==void 0&&(ee[C.__cacheKey].usedTimes--,Oe.usedTimes===0&&E(_)),C.__cacheKey=G,C.__webglTexture=ee[G].texture}return k}function Y(C,_,k){return Math.floor(Math.floor(C/k)/_)}function de(C,_,k,j){let G=C.updateRanges;if(G.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,_.width,_.height,k,j,_.data);else{G.sort((te,Se)=>te.start-Se.start);let Oe=0;for(let te=1;te<G.length;te++){let Se=G[Oe],Ke=G[te],Xe=Se.start+Se.count,ge=Y(Ke.start,_.width,4),ut=Y(Se.start,_.width,4);Ke.start<=Xe+1&&ge===ut&&Y(Ke.start+Ke.count-1,_.width,4)===ge?Se.count=Math.max(Se.count,Ke.start+Ke.count-Se.start):(++Oe,G[Oe]=Ke)}G.length=Oe+1;let me=n.getParameter(n.UNPACK_ROW_LENGTH),Ae=n.getParameter(n.UNPACK_SKIP_PIXELS),Pe=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,_.width);for(let te=0,Se=G.length;te<Se;te++){let Ke=G[te],Xe=Math.floor(Ke.start/4),ge=Math.ceil(Ke.count/4),ut=Xe%_.width,O=Math.floor(Xe/_.width),_e=ge,re=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,ut),n.pixelStorei(n.UNPACK_SKIP_ROWS,O),t.texSubImage2D(n.TEXTURE_2D,0,ut,O,_e,re,k,j,_.data)}C.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,me),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ae),n.pixelStorei(n.UNPACK_SKIP_ROWS,Pe)}}function ke(C,_,k){let j=n.TEXTURE_2D;(_.isDataArrayTexture||_.isCompressedArrayTexture)&&(j=n.TEXTURE_2D_ARRAY),_.isData3DTexture&&(j=n.TEXTURE_3D);let ee=Pt(C,_),G=_.source;t.bindTexture(j,C.__webglTexture,n.TEXTURE0+k);let Oe=i.get(G);if(G.version!==Oe.__version||ee===!0){t.activeTexture(n.TEXTURE0+k);let me=Bt.getPrimaries(Bt.workingColorSpace),Ae=_.colorSpace===qo?null:Bt.getPrimaries(_.colorSpace),Pe=_.colorSpace===qo||me===Ae?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,_.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,_.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);let te=v(_.image,!1,r.maxTextureSize);te=Me(_,te);let Se=o.convert(_.format,_.colorSpace),Ke=o.convert(_.type),Xe=w(_.internalFormat,Se,Ke,_.colorSpace,_.isVideoTexture);_t(j,_);let ge,ut=_.mipmaps,O=_.isVideoTexture!==!0,_e=Oe.__version===void 0||ee===!0,re=G.dataReady,De=N(_,te);if(_.isDepthTexture)Xe=y(_.format===Bc,_.type),_e&&(O?t.texStorage2D(n.TEXTURE_2D,1,Xe,te.width,te.height):t.texImage2D(n.TEXTURE_2D,0,Xe,te.width,te.height,0,Se,Ke,null));else if(_.isDataTexture)if(ut.length>0){O&&_e&&t.texStorage2D(n.TEXTURE_2D,De,Xe,ut[0].width,ut[0].height);for(let se=0,K=ut.length;se<K;se++)ge=ut[se],O?re&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,ge.width,ge.height,Se,Ke,ge.data):t.texImage2D(n.TEXTURE_2D,se,Xe,ge.width,ge.height,0,Se,Ke,ge.data);_.generateMipmaps=!1}else O?(_e&&t.texStorage2D(n.TEXTURE_2D,De,Xe,te.width,te.height),re&&de(_,te,Se,Ke)):t.texImage2D(n.TEXTURE_2D,0,Xe,te.width,te.height,0,Se,Ke,te.data);else if(_.isCompressedTexture)if(_.isCompressedArrayTexture){O&&_e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,Xe,ut[0].width,ut[0].height,te.depth);for(let se=0,K=ut.length;se<K;se++)if(ge=ut[se],_.format!==_r)if(Se!==null)if(O){if(re)if(_.layerUpdates.size>0){let Re=Uw(ge.width,ge.height,_.format,_.type);for(let mt of _.layerUpdates){let an=ge.data.subarray(mt*Re/ge.data.BYTES_PER_ELEMENT,(mt+1)*Re/ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,mt,ge.width,ge.height,1,Se,an)}_.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,ge.width,ge.height,te.depth,Se,ge.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,se,Xe,ge.width,ge.height,te.depth,0,ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else O?re&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,se,0,0,0,ge.width,ge.height,te.depth,Se,Ke,ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,se,Xe,ge.width,ge.height,te.depth,0,Se,Ke,ge.data)}else{O&&_e&&t.texStorage2D(n.TEXTURE_2D,De,Xe,ut[0].width,ut[0].height);for(let se=0,K=ut.length;se<K;se++)ge=ut[se],_.format!==_r?Se!==null?O?re&&t.compressedTexSubImage2D(n.TEXTURE_2D,se,0,0,ge.width,ge.height,Se,ge.data):t.compressedTexImage2D(n.TEXTURE_2D,se,Xe,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):O?re&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,ge.width,ge.height,Se,Ke,ge.data):t.texImage2D(n.TEXTURE_2D,se,Xe,ge.width,ge.height,0,Se,Ke,ge.data)}else if(_.isDataArrayTexture)if(O){if(_e&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,Xe,te.width,te.height,te.depth),re)if(_.layerUpdates.size>0){let se=Uw(te.width,te.height,_.format,_.type);for(let K of _.layerUpdates){let Re=te.data.subarray(K*se/te.data.BYTES_PER_ELEMENT,(K+1)*se/te.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,K,te.width,te.height,1,Se,Ke,Re)}_.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,te.width,te.height,te.depth,Se,Ke,te.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Xe,te.width,te.height,te.depth,0,Se,Ke,te.data);else if(_.isData3DTexture)O?(_e&&t.texStorage3D(n.TEXTURE_3D,De,Xe,te.width,te.height,te.depth),re&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,te.width,te.height,te.depth,Se,Ke,te.data)):t.texImage3D(n.TEXTURE_3D,0,Xe,te.width,te.height,te.depth,0,Se,Ke,te.data);else if(_.isFramebufferTexture){if(_e)if(O)t.texStorage2D(n.TEXTURE_2D,De,Xe,te.width,te.height);else{let se=te.width,K=te.height;for(let Re=0;Re<De;Re++)t.texImage2D(n.TEXTURE_2D,Re,Xe,se,K,0,Se,Ke,null),se>>=1,K>>=1}}else if(ut.length>0){if(O&&_e){let se=pt(ut[0]);t.texStorage2D(n.TEXTURE_2D,De,Xe,se.width,se.height)}for(let se=0,K=ut.length;se<K;se++)ge=ut[se],O?re&&t.texSubImage2D(n.TEXTURE_2D,se,0,0,Se,Ke,ge):t.texImage2D(n.TEXTURE_2D,se,Xe,Se,Ke,ge);_.generateMipmaps=!1}else if(O){if(_e){let se=pt(te);t.texStorage2D(n.TEXTURE_2D,De,Xe,se.width,se.height)}re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Se,Ke,te)}else t.texImage2D(n.TEXTURE_2D,0,Xe,Se,Ke,te);g(_)&&p(j),Oe.__version=G.version,_.onUpdate&&_.onUpdate(_)}C.__version=_.version}function xe(C,_,k){if(_.image.length!==6)return;let j=Pt(C,_),ee=_.source;t.bindTexture(n.TEXTURE_CUBE_MAP,C.__webglTexture,n.TEXTURE0+k);let G=i.get(ee);if(ee.version!==G.__version||j===!0){t.activeTexture(n.TEXTURE0+k);let Oe=Bt.getPrimaries(Bt.workingColorSpace),me=_.colorSpace===qo?null:Bt.getPrimaries(_.colorSpace),Ae=_.colorSpace===qo||Oe===me?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,_.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,_.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ae);let Pe=_.isCompressedTexture||_.image[0].isCompressedTexture,te=_.image[0]&&_.image[0].isDataTexture,Se=[];for(let K=0;K<6;K++)!Pe&&!te?Se[K]=v(_.image[K],!0,r.maxCubemapSize):Se[K]=te?_.image[K].image:_.image[K],Se[K]=Me(_,Se[K]);let Ke=Se[0],Xe=o.convert(_.format,_.colorSpace),ge=o.convert(_.type),ut=w(_.internalFormat,Xe,ge,_.colorSpace),O=_.isVideoTexture!==!0,_e=G.__version===void 0||j===!0,re=ee.dataReady,De=N(_,Ke);_t(n.TEXTURE_CUBE_MAP,_);let se;if(Pe){O&&_e&&t.texStorage2D(n.TEXTURE_CUBE_MAP,De,ut,Ke.width,Ke.height);for(let K=0;K<6;K++){se=Se[K].mipmaps;for(let Re=0;Re<se.length;Re++){let mt=se[Re];_.format!==_r?Xe!==null?O?re&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re,0,0,mt.width,mt.height,Xe,mt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re,ut,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):O?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re,0,0,mt.width,mt.height,Xe,ge,mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re,ut,mt.width,mt.height,0,Xe,ge,mt.data)}}}else{if(se=_.mipmaps,O&&_e){se.length>0&&De++;let K=pt(Se[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,De,ut,K.width,K.height)}for(let K=0;K<6;K++)if(te){O?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,0,0,Se[K].width,Se[K].height,Xe,ge,Se[K].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,ut,Se[K].width,Se[K].height,0,Xe,ge,Se[K].data);for(let Re=0;Re<se.length;Re++){let an=se[Re].image[K].image;O?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re+1,0,0,an.width,an.height,Xe,ge,an.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re+1,ut,an.width,an.height,0,Xe,ge,an.data)}}else{O?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,0,0,Xe,ge,Se[K]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,0,ut,Xe,ge,Se[K]);for(let Re=0;Re<se.length;Re++){let mt=se[Re];O?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re+1,0,0,Xe,ge,mt.image[K]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+K,Re+1,ut,Xe,ge,mt.image[K])}}}g(_)&&p(n.TEXTURE_CUBE_MAP),G.__version=ee.version,_.onUpdate&&_.onUpdate(_)}C.__version=_.version}function Ue(C,_,k,j,ee,G){let Oe=o.convert(k.format,k.colorSpace),me=o.convert(k.type),Ae=w(k.internalFormat,Oe,me,k.colorSpace),Pe=i.get(_),te=i.get(k);if(te.__renderTarget=_,!Pe.__hasExternalTextures){let Se=Math.max(1,_.width>>G),Ke=Math.max(1,_.height>>G);ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?t.texImage3D(ee,G,Ae,Se,Ke,_.depth,0,Oe,me,null):t.texImage2D(ee,G,Ae,Se,Ke,0,Oe,me,null)}t.bindFramebuffer(n.FRAMEBUFFER,C),we(_)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,j,ee,te.__webglTexture,0,Z(_)):(ee===n.TEXTURE_2D||ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,j,ee,te.__webglTexture,G),t.bindFramebuffer(n.FRAMEBUFFER,null)}function bt(C,_,k){if(n.bindRenderbuffer(n.RENDERBUFFER,C),_.depthBuffer){let j=_.depthTexture,ee=j&&j.isDepthTexture?j.type:null,G=y(_.stencilBuffer,ee),Oe=_.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=Z(_);we(_)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,G,_.width,_.height):k?n.renderbufferStorageMultisample(n.RENDERBUFFER,me,G,_.width,_.height):n.renderbufferStorage(n.RENDERBUFFER,G,_.width,_.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,C)}else{let j=_.textures;for(let ee=0;ee<j.length;ee++){let G=j[ee],Oe=o.convert(G.format,G.colorSpace),me=o.convert(G.type),Ae=w(G.internalFormat,Oe,me,G.colorSpace),Pe=Z(_);k&&we(_)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,Ae,_.width,_.height):we(_)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,Ae,_.width,_.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,_.width,_.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function je(C,_){if(_&&_.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,C),!(_.depthTexture&&_.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let j=i.get(_.depthTexture);j.__renderTarget=_,(!j.__webglTexture||_.depthTexture.image.width!==_.width||_.depthTexture.image.height!==_.height)&&(_.depthTexture.image.width=_.width,_.depthTexture.image.height=_.height,_.depthTexture.needsUpdate=!0),q(_.depthTexture,0);let ee=j.__webglTexture,G=Z(_);if(_.depthTexture.format===Ec)we(_)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0,G):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ee,0);else if(_.depthTexture.format===Bc)we(_)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0,G):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ee,0);else throw new Error("Unknown depthTexture format")}function sn(C){let _=i.get(C),k=C.isWebGLCubeRenderTarget===!0;if(_.__boundDepthTexture!==C.depthTexture){let j=C.depthTexture;if(_.__depthDisposeCallback&&_.__depthDisposeCallback(),j){let ee=()=>{delete _.__boundDepthTexture,delete _.__depthDisposeCallback,j.removeEventListener("dispose",ee)};j.addEventListener("dispose",ee),_.__depthDisposeCallback=ee}_.__boundDepthTexture=j}if(C.depthTexture&&!_.__autoAllocateDepthBuffer){if(k)throw new Error("target.depthTexture not supported in Cube render targets");let j=C.texture.mipmaps;j&&j.length>0?je(_.__webglFramebuffer[0],C):je(_.__webglFramebuffer,C)}else if(k){_.__webglDepthbuffer=[];for(let j=0;j<6;j++)if(t.bindFramebuffer(n.FRAMEBUFFER,_.__webglFramebuffer[j]),_.__webglDepthbuffer[j]===void 0)_.__webglDepthbuffer[j]=n.createRenderbuffer(),bt(_.__webglDepthbuffer[j],C,!1);else{let ee=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,G=_.__webglDepthbuffer[j];n.bindRenderbuffer(n.RENDERBUFFER,G),n.framebufferRenderbuffer(n.FRAMEBUFFER,ee,n.RENDERBUFFER,G)}}else{let j=C.texture.mipmaps;if(j&&j.length>0?t.bindFramebuffer(n.FRAMEBUFFER,_.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,_.__webglFramebuffer),_.__webglDepthbuffer===void 0)_.__webglDepthbuffer=n.createRenderbuffer(),bt(_.__webglDepthbuffer,C,!1);else{let ee=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,G=_.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,G),n.framebufferRenderbuffer(n.FRAMEBUFFER,ee,n.RENDERBUFFER,G)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ut(C,_,k){let j=i.get(C);_!==void 0&&Ue(j.__webglFramebuffer,C,C.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),k!==void 0&&sn(C)}function xt(C){let _=C.texture,k=i.get(C),j=i.get(_);C.addEventListener("dispose",D);let ee=C.textures,G=C.isWebGLCubeRenderTarget===!0,Oe=ee.length>1;if(Oe||(j.__webglTexture===void 0&&(j.__webglTexture=n.createTexture()),j.__version=_.version,s.memory.textures++),G){k.__webglFramebuffer=[];for(let me=0;me<6;me++)if(_.mipmaps&&_.mipmaps.length>0){k.__webglFramebuffer[me]=[];for(let Ae=0;Ae<_.mipmaps.length;Ae++)k.__webglFramebuffer[me][Ae]=n.createFramebuffer()}else k.__webglFramebuffer[me]=n.createFramebuffer()}else{if(_.mipmaps&&_.mipmaps.length>0){k.__webglFramebuffer=[];for(let me=0;me<_.mipmaps.length;me++)k.__webglFramebuffer[me]=n.createFramebuffer()}else k.__webglFramebuffer=n.createFramebuffer();if(Oe)for(let me=0,Ae=ee.length;me<Ae;me++){let Pe=i.get(ee[me]);Pe.__webglTexture===void 0&&(Pe.__webglTexture=n.createTexture(),s.memory.textures++)}if(C.samples>0&&we(C)===!1){k.__webglMultisampledFramebuffer=n.createFramebuffer(),k.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,k.__webglMultisampledFramebuffer);for(let me=0;me<ee.length;me++){let Ae=ee[me];k.__webglColorRenderbuffer[me]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,k.__webglColorRenderbuffer[me]);let Pe=o.convert(Ae.format,Ae.colorSpace),te=o.convert(Ae.type),Se=w(Ae.internalFormat,Pe,te,Ae.colorSpace,C.isXRRenderTarget===!0),Ke=Z(C);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ke,Se,C.width,C.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+me,n.RENDERBUFFER,k.__webglColorRenderbuffer[me])}n.bindRenderbuffer(n.RENDERBUFFER,null),C.depthBuffer&&(k.__webglDepthRenderbuffer=n.createRenderbuffer(),bt(k.__webglDepthRenderbuffer,C,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(G){t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture),_t(n.TEXTURE_CUBE_MAP,_);for(let me=0;me<6;me++)if(_.mipmaps&&_.mipmaps.length>0)for(let Ae=0;Ae<_.mipmaps.length;Ae++)Ue(k.__webglFramebuffer[me][Ae],C,_,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae);else Ue(k.__webglFramebuffer[me],C,_,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0);g(_)&&p(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Oe){for(let me=0,Ae=ee.length;me<Ae;me++){let Pe=ee[me],te=i.get(Pe);t.bindTexture(n.TEXTURE_2D,te.__webglTexture),_t(n.TEXTURE_2D,Pe),Ue(k.__webglFramebuffer,C,Pe,n.COLOR_ATTACHMENT0+me,n.TEXTURE_2D,0),g(Pe)&&p(n.TEXTURE_2D)}t.unbindTexture()}else{let me=n.TEXTURE_2D;if((C.isWebGL3DRenderTarget||C.isWebGLArrayRenderTarget)&&(me=C.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(me,j.__webglTexture),_t(me,_),_.mipmaps&&_.mipmaps.length>0)for(let Ae=0;Ae<_.mipmaps.length;Ae++)Ue(k.__webglFramebuffer[Ae],C,_,n.COLOR_ATTACHMENT0,me,Ae);else Ue(k.__webglFramebuffer,C,_,n.COLOR_ATTACHMENT0,me,0);g(_)&&p(me),t.unbindTexture()}C.depthBuffer&&sn(C)}function S(C){let _=C.textures;for(let k=0,j=_.length;k<j;k++){let ee=_[k];if(g(ee)){let G=T(C),Oe=i.get(ee).__webglTexture;t.bindTexture(G,Oe),p(G),t.unbindTexture()}}}let fe=[],ie=[];function he(C){if(C.samples>0){if(we(C)===!1){let _=C.textures,k=C.width,j=C.height,ee=n.COLOR_BUFFER_BIT,G=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=i.get(C),me=_.length>1;if(me)for(let Pe=0;Pe<_.length;Pe++)t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer);let Ae=C.texture.mipmaps;Ae&&Ae.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer);for(let Pe=0;Pe<_.length;Pe++){if(C.resolveDepthBuffer&&(C.depthBuffer&&(ee|=n.DEPTH_BUFFER_BIT),C.stencilBuffer&&C.resolveStencilBuffer&&(ee|=n.STENCIL_BUFFER_BIT)),me){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[Pe]);let te=i.get(_[Pe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,te,0)}n.blitFramebuffer(0,0,k,j,0,0,k,j,ee,n.NEAREST),l===!0&&(fe.length=0,ie.length=0,fe.push(n.COLOR_ATTACHMENT0+Pe),C.depthBuffer&&C.resolveDepthBuffer===!1&&(fe.push(G),ie.push(G),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ie)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,fe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),me)for(let Pe=0;Pe<_.length;Pe++){t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[Pe]);let te=i.get(_[Pe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,te,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer)}else if(C.depthBuffer&&C.resolveDepthBuffer===!1&&l){let _=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[_])}}}function Z(C){return Math.min(r.maxSamples,C.samples)}function we(C){let _=i.get(C);return C.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&_.__useRenderToTexture!==!1}function oe(C){let _=s.render.frame;u.get(C)!==_&&(u.set(C,_),C.update())}function Me(C,_){let k=C.colorSpace,j=C.format,ee=C.type;return C.isCompressedTexture===!0||C.isVideoTexture===!0||k!==La&&k!==qo&&(Bt.getTransfer(k)===Zt?(j!==_r||ee!==Pr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",k)),_}function pt(C){return typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement?(c.width=C.naturalWidth||C.width,c.height=C.naturalHeight||C.height):typeof VideoFrame<"u"&&C instanceof VideoFrame?(c.width=C.displayWidth,c.height=C.displayHeight):(c.width=C.width,c.height=C.height),c}this.allocateTextureUnit=U,this.resetTextureUnits=H,this.setTexture2D=q,this.setTexture2DArray=W,this.setTexture3D=Q,this.setTextureCube=z,this.rebindTextures=Ut,this.setupRenderTarget=xt,this.updateRenderTargetMipmap=S,this.updateMultisampleRenderTarget=he,this.setupDepthRenderbuffer=sn,this.setupFrameBufferTexture=Ue,this.useMultisampledRTT=we}function N5(n,e){function t(i,r=qo){let o,s=Bt.getTransfer(r);if(i===Pr)return n.UNSIGNED_BYTE;if(i===ov)return n.UNSIGNED_SHORT_4_4_4_4;if(i===sv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ww)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===xw)return n.BYTE;if(i===Ew)return n.SHORT;if(i===Lc)return n.UNSIGNED_SHORT;if(i===rv)return n.INT;if(i===ks)return n.UNSIGNED_INT;if(i===eo)return n.FLOAT;if(i===kc)return n.HALF_FLOAT;if(i===Mw)return n.ALPHA;if(i===Sw)return n.RGB;if(i===_r)return n.RGBA;if(i===Ec)return n.DEPTH_COMPONENT;if(i===Bc)return n.DEPTH_STENCIL;if(i===Cw)return n.RED;if(i===av)return n.RED_INTEGER;if(i===Tw)return n.RG;if(i===lv)return n.RG_INTEGER;if(i===cv)return n.RGBA_INTEGER;if(i===Ef||i===wf||i===Mf||i===Sf)if(s===Zt)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Ef)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===wf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Mf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Sf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Ef)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===wf)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Mf)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Sf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===uv||i===dv||i===fv||i===hv)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===uv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===dv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===fv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===hv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===pv||i===mv||i===gv)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===pv||i===mv)return s===Zt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===gv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===vv||i===_v||i===yv||i===bv||i===xv||i===Ev||i===wv||i===Mv||i===Sv||i===Cv||i===Tv||i===Dv||i===Iv||i===Av)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===vv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===_v)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===yv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===bv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===xv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ev)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===wv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Mv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Sv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Cv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Tv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Dv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Iv)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Av)return s===Zt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Cf||i===Rv||i===Nv)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===Cf)return s===Zt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Rv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Nv)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Dw||i===Ov||i===Pv||i===Fv)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===Cf)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Ov)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Pv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Fv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Uc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var O5=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,P5=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,Kw=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new Fr,o=e.properties.get(r);o.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Or({vertexShader:O5,fragmentShader:P5,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new On(new ff(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},Jw=class extends jo{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,m=null,v=new Kw,g=t.getContextAttributes(),p=null,T=null,w=[],y=[],N=new ue,R=null,D=new Hn;D.viewport=new Yt;let P=new Hn;P.viewport=new Yt;let E=[D,P],b=new $g,I=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let de=w[Y];return de===void 0&&(de=new Dc,w[Y]=de),de.getTargetRaySpace()},this.getControllerGrip=function(Y){let de=w[Y];return de===void 0&&(de=new Dc,w[Y]=de),de.getGripSpace()},this.getHand=function(Y){let de=w[Y];return de===void 0&&(de=new Dc,w[Y]=de),de.getHandSpace()};function U(Y){let de=y.indexOf(Y.inputSource);if(de===-1)return;let ke=w[de];ke!==void 0&&(ke.update(Y.inputSource,Y.frame,c||s),ke.dispatchEvent({type:Y.type,data:Y.inputSource}))}function X(){r.removeEventListener("select",U),r.removeEventListener("selectstart",U),r.removeEventListener("selectend",U),r.removeEventListener("squeeze",U),r.removeEventListener("squeezestart",U),r.removeEventListener("squeezeend",U),r.removeEventListener("end",X),r.removeEventListener("inputsourceschange",q);for(let Y=0;Y<w.length;Y++){let de=y[Y];de!==null&&(y[Y]=null,w[Y].disconnect(de))}I=null,H=null,v.reset(),e.setRenderTarget(p),f=null,h=null,d=null,r=null,T=null,Pt.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){o=Y,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(Y){return xr(this,null,function*(){if(r=Y,r!==null){if(p=e.getRenderTarget(),r.addEventListener("select",U),r.addEventListener("selectstart",U),r.addEventListener("selectend",U),r.addEventListener("squeeze",U),r.addEventListener("squeezestart",U),r.addEventListener("squeezeend",U),r.addEventListener("end",X),r.addEventListener("inputsourceschange",q),g.xrCompatible!==!0&&(yield t.makeXRCompatible()),R=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ke=null,xe=null,Ue=null;g.depth&&(Ue=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ke=g.stencil?Bc:Ec,xe=g.stencil?Uc:ks);let bt={colorFormat:t.RGBA8,depthFormat:Ue,scaleFactor:o};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(bt),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),T=new Zr(h.textureWidth,h.textureHeight,{format:_r,type:Pr,depthTexture:new tf(h.textureWidth,h.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,ke),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let ke={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,t,ke),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),T=new Zr(f.framebufferWidth,f.framebufferHeight,{format:_r,type:Pr,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=yield r.requestReferenceSpace(a),Pt.setContext(r),Pt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function q(Y){for(let de=0;de<Y.removed.length;de++){let ke=Y.removed[de],xe=y.indexOf(ke);xe>=0&&(y[xe]=null,w[xe].disconnect(ke))}for(let de=0;de<Y.added.length;de++){let ke=Y.added[de],xe=y.indexOf(ke);if(xe===-1){for(let bt=0;bt<w.length;bt++)if(bt>=y.length){y.push(ke),xe=bt;break}else if(y[bt]===null){y[bt]=ke,xe=bt;break}if(xe===-1)break}let Ue=w[xe];Ue&&Ue.connect(ke)}}let W=new A,Q=new A;function z(Y,de,ke){W.setFromMatrixPosition(de.matrixWorld),Q.setFromMatrixPosition(ke.matrixWorld);let xe=W.distanceTo(Q),Ue=de.projectionMatrix.elements,bt=ke.projectionMatrix.elements,je=Ue[14]/(Ue[10]-1),sn=Ue[14]/(Ue[10]+1),Ut=(Ue[9]+1)/Ue[5],xt=(Ue[9]-1)/Ue[5],S=(Ue[8]-1)/Ue[0],fe=(bt[8]+1)/bt[0],ie=je*S,he=je*fe,Z=xe/(-S+fe),we=Z*-S;if(de.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(we),Y.translateZ(Z),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),Ue[10]===-1)Y.projectionMatrix.copy(de.projectionMatrix),Y.projectionMatrixInverse.copy(de.projectionMatrixInverse);else{let oe=je+Z,Me=sn+Z,pt=ie-we,C=he+(xe-we),_=Ut*sn/Me*oe,k=xt*sn/Me*oe;Y.projectionMatrix.makePerspective(pt,C,_,k,oe,Me),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function pe(Y,de){de===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(de.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(r===null)return;let de=Y.near,ke=Y.far;v.texture!==null&&(v.depthNear>0&&(de=v.depthNear),v.depthFar>0&&(ke=v.depthFar)),b.near=P.near=D.near=de,b.far=P.far=D.far=ke,(I!==b.near||H!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),I=b.near,H=b.far),D.layers.mask=Y.layers.mask|2,P.layers.mask=Y.layers.mask|4,b.layers.mask=D.layers.mask|P.layers.mask;let xe=Y.parent,Ue=b.cameras;pe(b,xe);for(let bt=0;bt<Ue.length;bt++)pe(Ue[bt],xe);Ue.length===2?z(b,D,P):b.projectionMatrix.copy(D.projectionMatrix),Ee(Y,b,xe)};function Ee(Y,de,ke){ke===null?Y.matrix.copy(de.matrixWorld):(Y.matrix.copy(ke.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(de.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(de.projectionMatrix),Y.projectionMatrixInverse.copy(de.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=yg*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(Y){l=Y,h!==null&&(h.fixedFoveation=Y),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Y)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(b)};let Ie=null;function _t(Y,de){if(u=de.getViewerPose(c||s),m=de,u!==null){let ke=u.views;f!==null&&(e.setRenderTargetFramebuffer(T,f.framebuffer),e.setRenderTarget(T));let xe=!1;ke.length!==b.cameras.length&&(b.cameras.length=0,xe=!0);for(let je=0;je<ke.length;je++){let sn=ke[je],Ut=null;if(f!==null)Ut=f.getViewport(sn);else{let S=d.getViewSubImage(h,sn);Ut=S.viewport,je===0&&(e.setRenderTargetTextures(T,S.colorTexture,S.depthStencilTexture),e.setRenderTarget(T))}let xt=E[je];xt===void 0&&(xt=new Hn,xt.layers.enable(je),xt.viewport=new Yt,E[je]=xt),xt.matrix.fromArray(sn.transform.matrix),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt.projectionMatrix.fromArray(sn.projectionMatrix),xt.projectionMatrixInverse.copy(xt.projectionMatrix).invert(),xt.viewport.set(Ut.x,Ut.y,Ut.width,Ut.height),je===0&&(b.matrix.copy(xt.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),xe===!0&&b.cameras.push(xt)}let Ue=r.enabledFeatures;if(Ue&&Ue.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&d){let je=d.getDepthInformation(ke[0]);je&&je.isValid&&je.texture&&v.init(e,je,r.renderState)}}for(let ke=0;ke<w.length;ke++){let xe=y[ke],Ue=w[ke];xe!==null&&Ue!==void 0&&Ue.update(xe,de,c||s)}Ie&&Ie(Y,de),de.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:de}),m=null}let Pt=new YN;Pt.setAnimationLoop(_t),this.setAnimationLoop=function(Y){Ie=Y},this.dispose=function(){}}},Ya=new Tn,F5=new rn;function L5(n,e){function t(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function i(g,p){p.color.getRGB(g.fogColor.value,Ow(n)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function r(g,p,T,w,y){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(g,p):p.isMeshToonMaterial?(o(g,p),d(g,p)):p.isMeshPhongMaterial?(o(g,p),u(g,p)):p.isMeshStandardMaterial?(o(g,p),h(g,p),p.isMeshPhysicalMaterial&&f(g,p,y)):p.isMeshMatcapMaterial?(o(g,p),m(g,p)):p.isMeshDepthMaterial?o(g,p):p.isMeshDistanceMaterial?(o(g,p),v(g,p)):p.isMeshNormalMaterial?o(g,p):p.isLineBasicMaterial?(s(g,p),p.isLineDashedMaterial&&a(g,p)):p.isPointsMaterial?l(g,p,T,w):p.isSpriteMaterial?c(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,t(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,t(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,t(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===bi&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,t(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===bi&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,t(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,t(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);let T=e.get(p),w=T.envMap,y=T.envMapRotation;w&&(g.envMap.value=w,Ya.copy(y),Ya.x*=-1,Ya.y*=-1,Ya.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ya.y*=-1,Ya.z*=-1),g.envMapRotation.value.setFromMatrix4(F5.makeRotationFromEuler(Ya)),g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap&&(g.lightMap.value=p.lightMap,g.lightMapIntensity.value=p.lightMapIntensity,t(p.lightMap,g.lightMapTransform)),p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,g.aoMapTransform))}function s(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,t(p.map,g.mapTransform))}function a(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function l(g,p,T,w){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*T,g.scale.value=w*.5,p.map&&(g.map.value=p.map,t(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,t(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function c(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,t(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,t(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function u(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function d(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,g.roughnessMapTransform)),p.envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function f(g,p,T){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===bi&&g.clearcoatNormalScale.value.negate())),p.dispersion>0&&(g.dispersion.value=p.dispersion),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=T.texture,g.transmissionSamplerSize.value.set(T.width,T.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,p){p.matcap&&(g.matcap.value=p.matcap)}function v(g,p){let T=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(T.matrixWorld),g.nearDistance.value=T.shadow.camera.near,g.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function k5(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,w){let y=w.program;i.uniformBlockBinding(T,y)}function c(T,w){let y=r[T.id];y===void 0&&(m(T),y=u(T),r[T.id]=y,T.addEventListener("dispose",g));let N=w.program;i.updateUBOMapping(T,N);let R=e.render.frame;o[T.id]!==R&&(h(T),o[T.id]=R)}function u(T){let w=d();T.__bindingPointIndex=w;let y=n.createBuffer(),N=T.__size,R=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,N,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,y),y}function d(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(T){let w=r[T.id],y=T.uniforms,N=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let R=0,D=y.length;R<D;R++){let P=Array.isArray(y[R])?y[R]:[y[R]];for(let E=0,b=P.length;E<b;E++){let I=P[E];if(f(I,R,E,N)===!0){let H=I.__offset,U=Array.isArray(I.value)?I.value:[I.value],X=0;for(let q=0;q<U.length;q++){let W=U[q],Q=v(W);typeof W=="number"||typeof W=="boolean"?(I.__data[0]=W,n.bufferSubData(n.UNIFORM_BUFFER,H+X,I.__data)):W.isMatrix3?(I.__data[0]=W.elements[0],I.__data[1]=W.elements[1],I.__data[2]=W.elements[2],I.__data[3]=0,I.__data[4]=W.elements[3],I.__data[5]=W.elements[4],I.__data[6]=W.elements[5],I.__data[7]=0,I.__data[8]=W.elements[6],I.__data[9]=W.elements[7],I.__data[10]=W.elements[8],I.__data[11]=0):(W.toArray(I.__data,X),X+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(T,w,y,N){let R=T.value,D=w+"_"+y;if(N[D]===void 0)return typeof R=="number"||typeof R=="boolean"?N[D]=R:N[D]=R.clone(),!0;{let P=N[D];if(typeof R=="number"||typeof R=="boolean"){if(P!==R)return N[D]=R,!0}else if(P.equals(R)===!1)return P.copy(R),!0}return!1}function m(T){let w=T.uniforms,y=0,N=16;for(let D=0,P=w.length;D<P;D++){let E=Array.isArray(w[D])?w[D]:[w[D]];for(let b=0,I=E.length;b<I;b++){let H=E[b],U=Array.isArray(H.value)?H.value:[H.value];for(let X=0,q=U.length;X<q;X++){let W=U[X],Q=v(W),z=y%N,pe=z%Q.boundary,Ee=z+pe;y+=pe,Ee!==0&&N-Ee<Q.storage&&(y+=N-Ee),H.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=y,y+=Q.storage}}}let R=y%N;return R>0&&(y+=N-R),T.__size=y,T.__cache={},this}function v(T){let w={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(w.boundary=4,w.storage=4):T.isVector2?(w.boundary=8,w.storage=8):T.isVector3||T.isColor?(w.boundary=16,w.storage=12):T.isVector4?(w.boundary=16,w.storage=16):T.isMatrix3?(w.boundary=48,w.storage=48):T.isMatrix4?(w.boundary=64,w.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),w}function g(T){let w=T.target;w.removeEventListener("dispose",g);let y=s.indexOf(w.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete o[w.id]}function p(){for(let T in r)n.deleteBuffer(r[T]);s=[],r={},o={}}return{bind:l,update:c,dispose:p}}var Ja=class{constructor(e={}){let{canvas:t=mN(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=s;let m=new Uint32Array(4),v=new Int32Array(4),g=null,p=null,T=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=$o,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let y=this,N=!1;this._outputColorSpace=qi;let R=0,D=0,P=null,E=-1,b=null,I=new Yt,H=new Yt,U=null,X=new St(0),q=0,W=t.width,Q=t.height,z=1,pe=null,Ee=null,Ie=new Yt(0,0,W,Q),_t=new Yt(0,0,W,Q),Pt=!1,Y=new Ic,de=!1,ke=!1,xe=new rn,Ue=new rn,bt=new A,je=new Yt,sn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Ut=!1;function xt(){return P===null?z:1}let S=i;function fe(x,F){return t.getContext(x,F)}try{let x={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${qg}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",se,!1),t.addEventListener("webglcontextcreationerror",K,!1),S===null){let F="webgl2";if(S=fe(F,x),S===null)throw fe(F)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(x){throw console.error("THREE.WebGLRenderer: "+x.message),x}let ie,he,Z,we,oe,Me,pt,C,_,k,j,ee,G,Oe,me,Ae,Pe,te,Se,Ke,Xe,ge,ut,O;function _e(){ie=new tW(S),ie.init(),ge=new N5(S,ie),he=new X4(S,ie,e,ge),Z=new A5(S,ie),he.reverseDepthBuffer&&h&&Z.buffers.depth.setReversed(!0),we=new rW(S),oe=new v5,Me=new R5(S,ie,Z,oe,he,ge,we),pt=new Z4(y),C=new eW(y),_=new uj(S),ut=new $4(S,_),k=new nW(S,_,we,ut),j=new sW(S,k,_,we),Se=new oW(S,he,Me),Ae=new Y4(oe),ee=new g5(y,pt,C,ie,he,ut,Ae),G=new L5(y,oe),Oe=new y5,me=new S5(ie),te=new W4(y,pt,C,Z,j,f,l),Pe=new D5(y,j,he),O=new k5(S,we,he,Z),Ke=new q4(S,ie,we),Xe=new iW(S,ie,we),we.programs=ee.programs,y.capabilities=he,y.extensions=ie,y.properties=oe,y.renderLists=Oe,y.shadowMap=Pe,y.state=Z,y.info=we}_e();let re=new Jw(y,S);this.xr=re,this.getContext=function(){return S},this.getContextAttributes=function(){return S.getContextAttributes()},this.forceContextLoss=function(){let x=ie.get("WEBGL_lose_context");x&&x.loseContext()},this.forceContextRestore=function(){let x=ie.get("WEBGL_lose_context");x&&x.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(x){x!==void 0&&(z=x,this.setSize(W,Q,!1))},this.getSize=function(x){return x.set(W,Q)},this.setSize=function(x,F,B=!0){if(re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=x,Q=F,t.width=Math.floor(x*z),t.height=Math.floor(F*z),B===!0&&(t.style.width=x+"px",t.style.height=F+"px"),this.setViewport(0,0,x,F)},this.getDrawingBufferSize=function(x){return x.set(W*z,Q*z).floor()},this.setDrawingBufferSize=function(x,F,B){W=x,Q=F,z=B,t.width=Math.floor(x*B),t.height=Math.floor(F*B),this.setViewport(0,0,x,F)},this.getCurrentViewport=function(x){return x.copy(I)},this.getViewport=function(x){return x.copy(Ie)},this.setViewport=function(x,F,B,V){x.isVector4?Ie.set(x.x,x.y,x.z,x.w):Ie.set(x,F,B,V),Z.viewport(I.copy(Ie).multiplyScalar(z).round())},this.getScissor=function(x){return x.copy(_t)},this.setScissor=function(x,F,B,V){x.isVector4?_t.set(x.x,x.y,x.z,x.w):_t.set(x,F,B,V),Z.scissor(H.copy(_t).multiplyScalar(z).round())},this.getScissorTest=function(){return Pt},this.setScissorTest=function(x){Z.setScissorTest(Pt=x)},this.setOpaqueSort=function(x){pe=x},this.setTransparentSort=function(x){Ee=x},this.getClearColor=function(x){return x.copy(te.getClearColor())},this.setClearColor=function(){te.setClearColor(...arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha(...arguments)},this.clear=function(x=!0,F=!0,B=!0){let V=0;if(x){let L=!1;if(P!==null){let ae=P.texture.format;L=ae===cv||ae===lv||ae===av}if(L){let ae=P.texture.type,ye=ae===Pr||ae===ks||ae===Lc||ae===Uc||ae===ov||ae===sv,Ne=te.getClearColor(),Ce=te.getClearAlpha(),rt=Ne.r,ct=Ne.g,He=Ne.b;ye?(m[0]=rt,m[1]=ct,m[2]=He,m[3]=Ce,S.clearBufferuiv(S.COLOR,0,m)):(v[0]=rt,v[1]=ct,v[2]=He,v[3]=Ce,S.clearBufferiv(S.COLOR,0,v))}else V|=S.COLOR_BUFFER_BIT}F&&(V|=S.DEPTH_BUFFER_BIT),B&&(V|=S.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),S.clear(V)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",se,!1),t.removeEventListener("webglcontextcreationerror",K,!1),te.dispose(),Oe.dispose(),me.dispose(),oe.dispose(),pt.dispose(),C.dispose(),j.dispose(),ut.dispose(),O.dispose(),ee.dispose(),re.dispose(),re.removeEventListener("sessionstart",OM),re.removeEventListener("sessionend",PM),zs.stop()};function De(x){x.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;let x=we.autoReset,F=Pe.enabled,B=Pe.autoUpdate,V=Pe.needsUpdate,L=Pe.type;_e(),we.autoReset=x,Pe.enabled=F,Pe.autoUpdate=B,Pe.needsUpdate=V,Pe.type=L}function K(x){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",x.statusMessage)}function Re(x){let F=x.target;F.removeEventListener("dispose",Re),mt(F)}function mt(x){an(x),oe.remove(x)}function an(x){let F=oe.get(x).programs;F!==void 0&&(F.forEach(function(B){ee.releaseProgram(B)}),x.isShaderMaterial&&ee.releaseShaderCache(x))}this.renderBufferDirect=function(x,F,B,V,L,ae){F===null&&(F=sn);let ye=L.isMesh&&L.matrixWorld.determinant()<0,Ne=kP(x,F,B,V,L);Z.setMaterial(V,ye);let Ce=B.index,rt=1;if(V.wireframe===!0){if(Ce=k.getWireframeAttribute(B),Ce===void 0)return;rt=2}let ct=B.drawRange,He=B.attributes.position,At=ct.start*rt,Kt=(ct.start+ct.count)*rt;ae!==null&&(At=Math.max(At,ae.start*rt),Kt=Math.min(Kt,(ae.start+ae.count)*rt)),Ce!==null?(At=Math.max(At,0),Kt=Math.min(Kt,Ce.count)):He!=null&&(At=Math.max(At,0),Kt=Math.min(Kt,He.count));let En=Kt-At;if(En<0||En===1/0)return;ut.setup(L,V,Ne,B,Ce);let ln,Qt=Ke;if(Ce!==null&&(ln=_.get(Ce),Qt=Xe,Qt.setIndex(ln)),L.isMesh)V.wireframe===!0?(Z.setLineWidth(V.wireframeLinewidth*xt()),Qt.setMode(S.LINES)):Qt.setMode(S.TRIANGLES);else if(L.isLine){let $e=V.linewidth;$e===void 0&&($e=1),Z.setLineWidth($e*xt()),L.isLineSegments?Qt.setMode(S.LINES):L.isLineLoop?Qt.setMode(S.LINE_LOOP):Qt.setMode(S.LINE_STRIP)}else L.isPoints?Qt.setMode(S.POINTS):L.isSprite&&Qt.setMode(S.TRIANGLES);if(L.isBatchedMesh)if(L._multiDrawInstances!==null)ka("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Qt.renderMultiDrawInstances(L._multiDrawStarts,L._multiDrawCounts,L._multiDrawCount,L._multiDrawInstances);else if(ie.get("WEBGL_multi_draw"))Qt.renderMultiDraw(L._multiDrawStarts,L._multiDrawCounts,L._multiDrawCount);else{let $e=L._multiDrawStarts,vn=L._multiDrawCounts,Vt=L._multiDrawCount,Di=Ce?_.get(Ce).bytesPerElement:1,ol=oe.get(V).currentProgram.getUniforms();for(let Ii=0;Ii<Vt;Ii++)ol.setValue(S,"_gl_DrawID",Ii),Qt.render($e[Ii]/Di,vn[Ii])}else if(L.isInstancedMesh)Qt.renderInstances(At,En,L.count);else if(B.isInstancedBufferGeometry){let $e=B._maxInstanceCount!==void 0?B._maxInstanceCount:1/0,vn=Math.min(B.instanceCount,$e);Qt.renderInstances(At,En,vn)}else Qt.render(At,En)};function Wt(x,F,B){x.transparent===!0&&x.side===Ki&&x.forceSinglePass===!1?(x.side=bi,x.needsUpdate=!0,$f(x,F,B),x.side=zo,x.needsUpdate=!0,$f(x,F,B),x.side=Ki):$f(x,F,B)}this.compile=function(x,F,B=null){B===null&&(B=x),p=me.get(B),p.init(F),w.push(p),B.traverseVisible(function(L){L.isLight&&L.layers.test(F.layers)&&(p.pushLight(L),L.castShadow&&p.pushShadow(L))}),x!==B&&x.traverseVisible(function(L){L.isLight&&L.layers.test(F.layers)&&(p.pushLight(L),L.castShadow&&p.pushShadow(L))}),p.setupLights();let V=new Set;return x.traverse(function(L){if(!(L.isMesh||L.isPoints||L.isLine||L.isSprite))return;let ae=L.material;if(ae)if(Array.isArray(ae))for(let ye=0;ye<ae.length;ye++){let Ne=ae[ye];Wt(Ne,B,L),V.add(Ne)}else Wt(ae,B,L),V.add(ae)}),p=w.pop(),V},this.compileAsync=function(x,F,B=null){let V=this.compile(x,F,B);return new Promise(L=>{function ae(){if(V.forEach(function(ye){oe.get(ye).currentProgram.isReady()&&V.delete(ye)}),V.size===0){L(x);return}setTimeout(ae,10)}ie.get("KHR_parallel_shader_compile")!==null?ae():setTimeout(ae,10)})};let br=null;function no(x){br&&br(x)}function OM(){zs.stop()}function PM(){zs.start()}let zs=new YN;zs.setAnimationLoop(no),typeof self<"u"&&zs.setContext(self),this.setAnimationLoop=function(x){br=x,re.setAnimationLoop(x),x===null?zs.stop():zs.start()},re.addEventListener("sessionstart",OM),re.addEventListener("sessionend",PM),this.render=function(x,F){if(F!==void 0&&F.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(x.matrixWorldAutoUpdate===!0&&x.updateMatrixWorld(),F.parent===null&&F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),re.enabled===!0&&re.isPresenting===!0&&(re.cameraAutoUpdate===!0&&re.updateCamera(F),F=re.getCamera()),x.isScene===!0&&x.onBeforeRender(y,x,F,P),p=me.get(x,w.length),p.init(F),w.push(p),Ue.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),Y.setFromProjectionMatrix(Ue),ke=this.localClippingEnabled,de=Ae.init(this.clippingPlanes,ke),g=Oe.get(x,T.length),g.init(),T.push(g),re.enabled===!0&&re.isPresenting===!0){let ae=y.xr.getDepthSensingMesh();ae!==null&&M_(ae,F,-1/0,y.sortObjects)}M_(x,F,0,y.sortObjects),g.finish(),y.sortObjects===!0&&g.sort(pe,Ee),Ut=re.enabled===!1||re.isPresenting===!1||re.hasDepthSensing()===!1,Ut&&te.addToRenderList(g,x),this.info.render.frame++,de===!0&&Ae.beginShadows();let B=p.state.shadowsArray;Pe.render(B,x,F),de===!0&&Ae.endShadows(),this.info.autoReset===!0&&this.info.reset();let V=g.opaque,L=g.transmissive;if(p.setupLights(),F.isArrayCamera){let ae=F.cameras;if(L.length>0)for(let ye=0,Ne=ae.length;ye<Ne;ye++){let Ce=ae[ye];LM(V,L,x,Ce)}Ut&&te.render(x);for(let ye=0,Ne=ae.length;ye<Ne;ye++){let Ce=ae[ye];FM(g,x,Ce,Ce.viewport)}}else L.length>0&&LM(V,L,x,F),Ut&&te.render(x),FM(g,x,F);P!==null&&D===0&&(Me.updateMultisampleRenderTarget(P),Me.updateRenderTargetMipmap(P)),x.isScene===!0&&x.onAfterRender(y,x,F),ut.resetDefaultState(),E=-1,b=null,w.pop(),w.length>0?(p=w[w.length-1],de===!0&&Ae.setGlobalState(y.clippingPlanes,p.state.camera)):p=null,T.pop(),T.length>0?g=T[T.length-1]:g=null};function M_(x,F,B,V){if(x.visible===!1)return;if(x.layers.test(F.layers)){if(x.isGroup)B=x.renderOrder;else if(x.isLOD)x.autoUpdate===!0&&x.update(F);else if(x.isLight)p.pushLight(x),x.castShadow&&p.pushShadow(x);else if(x.isSprite){if(!x.frustumCulled||Y.intersectsSprite(x)){V&&je.setFromMatrixPosition(x.matrixWorld).applyMatrix4(Ue);let ye=j.update(x),Ne=x.material;Ne.visible&&g.push(x,ye,Ne,B,je.z,null)}}else if((x.isMesh||x.isLine||x.isPoints)&&(!x.frustumCulled||Y.intersectsObject(x))){let ye=j.update(x),Ne=x.material;if(V&&(x.boundingSphere!==void 0?(x.boundingSphere===null&&x.computeBoundingSphere(),je.copy(x.boundingSphere.center)):(ye.boundingSphere===null&&ye.computeBoundingSphere(),je.copy(ye.boundingSphere.center)),je.applyMatrix4(x.matrixWorld).applyMatrix4(Ue)),Array.isArray(Ne)){let Ce=ye.groups;for(let rt=0,ct=Ce.length;rt<ct;rt++){let He=Ce[rt],At=Ne[He.materialIndex];At&&At.visible&&g.push(x,ye,At,B,je.z,He)}}else Ne.visible&&g.push(x,ye,Ne,B,je.z,null)}}let ae=x.children;for(let ye=0,Ne=ae.length;ye<Ne;ye++)M_(ae[ye],F,B,V)}function FM(x,F,B,V){let L=x.opaque,ae=x.transmissive,ye=x.transparent;p.setupLightsView(B),de===!0&&Ae.setGlobalState(y.clippingPlanes,B),V&&Z.viewport(I.copy(V)),L.length>0&&Wf(L,F,B),ae.length>0&&Wf(ae,F,B),ye.length>0&&Wf(ye,F,B),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function LM(x,F,B,V){if((B.isScene===!0?B.overrideMaterial:null)!==null)return;p.state.transmissionRenderTarget[V.id]===void 0&&(p.state.transmissionRenderTarget[V.id]=new Zr(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")||ie.has("EXT_color_buffer_float")?kc:Pr,minFilter:Ls,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Bt.workingColorSpace}));let ae=p.state.transmissionRenderTarget[V.id],ye=V.viewport||I;ae.setSize(ye.z*y.transmissionResolutionScale,ye.w*y.transmissionResolutionScale);let Ne=y.getRenderTarget(),Ce=y.getActiveCubeFace(),rt=y.getActiveMipmapLevel();y.setRenderTarget(ae),y.getClearColor(X),q=y.getClearAlpha(),q<1&&y.setClearColor(16777215,.5),y.clear(),Ut&&te.render(B);let ct=y.toneMapping;y.toneMapping=$o;let He=V.viewport;if(V.viewport!==void 0&&(V.viewport=void 0),p.setupLightsView(V),de===!0&&Ae.setGlobalState(y.clippingPlanes,V),Wf(x,B,V),Me.updateMultisampleRenderTarget(ae),Me.updateRenderTargetMipmap(ae),ie.has("WEBGL_multisampled_render_to_texture")===!1){let At=!1;for(let Kt=0,En=F.length;Kt<En;Kt++){let ln=F[Kt],Qt=ln.object,$e=ln.geometry,vn=ln.material,Vt=ln.group;if(vn.side===Ki&&Qt.layers.test(V.layers)){let Di=vn.side;vn.side=bi,vn.needsUpdate=!0,kM(Qt,B,V,$e,vn,Vt),vn.side=Di,vn.needsUpdate=!0,At=!0}}At===!0&&(Me.updateMultisampleRenderTarget(ae),Me.updateRenderTargetMipmap(ae))}y.setRenderTarget(Ne,Ce,rt),y.setClearColor(X,q),He!==void 0&&(V.viewport=He),y.toneMapping=ct}function Wf(x,F,B){let V=F.isScene===!0?F.overrideMaterial:null;for(let L=0,ae=x.length;L<ae;L++){let ye=x[L],Ne=ye.object,Ce=ye.geometry,rt=ye.group,ct=ye.material;ct.allowOverride===!0&&V!==null&&(ct=V),Ne.layers.test(B.layers)&&kM(Ne,F,B,Ce,ct,rt)}}function kM(x,F,B,V,L,ae){x.onBeforeRender(y,F,B,V,L,ae),x.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,x.matrixWorld),x.normalMatrix.getNormalMatrix(x.modelViewMatrix),L.onBeforeRender(y,F,B,V,x,ae),L.transparent===!0&&L.side===Ki&&L.forceSinglePass===!1?(L.side=bi,L.needsUpdate=!0,y.renderBufferDirect(B,F,V,L,x,ae),L.side=zo,L.needsUpdate=!0,y.renderBufferDirect(B,F,V,L,x,ae),L.side=Ki):y.renderBufferDirect(B,F,V,L,x,ae),x.onAfterRender(y,F,B,V,L,ae)}function $f(x,F,B){F.isScene!==!0&&(F=sn);let V=oe.get(x),L=p.state.lights,ae=p.state.shadowsArray,ye=L.state.version,Ne=ee.getParameters(x,L.state,ae,F,B),Ce=ee.getProgramCacheKey(Ne),rt=V.programs;V.environment=x.isMeshStandardMaterial?F.environment:null,V.fog=F.fog,V.envMap=(x.isMeshStandardMaterial?C:pt).get(x.envMap||V.environment),V.envMapRotation=V.environment!==null&&x.envMap===null?F.environmentRotation:x.envMapRotation,rt===void 0&&(x.addEventListener("dispose",Re),rt=new Map,V.programs=rt);let ct=rt.get(Ce);if(ct!==void 0){if(V.currentProgram===ct&&V.lightsStateVersion===ye)return BM(x,Ne),ct}else Ne.uniforms=ee.getUniforms(x),x.onBeforeCompile(Ne,y),ct=ee.acquireProgram(Ne,Ce),rt.set(Ce,ct),V.uniforms=Ne.uniforms;let He=V.uniforms;return(!x.isShaderMaterial&&!x.isRawShaderMaterial||x.clipping===!0)&&(He.clippingPlanes=Ae.uniform),BM(x,Ne),V.needsLights=BP(x),V.lightsStateVersion=ye,V.needsLights&&(He.ambientLightColor.value=L.state.ambient,He.lightProbe.value=L.state.probe,He.directionalLights.value=L.state.directional,He.directionalLightShadows.value=L.state.directionalShadow,He.spotLights.value=L.state.spot,He.spotLightShadows.value=L.state.spotShadow,He.rectAreaLights.value=L.state.rectArea,He.ltc_1.value=L.state.rectAreaLTC1,He.ltc_2.value=L.state.rectAreaLTC2,He.pointLights.value=L.state.point,He.pointLightShadows.value=L.state.pointShadow,He.hemisphereLights.value=L.state.hemi,He.directionalShadowMap.value=L.state.directionalShadowMap,He.directionalShadowMatrix.value=L.state.directionalShadowMatrix,He.spotShadowMap.value=L.state.spotShadowMap,He.spotLightMatrix.value=L.state.spotLightMatrix,He.spotLightMap.value=L.state.spotLightMap,He.pointShadowMap.value=L.state.pointShadowMap,He.pointShadowMatrix.value=L.state.pointShadowMatrix),V.currentProgram=ct,V.uniformsList=null,ct}function UM(x){if(x.uniformsList===null){let F=x.currentProgram.getUniforms();x.uniformsList=jc.seqWithValue(F.seq,x.uniforms)}return x.uniformsList}function BM(x,F){let B=oe.get(x);B.outputColorSpace=F.outputColorSpace,B.batching=F.batching,B.batchingColor=F.batchingColor,B.instancing=F.instancing,B.instancingColor=F.instancingColor,B.instancingMorph=F.instancingMorph,B.skinning=F.skinning,B.morphTargets=F.morphTargets,B.morphNormals=F.morphNormals,B.morphColors=F.morphColors,B.morphTargetsCount=F.morphTargetsCount,B.numClippingPlanes=F.numClippingPlanes,B.numIntersection=F.numClipIntersection,B.vertexAlphas=F.vertexAlphas,B.vertexTangents=F.vertexTangents,B.toneMapping=F.toneMapping}function kP(x,F,B,V,L){F.isScene!==!0&&(F=sn),Me.resetTextureUnits();let ae=F.fog,ye=V.isMeshStandardMaterial?F.environment:null,Ne=P===null?y.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:La,Ce=(V.isMeshStandardMaterial?C:pt).get(V.envMap||ye),rt=V.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,ct=!!B.attributes.tangent&&(!!V.normalMap||V.anisotropy>0),He=!!B.morphAttributes.position,At=!!B.morphAttributes.normal,Kt=!!B.morphAttributes.color,En=$o;V.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(En=y.toneMapping);let ln=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,Qt=ln!==void 0?ln.length:0,$e=oe.get(V),vn=p.state.lights;if(de===!0&&(ke===!0||x!==b)){let ui=x===b&&V.id===E;Ae.setState(V,x,ui)}let Vt=!1;V.version===$e.__version?($e.needsLights&&$e.lightsStateVersion!==vn.state.version||$e.outputColorSpace!==Ne||L.isBatchedMesh&&$e.batching===!1||!L.isBatchedMesh&&$e.batching===!0||L.isBatchedMesh&&$e.batchingColor===!0&&L.colorTexture===null||L.isBatchedMesh&&$e.batchingColor===!1&&L.colorTexture!==null||L.isInstancedMesh&&$e.instancing===!1||!L.isInstancedMesh&&$e.instancing===!0||L.isSkinnedMesh&&$e.skinning===!1||!L.isSkinnedMesh&&$e.skinning===!0||L.isInstancedMesh&&$e.instancingColor===!0&&L.instanceColor===null||L.isInstancedMesh&&$e.instancingColor===!1&&L.instanceColor!==null||L.isInstancedMesh&&$e.instancingMorph===!0&&L.morphTexture===null||L.isInstancedMesh&&$e.instancingMorph===!1&&L.morphTexture!==null||$e.envMap!==Ce||V.fog===!0&&$e.fog!==ae||$e.numClippingPlanes!==void 0&&($e.numClippingPlanes!==Ae.numPlanes||$e.numIntersection!==Ae.numIntersection)||$e.vertexAlphas!==rt||$e.vertexTangents!==ct||$e.morphTargets!==He||$e.morphNormals!==At||$e.morphColors!==Kt||$e.toneMapping!==En||$e.morphTargetsCount!==Qt)&&(Vt=!0):(Vt=!0,$e.__version=V.version);let Di=$e.currentProgram;Vt===!0&&(Di=$f(V,F,L));let ol=!1,Ii=!1,Qc=!1,dn=Di.getUniforms(),Ji=$e.uniforms;if(Z.useProgram(Di.program)&&(ol=!0,Ii=!0,Qc=!0),V.id!==E&&(E=V.id,Ii=!0),ol||b!==x){Z.buffers.depth.getReversed()?(xe.copy(x.projectionMatrix),vN(xe),_N(xe),dn.setValue(S,"projectionMatrix",xe)):dn.setValue(S,"projectionMatrix",x.projectionMatrix),dn.setValue(S,"viewMatrix",x.matrixWorldInverse);let xi=dn.map.cameraPosition;xi!==void 0&&xi.setValue(S,bt.setFromMatrixPosition(x.matrixWorld)),he.logarithmicDepthBuffer&&dn.setValue(S,"logDepthBufFC",2/(Math.log(x.far+1)/Math.LN2)),(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial)&&dn.setValue(S,"isOrthographic",x.isOrthographicCamera===!0),b!==x&&(b=x,Ii=!0,Qc=!0)}if(L.isSkinnedMesh){dn.setOptional(S,L,"bindMatrix"),dn.setOptional(S,L,"bindMatrixInverse");let ui=L.skeleton;ui&&(ui.boneTexture===null&&ui.computeBoneTexture(),dn.setValue(S,"boneTexture",ui.boneTexture,Me))}L.isBatchedMesh&&(dn.setOptional(S,L,"batchingTexture"),dn.setValue(S,"batchingTexture",L._matricesTexture,Me),dn.setOptional(S,L,"batchingIdTexture"),dn.setValue(S,"batchingIdTexture",L._indirectTexture,Me),dn.setOptional(S,L,"batchingColorTexture"),L._colorsTexture!==null&&dn.setValue(S,"batchingColorTexture",L._colorsTexture,Me));let Qi=B.morphAttributes;if((Qi.position!==void 0||Qi.normal!==void 0||Qi.color!==void 0)&&Se.update(L,B,Di),(Ii||$e.receiveShadow!==L.receiveShadow)&&($e.receiveShadow=L.receiveShadow,dn.setValue(S,"receiveShadow",L.receiveShadow)),V.isMeshGouraudMaterial&&V.envMap!==null&&(Ji.envMap.value=Ce,Ji.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1),V.isMeshStandardMaterial&&V.envMap===null&&F.environment!==null&&(Ji.envMapIntensity.value=F.environmentIntensity),Ii&&(dn.setValue(S,"toneMappingExposure",y.toneMappingExposure),$e.needsLights&&UP(Ji,Qc),ae&&V.fog===!0&&G.refreshFogUniforms(Ji,ae),G.refreshMaterialUniforms(Ji,V,z,Q,p.state.transmissionRenderTarget[x.id]),jc.upload(S,UM($e),Ji,Me)),V.isShaderMaterial&&V.uniformsNeedUpdate===!0&&(jc.upload(S,UM($e),Ji,Me),V.uniformsNeedUpdate=!1),V.isSpriteMaterial&&dn.setValue(S,"center",L.center),dn.setValue(S,"modelViewMatrix",L.modelViewMatrix),dn.setValue(S,"normalMatrix",L.normalMatrix),dn.setValue(S,"modelMatrix",L.matrixWorld),V.isShaderMaterial||V.isRawShaderMaterial){let ui=V.uniformsGroups;for(let xi=0,S_=ui.length;xi<S_;xi++){let js=ui[xi];O.update(js,Di),O.bind(js,Di)}}return Di}function UP(x,F){x.ambientLightColor.needsUpdate=F,x.lightProbe.needsUpdate=F,x.directionalLights.needsUpdate=F,x.directionalLightShadows.needsUpdate=F,x.pointLights.needsUpdate=F,x.pointLightShadows.needsUpdate=F,x.spotLights.needsUpdate=F,x.spotLightShadows.needsUpdate=F,x.rectAreaLights.needsUpdate=F,x.hemisphereLights.needsUpdate=F}function BP(x){return x.isMeshLambertMaterial||x.isMeshToonMaterial||x.isMeshPhongMaterial||x.isMeshStandardMaterial||x.isShadowMaterial||x.isShaderMaterial&&x.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(x,F,B){let V=oe.get(x);V.__autoAllocateDepthBuffer=x.resolveDepthBuffer===!1,V.__autoAllocateDepthBuffer===!1&&(V.__useRenderToTexture=!1),oe.get(x.texture).__webglTexture=F,oe.get(x.depthTexture).__webglTexture=V.__autoAllocateDepthBuffer?void 0:B,V.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(x,F){let B=oe.get(x);B.__webglFramebuffer=F,B.__useDefaultFramebuffer=F===void 0};let VP=S.createFramebuffer();this.setRenderTarget=function(x,F=0,B=0){P=x,R=F,D=B;let V=!0,L=null,ae=!1,ye=!1;if(x){let Ce=oe.get(x);if(Ce.__useDefaultFramebuffer!==void 0)Z.bindFramebuffer(S.FRAMEBUFFER,null),V=!1;else if(Ce.__webglFramebuffer===void 0)Me.setupRenderTarget(x);else if(Ce.__hasExternalTextures)Me.rebindTextures(x,oe.get(x.texture).__webglTexture,oe.get(x.depthTexture).__webglTexture);else if(x.depthBuffer){let He=x.depthTexture;if(Ce.__boundDepthTexture!==He){if(He!==null&&oe.has(He)&&(x.width!==He.image.width||x.height!==He.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Me.setupDepthRenderbuffer(x)}}let rt=x.texture;(rt.isData3DTexture||rt.isDataArrayTexture||rt.isCompressedArrayTexture)&&(ye=!0);let ct=oe.get(x).__webglFramebuffer;x.isWebGLCubeRenderTarget?(Array.isArray(ct[F])?L=ct[F][B]:L=ct[F],ae=!0):x.samples>0&&Me.useMultisampledRTT(x)===!1?L=oe.get(x).__webglMultisampledFramebuffer:Array.isArray(ct)?L=ct[B]:L=ct,I.copy(x.viewport),H.copy(x.scissor),U=x.scissorTest}else I.copy(Ie).multiplyScalar(z).floor(),H.copy(_t).multiplyScalar(z).floor(),U=Pt;if(B!==0&&(L=VP),Z.bindFramebuffer(S.FRAMEBUFFER,L)&&V&&Z.drawBuffers(x,L),Z.viewport(I),Z.scissor(H),Z.setScissorTest(U),ae){let Ce=oe.get(x.texture);S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+F,Ce.__webglTexture,B)}else if(ye){let Ce=oe.get(x.texture),rt=F;S.framebufferTextureLayer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,Ce.__webglTexture,B,rt)}else if(x!==null&&B!==0){let Ce=oe.get(x.texture);S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,Ce.__webglTexture,B)}E=-1},this.readRenderTargetPixels=function(x,F,B,V,L,ae,ye,Ne=0){if(!(x&&x.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ce=oe.get(x).__webglFramebuffer;if(x.isWebGLCubeRenderTarget&&ye!==void 0&&(Ce=Ce[ye]),Ce){Z.bindFramebuffer(S.FRAMEBUFFER,Ce);try{let rt=x.textures[Ne],ct=rt.format,He=rt.type;if(!he.textureFormatReadable(ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!he.textureTypeReadable(He)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}F>=0&&F<=x.width-V&&B>=0&&B<=x.height-L&&(x.textures.length>1&&S.readBuffer(S.COLOR_ATTACHMENT0+Ne),S.readPixels(F,B,V,L,ge.convert(ct),ge.convert(He),ae))}finally{let rt=P!==null?oe.get(P).__webglFramebuffer:null;Z.bindFramebuffer(S.FRAMEBUFFER,rt)}}},this.readRenderTargetPixelsAsync=function(x,F,B,V,L,ae,ye,Ne=0){return xr(this,null,function*(){if(!(x&&x.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ce=oe.get(x).__webglFramebuffer;if(x.isWebGLCubeRenderTarget&&ye!==void 0&&(Ce=Ce[ye]),Ce)if(F>=0&&F<=x.width-V&&B>=0&&B<=x.height-L){Z.bindFramebuffer(S.FRAMEBUFFER,Ce);let rt=x.textures[Ne],ct=rt.format,He=rt.type;if(!he.textureFormatReadable(ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!he.textureTypeReadable(He))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let At=S.createBuffer();S.bindBuffer(S.PIXEL_PACK_BUFFER,At),S.bufferData(S.PIXEL_PACK_BUFFER,ae.byteLength,S.STREAM_READ),x.textures.length>1&&S.readBuffer(S.COLOR_ATTACHMENT0+Ne),S.readPixels(F,B,V,L,ge.convert(ct),ge.convert(He),0);let Kt=P!==null?oe.get(P).__webglFramebuffer:null;Z.bindFramebuffer(S.FRAMEBUFFER,Kt);let En=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);return S.flush(),yield gN(S,En,4),S.bindBuffer(S.PIXEL_PACK_BUFFER,At),S.getBufferSubData(S.PIXEL_PACK_BUFFER,0,ae),S.deleteBuffer(At),S.deleteSync(En),ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(x,F=null,B=0){let V=Math.pow(2,-B),L=Math.floor(x.image.width*V),ae=Math.floor(x.image.height*V),ye=F!==null?F.x:0,Ne=F!==null?F.y:0;Me.setTexture2D(x,0),S.copyTexSubImage2D(S.TEXTURE_2D,B,0,0,ye,Ne,L,ae),Z.unbindTexture()};let HP=S.createFramebuffer(),zP=S.createFramebuffer();this.copyTextureToTexture=function(x,F,B=null,V=null,L=0,ae=null){ae===null&&(L!==0?(ka("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ae=L,L=0):ae=0);let ye,Ne,Ce,rt,ct,He,At,Kt,En,ln=x.isCompressedTexture?x.mipmaps[ae]:x.image;if(B!==null)ye=B.max.x-B.min.x,Ne=B.max.y-B.min.y,Ce=B.isBox3?B.max.z-B.min.z:1,rt=B.min.x,ct=B.min.y,He=B.isBox3?B.min.z:0;else{let Qi=Math.pow(2,-L);ye=Math.floor(ln.width*Qi),Ne=Math.floor(ln.height*Qi),x.isDataArrayTexture?Ce=ln.depth:x.isData3DTexture?Ce=Math.floor(ln.depth*Qi):Ce=1,rt=0,ct=0,He=0}V!==null?(At=V.x,Kt=V.y,En=V.z):(At=0,Kt=0,En=0);let Qt=ge.convert(F.format),$e=ge.convert(F.type),vn;F.isData3DTexture?(Me.setTexture3D(F,0),vn=S.TEXTURE_3D):F.isDataArrayTexture||F.isCompressedArrayTexture?(Me.setTexture2DArray(F,0),vn=S.TEXTURE_2D_ARRAY):(Me.setTexture2D(F,0),vn=S.TEXTURE_2D),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,F.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,F.unpackAlignment);let Vt=S.getParameter(S.UNPACK_ROW_LENGTH),Di=S.getParameter(S.UNPACK_IMAGE_HEIGHT),ol=S.getParameter(S.UNPACK_SKIP_PIXELS),Ii=S.getParameter(S.UNPACK_SKIP_ROWS),Qc=S.getParameter(S.UNPACK_SKIP_IMAGES);S.pixelStorei(S.UNPACK_ROW_LENGTH,ln.width),S.pixelStorei(S.UNPACK_IMAGE_HEIGHT,ln.height),S.pixelStorei(S.UNPACK_SKIP_PIXELS,rt),S.pixelStorei(S.UNPACK_SKIP_ROWS,ct),S.pixelStorei(S.UNPACK_SKIP_IMAGES,He);let dn=x.isDataArrayTexture||x.isData3DTexture,Ji=F.isDataArrayTexture||F.isData3DTexture;if(x.isDepthTexture){let Qi=oe.get(x),ui=oe.get(F),xi=oe.get(Qi.__renderTarget),S_=oe.get(ui.__renderTarget);Z.bindFramebuffer(S.READ_FRAMEBUFFER,xi.__webglFramebuffer),Z.bindFramebuffer(S.DRAW_FRAMEBUFFER,S_.__webglFramebuffer);for(let js=0;js<Ce;js++)dn&&(S.framebufferTextureLayer(S.READ_FRAMEBUFFER,S.COLOR_ATTACHMENT0,oe.get(x).__webglTexture,L,He+js),S.framebufferTextureLayer(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0,oe.get(F).__webglTexture,ae,En+js)),S.blitFramebuffer(rt,ct,ye,Ne,At,Kt,ye,Ne,S.DEPTH_BUFFER_BIT,S.NEAREST);Z.bindFramebuffer(S.READ_FRAMEBUFFER,null),Z.bindFramebuffer(S.DRAW_FRAMEBUFFER,null)}else if(L!==0||x.isRenderTargetTexture||oe.has(x)){let Qi=oe.get(x),ui=oe.get(F);Z.bindFramebuffer(S.READ_FRAMEBUFFER,HP),Z.bindFramebuffer(S.DRAW_FRAMEBUFFER,zP);for(let xi=0;xi<Ce;xi++)dn?S.framebufferTextureLayer(S.READ_FRAMEBUFFER,S.COLOR_ATTACHMENT0,Qi.__webglTexture,L,He+xi):S.framebufferTexture2D(S.READ_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,Qi.__webglTexture,L),Ji?S.framebufferTextureLayer(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0,ui.__webglTexture,ae,En+xi):S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,ui.__webglTexture,ae),L!==0?S.blitFramebuffer(rt,ct,ye,Ne,At,Kt,ye,Ne,S.COLOR_BUFFER_BIT,S.NEAREST):Ji?S.copyTexSubImage3D(vn,ae,At,Kt,En+xi,rt,ct,ye,Ne):S.copyTexSubImage2D(vn,ae,At,Kt,rt,ct,ye,Ne);Z.bindFramebuffer(S.READ_FRAMEBUFFER,null),Z.bindFramebuffer(S.DRAW_FRAMEBUFFER,null)}else Ji?x.isDataTexture||x.isData3DTexture?S.texSubImage3D(vn,ae,At,Kt,En,ye,Ne,Ce,Qt,$e,ln.data):F.isCompressedArrayTexture?S.compressedTexSubImage3D(vn,ae,At,Kt,En,ye,Ne,Ce,Qt,ln.data):S.texSubImage3D(vn,ae,At,Kt,En,ye,Ne,Ce,Qt,$e,ln):x.isDataTexture?S.texSubImage2D(S.TEXTURE_2D,ae,At,Kt,ye,Ne,Qt,$e,ln.data):x.isCompressedTexture?S.compressedTexSubImage2D(S.TEXTURE_2D,ae,At,Kt,ln.width,ln.height,Qt,ln.data):S.texSubImage2D(S.TEXTURE_2D,ae,At,Kt,ye,Ne,Qt,$e,ln);S.pixelStorei(S.UNPACK_ROW_LENGTH,Vt),S.pixelStorei(S.UNPACK_IMAGE_HEIGHT,Di),S.pixelStorei(S.UNPACK_SKIP_PIXELS,ol),S.pixelStorei(S.UNPACK_SKIP_ROWS,Ii),S.pixelStorei(S.UNPACK_SKIP_IMAGES,Qc),ae===0&&F.generateMipmaps&&S.generateMipmap(vn),Z.unbindTexture()},this.copyTextureToTexture3D=function(x,F,B=null,V=null,L=0){return ka('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(x,F,B,V,L)},this.initRenderTarget=function(x){oe.get(x).__webglFramebuffer===void 0&&Me.setupRenderTarget(x)},this.initTexture=function(x){x.isCubeTexture?Me.setTextureCube(x,0):x.isData3DTexture?Me.setTexture3D(x,0):x.isDataArrayTexture||x.isCompressedArrayTexture?Me.setTexture2DArray(x,0):Me.setTexture2D(x,0),Z.unbindTexture()},this.resetState=function(){R=0,D=0,P=null,Z.reset(),ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Yr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=Bt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Bt._getUnpackColorSpace()}};var eO={camera:{position:{x:0,y:0,z:10},rotation:{x:0,y:0,z:0}},rootGroup:{position:{x:0,y:0,z:0},rotation:{x:-Math.PI/3,y:0,z:-Math.PI/5},scale:new A(1,1,1)}};var ci=class n{loadObjects(){let e=localStorage.getItem("model-data"),t=e?JSON.parse(e):[];return t||[]}setView(e){localStorage.setItem("view",e?JSON.stringify(e):"")}getView(){let e=localStorage.getItem("view");return e?JSON.parse(e):eO}saveObject(e){let t=this.loadObjects(),i=t.findIndex(r=>r.id===e.id&&!r.ghost);i===-1?t.push(e):t[i]=e,t=t.filter(r=>!r.ghost),t.forEach(r=>r.selected=!1),localStorage.setItem("model-data",JSON.stringify(t))}createGhostObject(e){let t=this.loadObjects(),i=t.find(r=>r.id===e&&!r.ghost);if(i&&!t.some(r=>r.id===e&&r.ghost)){let r=Ye($({},i),{ghost:!0,selected:!1});t.push(r),localStorage.setItem("model-data",JSON.stringify(t))}}removeGhostObjects(){let e=this.loadObjects();e=e.filter(t=>!t.ghost),localStorage.setItem("model-data",JSON.stringify(e))}deselectAllObjects(){let e=this.loadObjects();e.forEach(t=>t.selected=!1),localStorage.setItem("model-data",JSON.stringify(e))}generateId(){return Date.now().toString()+Math.random().toString(36)}rectangle(){let e={id:this.generateId(),name:"New Rectangle",type:"Square",l:1,w:1,h:0,position:[0,0,0],rotation:[0,0,0],selected:!0};localStorage.setItem("model-data",JSON.stringify([...this.loadObjects(),e])),location.reload()}circle(){let e={id:this.generateId(),name:"New Circle",type:"Circle",r:1,h:0,position:[0,0,0],rotation:[0,0,0],curveSegments:100,selected:!0};localStorage.setItem("model-data",JSON.stringify([...this.loadObjects(),e])),location.reload()}freeform(){let e={id:this.generateId(),name:"New Freeform",type:"Freeform",commands:[{type:"moveTo",x:0,y:0,new:!1},{type:"lineTo",x:1,y:0,new:!1},{type:"lineTo",x:1,y:1,new:!1}],position:[0,0,0],rotation:[0,0,0],h:2,selected:!0};localStorage.setItem("model-data",JSON.stringify([...this.loadObjects(),e])),location.reload()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hv=class n{constructor(e){this.drawService=e}save(){let e=JSON.stringify(this.drawService.loadObjects()),t=e||JSON.stringify([]),i=Object.assign(document.createElement("a"),{href:URL.createObjectURL(new Blob([t],{type:"application/json"})),download:"model-data.json"});i.click(),URL.revokeObjectURL(i.href)}upload(){if(!window.confirm("Uploading a file will overwrite all changes in the current file. Do you want to continue?"))return;let t=document.createElement("input");t.type="file",t.accept="application/json",t.onchange=()=>xr(null,null,function*(){let i=t.files&&t.files[0];if(i)try{let r=yield i.text();localStorage.setItem("model-data",r),alert('File uploaded and data saved to localStorage as "model-data".'),location.reload()}catch{alert("Invalid JSON file.")}}),t.click()}static \u0275fac=function(t){return new(t||n)(Ge(ci))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var zv=class n{constructor(e,t){this.drawService=e;this.fileService=t}save(){this.fileService.save()}upload(){this.fileService.upload()}rectangle(){this.drawService.rectangle()}circle(){this.drawService.circle()}freeform(){this.drawService.freeform()}static \u0275fac=function(t){return new(t||n)(it(ci),it(Hv))};static \u0275cmp=ht({type:n,selectors:[["app-header"]],decls:20,vars:0,consts:[[1,"main"],["mat-icon-button","",3,"click"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"button",1),lt("click",function(){return i.save()}),ce(2,"mat-icon"),Qe(3,"save"),le()(),ce(4,"button",1),lt("click",function(){return i.upload()}),ce(5,"mat-icon"),Qe(6,"upload"),le()(),Tt(7,"hr"),ce(8,"button",1),lt("click",function(){return i.rectangle()}),ce(9,"mat-icon"),Qe(10,"square"),le()(),ce(11,"button",1),lt("click",function(){return i.circle()}),ce(12,"mat-icon"),Qe(13,"circle"),le()(),ce(14,"button",1),lt("click",function(){return i.freeform()}),ce(15,"mat-icon"),Qe(16,"interests"),le()(),Tt(17,"hr"),ce(18,"h1"),Qe(19,"Minimal CAD"),le()())},dependencies:[$r,Pm,rc,km,Fd],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:3%;gap:1%}hr[_ngcontent-%COMP%]{border:#d9d9d9 solid 1px}mat-icon[_ngcontent-%COMP%]{color:#00000080}mat-icon[_ngcontent-%COMP%]:hover{color:#fff}h1[_ngcontent-%COMP%]{text-shadow:#fff 2px 1px 5px;margin-left:auto}"]})};function B5(n,e){if(n&1){let t=Hi();ce(0,"div",3),lt("click",function(){let r=Jn(t).$implicit,o=Xt();return Qn(o.onClick(r))}),ce(1,"div",4),Qe(2),le(),ce(3,"mat-icon"),Qe(4),le()()}if(n&2){let t=e.$implicit,i=Xt();To(td("object ",t.id===i.selectedObject.id?"selectedObject":"")),qe(2),Wr(t.name),qe(2),Wr(t.type==="Freeform"?"interests":t.type==="Square"?"square":"circle")}}var jv=class n{constructor(e){this.drawService=e}objects=[];selectedObject={};ngOnInit(){this.objects=this.drawService.loadObjects(),this.selectedObject=this.drawService.loadObjects().find(e=>e.selected)||{}}onClick(e){this.selectedObject=e;let t=this.drawService.loadObjects();t.find(i=>i.id===e.id).selected=!0,localStorage.setItem("model-data",JSON.stringify(t)),location.reload()}static \u0275fac=function(t){return new(t||n)(it(ci))};static \u0275cmp=ht({type:n,selectors:[["app-sidebar-left"]],decls:4,vars:0,consts:[[1,"tree"],[1,"objects"],[3,"class"],[3,"click"],[1,"object-name"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"div",1),Zu(2,B5,5,5,"div",2,Yu),le()()),t&2&&(qe(2),Ku(i.objects))},dependencies:[rc],styles:[".tree[_ngcontent-%COMP%]{box-sizing:border-box;padding:0;margin:0;border-top:2px solid red;border-left:2px solid red;border-bottom:2px solid red;width:100%;height:100%;overflow-y:auto}.object[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;border:1px solid #ddd;border-radius:5px;margin:.8vmax 1vw;padding:.1vmax;background:#fafafa;box-shadow:0 1px 2px #0000000a}.object[_ngcontent-%COMP%]:hover{background:#f0f0f0}.selectedObject[_ngcontent-%COMP%]{background-color:gray}"]})};var aO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(it(Rn),it(ft))};static \u0275dir=Ze({type:n})}return n})(),lO=(()=>{class n extends aO{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275dir=Ze({type:n,features:[_n]})}return n})(),iM=new J("");var V5={provide:iM,useExisting:Ni(()=>e_),multi:!0};function H5(){let n=cr()?cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var z5=new J(""),e_=(()=>{class n extends aO{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!H5())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(it(Rn),it(ft),it(z5,8))};static \u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&lt("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[bn([V5]),_n]})}return n})();function rM(n){return n==null||oM(n)===0}function oM(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Pf=new J(""),Ff=new J(""),j5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Us=class{static min(e){return G5(e)}static max(e){return W5(e)}static required(e){return $5(e)}static requiredTrue(e){return q5(e)}static email(e){return X5(e)}static minLength(e){return Y5(e)}static maxLength(e){return Z5(e)}static pattern(e){return K5(e)}static nullValidator(e){return cO()}static compose(e){return mO(e)}static composeAsync(e){return gO(e)}};function G5(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function W5(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function $5(n){return rM(n.value)?{required:!0}:null}function q5(n){return n.value===!0?null:{required:!0}}function X5(n){return rM(n.value)||j5.test(n.value)?null:{email:!0}}function Y5(n){return e=>{let t=e.value?.length??oM(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Z5(n){return e=>{let t=e.value?.length??oM(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function K5(n){if(!n)return cO;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(rM(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function cO(n){return null}function uO(n){return n!=null}function dO(n){return ba(n)?fn(n):n}function fO(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function hO(n,e){return e.map(t=>t(n))}function J5(n){return!n.validate}function pO(n){return n.map(e=>J5(e)?e:t=>e.validate(t))}function mO(n){if(!n)return null;let e=n.filter(uO);return e.length==0?null:function(t){return fO(hO(t,e))}}function sM(n){return n!=null?mO(pO(n)):null}function gO(n){if(!n)return null;let e=n.filter(uO);return e.length==0?null:function(t){let i=hO(t,e).map(dO);return lu(i).pipe(Be(fO))}}function aM(n){return n!=null?gO(pO(n)):null}function tO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vO(n){return n._rawValidators}function _O(n){return n._rawAsyncValidators}function tM(n){return n?Array.isArray(n)?n:[n]:[]}function Wv(n,e){return Array.isArray(n)?n.includes(e):n===e}function nO(n,e){let t=tM(e);return tM(n).forEach(r=>{Wv(t,r)||t.push(r)}),t}function iO(n,e){return tM(e).filter(t=>!Wv(n,t))}var $v=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=aM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ti=class extends $v{name;get formDirective(){return null}get path(){return null}},Xo=class extends $v{_parent=null;name=null;valueAccessor=null},qv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Q5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},epe=Ye($({},Q5),{"[class.ng-submitted]":"isSubmitted"}),yO=(()=>{class n extends qv{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(it(Xo,2))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ft("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[_n]})}return n})(),bO=(()=>{class n extends qv{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(it(Ti,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ft("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[_n]})}return n})();var Df="VALID",Gv="INVALID",Wc="PENDING",If="DISABLED",Bs=class{},Xv=class extends Bs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Rf=class extends Bs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Nf=class extends Bs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},$c=class extends Bs{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Yv=class extends Bs{source;constructor(e){super(),this.source=e}},Zv=class extends Bs{source;constructor(e){super(),this.source=e}};function lM(n){return(t_(n)?n.validators:n)||null}function e8(n){return Array.isArray(n)?sM(n):n||null}function cM(n,e){return(t_(e)?e.asyncValidators:n)||null}function t8(n){return Array.isArray(n)?aM(n):n||null}function t_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function xO(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new be(1e3,"");if(!i[t])throw new be(1001,"")}function EO(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new be(1002,"")})}var Of=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ar(this.statusReactive)}set status(e){ar(()=>this.statusReactive.set(e))}_status=lr(()=>this.statusReactive());statusReactive=nn(void 0);get valid(){return this.status===Df}get invalid(){return this.status===Gv}get pending(){return this.status==Wc}get disabled(){return this.status===If}get enabled(){return this.status!==If}errors;get pristine(){return ar(this.pristineReactive)}set pristine(e){ar(()=>this.pristineReactive.set(e))}_pristine=lr(()=>this.pristineReactive());pristineReactive=nn(!0);get dirty(){return!this.pristine}get touched(){return ar(this.touchedReactive)}set touched(e){ar(()=>this.touchedReactive.set(e))}_touched=lr(()=>this.touchedReactive());touchedReactive=nn(!1);get untouched(){return!this.touched}_events=new Te;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(nO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iO(e,this._rawAsyncValidators))}hasValidator(e){return Wv(this._rawValidators,e)}hasAsyncValidator(e){return Wv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ye($({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Nf(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Nf(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ye($({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Rf(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Rf(!0,i))}markAsPending(e={}){this.status=Wc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $c(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ye($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=If,this.errors=null,this._forEachChild(r=>{r.disable(Ye($({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xv(this.value,i)),this._events.next(new $c(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ye($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Df,this._forEachChild(i=>{i.enable(Ye($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ye($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Df||this.status===Wc)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xv(this.value,t)),this._events.next(new $c(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ye($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?If:Df}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Wc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=dO(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new $c(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?If:this.errors?Gv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wc)?Wc:this._anyControlsHaveStatus(Gv)?Gv:Df}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Rf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Nf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){t_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=e8(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=t8(this._rawAsyncValidators)}},yr=class extends Of{constructor(e,t,i){super(lM(t),cM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){EO(this,!0,e),Object.keys(e).forEach(i=>{xO(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var n_=new J("",{providedIn:"root",factory:()=>i_}),i_="always";function uM(n,e){return[...e.path,n]}function nM(n,e,t=i_){dM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),i8(n,e),o8(n,e),r8(n,e),n8(n,e)}function rO(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Jv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Kv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function n8(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function dM(n,e){let t=vO(n);e.validator!==null?n.setValidators(tO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=_O(n);e.asyncValidator!==null?n.setAsyncValidators(tO(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Kv(e._rawValidators,r),Kv(e._rawAsyncValidators,r)}function Jv(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=vO(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=_O(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Kv(e._rawValidators,i),Kv(e._rawAsyncValidators,i),t}function i8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wO(n,e)})}function r8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function wO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function o8(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function MO(n,e){n==null,dM(n,e)}function s8(n,e){return Jv(n,e)}function a8(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function l8(n){return Object.getPrototypeOf(n.constructor)===lO}function SO(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function c8(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===e_?t=o:l8(o)?i=o:r=o}),r||i||t||null}function u8(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var d8={provide:Ti,useExisting:Ni(()=>Lf)},Af=Promise.resolve(),Lf=(()=>{class n extends Ti{callSetDisabledState;get submitted(){return ar(this.submittedReactive)}_submitted=lr(()=>this.submittedReactive());submittedReactive=nn(!1);_directives=new Set;form;ngSubmit=new Ve;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new yr({},sM(t),aM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Af.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),nM(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Af.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Af.then(()=>{let i=this._findContainer(t.path),r=new yr({});MO(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Af.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Af.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),SO(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Yv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Zv(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(it(Pf,10),it(Ff,10),it(n_,8))};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&lt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[bn([d8]),_n]})}return n})();function oO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var on=class extends Of{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(lM(t),cM(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),t_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(sO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var f8=n=>n instanceof on,h8=(()=>{class n extends Ti{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return uM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275dir=Ze({type:n,standalone:!1,features:[_n]})}return n})();var CO=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),p8={provide:iM,useExisting:Ni(()=>fM),multi:!0},fM=(()=>{class n extends lO{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275dir=Ze({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&lt("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[bn([p8]),_n]})}return n})();var TO=new J("");var m8={provide:Ti,useExisting:Ni(()=>Vs)},Vs=(()=>{class n extends Ti{callSetDisabledState;get submitted(){return ar(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=lr(()=>this._submittedReactive());_submittedReactive=nn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ve;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return nM(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){rO(t.control||null,t,!1),u8(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),SO(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Yv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new Zv(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(rO(i||null,t),f8(r)&&(nM(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);MO(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&s8(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dM(this.form,this),this._oldForm&&Jv(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(it(Pf,10),it(Ff,10),it(n_,8))};static \u0275dir=Ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&lt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[bn([m8]),_n,Sn]})}return n})(),g8={provide:Ti,useExisting:Ni(()=>r_)},r_=(()=>{class n extends h8{name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){DO(this._parent)}static \u0275fac=function(i){return new(i||n)(it(Ti,13),it(Pf,10),it(Ff,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[bn([g8]),_n]})}return n})(),v8={provide:Ti,useExisting:Ni(()=>o_)},o_=(()=>{class n extends Ti{_parent;name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){DO(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return uM(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(i){return new(i||n)(it(Ti,13),it(Pf,10),it(Ff,10))};static \u0275dir=Ze({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[bn([v8]),_n]})}return n})();function DO(n){return!(n instanceof r_)&&!(n instanceof Vs)&&!(n instanceof o_)}var _8={provide:Xo,useExisting:Ni(()=>hM)},hM=(()=>{class n extends Xo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=c8(this,o)}ngOnChanges(t){this._added||this._setUpControl(),a8(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return uM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(it(Ti,13),it(Pf,10),it(Ff,10),it(iM,10),it(TO,8))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[bn([_8]),_n,Sn]})}return n})();var IO=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})(),Qv=class extends Of{constructor(e,t,i){super(lM(t),cM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){EO(this,!1,e),e.forEach((i,r)=>{xO(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var AO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:n_,useValue:t.callSetDisabledState??i_}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[IO]})}return n})(),RO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:TO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:n_,useValue:t.callSetDisabledState??i_}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[IO]})}return n})();var pM=class{_box;_destroyed=new Te;_resizeSubject=new Te;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new dt(t=>{let i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Lt(t=>t.some(i=>i.target===e)),kh({bufferSize:1,refCount:!0}),Un(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},NO=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=M(Le);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(t,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new pM(r)),this._observers.get(r).observe(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b8=["notch"],x8=["matFormFieldNotchedOutline",""],E8=["*"],OO=["iconPrefixContainer"],PO=["textPrefixContainer"],FO=["iconSuffixContainer"],LO=["textSuffixContainer"],w8=["textField"],M8=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],S8=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function C8(n,e){n&1&&Tt(0,"span",20)}function T8(n,e){if(n&1&&(ce(0,"label",19),kt(1,1),Ht(2,C8,1,0,"span",20),le()),n&2){let t=Xt(2);cn("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),yn("for",t._control.disableAutomaticLabeling?null:t._control.id),qe(2),zt(!t.hideRequiredMarker&&t._control.required?2:-1)}}function D8(n,e){if(n&1&&Ht(0,T8,3,5,"label",19),n&2){let t=Xt();zt(t._hasFloatingLabel()?0:-1)}}function I8(n,e){n&1&&Tt(0,"div",7)}function A8(n,e){}function R8(n,e){if(n&1&&Gr(0,A8,0,0,"ng-template",13),n&2){Xt(2);let t=Bl(1);cn("ngTemplateOutlet",t)}}function N8(n,e){if(n&1&&(ce(0,"div",9),Ht(1,R8,1,1,null,13),le()),n&2){let t=Xt();cn("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),qe(),zt(t._forceDisplayInfixLabel()?-1:1)}}function O8(n,e){n&1&&(ce(0,"div",10,2),kt(2,2),le())}function P8(n,e){n&1&&(ce(0,"div",11,3),kt(2,3),le())}function F8(n,e){}function L8(n,e){if(n&1&&Gr(0,F8,0,0,"ng-template",13),n&2){Xt();let t=Bl(1);cn("ngTemplateOutlet",t)}}function k8(n,e){n&1&&(ce(0,"div",14,4),kt(2,4),le())}function U8(n,e){n&1&&(ce(0,"div",15,5),kt(2,5),le())}function B8(n,e){n&1&&Tt(0,"div",16)}function V8(n,e){n&1&&kt(0,6)}function H8(n,e){if(n&1&&(ce(0,"mat-hint",21),Qe(1),le()),n&2){let t=Xt(2);cn("id",t._hintLabelId),qe(),Wr(t.hintLabel)}}function z8(n,e){if(n&1&&(Ht(0,H8,2,2,"mat-hint",21),kt(1,7),Tt(2,"div",22),kt(3,8)),n&2){let t=Xt();zt(t.hintLabel?0:-1)}}var kf=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["mat-label"]]})}return n})(),jO=new J("MatError");var mM=(()=>{class n{align="start";id=M(oi).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(ps("id",r.id),yn("align",null),Ft("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),GO=new J("MatPrefix");var WO=new J("MatSuffix");var $O=new J("FloatingLabelParent"),kO=(()=>{class n{_elementRef=M(ft);get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=M(NO);_ngZone=M(Le);_parent=M($O);_resizeSubscription=new Mt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return j8(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Ft("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function j8(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let i=t.scrollWidth;return t.remove(),i}var UO="mdc-line-ripple--active",s_="mdc-line-ripple--deactivating",BO=(()=>{class n{_elementRef=M(ft);_cleanupTransitionEnd;constructor(){let t=M(Le),i=M(Rn);t.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(s_),t.add(UO)}deactivate(){this._elementRef.nativeElement.classList.add(s_)}_handleTransitionEnd=t=>{let i=this._elementRef.nativeElement.classList,r=i.contains(s_);t.propertyName==="opacity"&&r&&i.remove(UO,s_)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),VO=(()=>{class n{_elementRef=M(ft);_ngZone=M(Le);open=!1;_notch;ngAfterViewInit(){let t=this._elementRef.nativeElement,i=t.querySelector(".mdc-floating-label");i?(t.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):t.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){let i=this._notch.nativeElement;!this.open||!t?i.style.width="":i.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(t){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${t}px)`)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&tn(b8,5),i&2){let o;Rt(o=Nt())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Ft("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:x8,ngContentSelectors:E8,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Wn(),Gn(0,"div",1),Vi(1,"div",2,0),kt(3),sr(),Gn(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),qc=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n})}return n})();var Xc=new J("MatFormField"),qO=new J("MAT_FORM_FIELD_DEFAULT_OPTIONS"),HO="fill",G8="auto",zO="fixed",W8="translateY(-50%)",Uf=(()=>{class n{_elementRef=M(ft);_changeDetectorRef=M(vi);_dir=M(xs);_platform=M(un);_idGenerator=M(oi);_ngZone=M(Le);_defaults=M(qO,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=id("iconPrefixContainer");_textPrefixContainerSignal=id("textPrefixContainer");_iconSuffixContainerSignal=id("iconSuffixContainer");_textSuffixContainerSignal=id("textSuffixContainer");_prefixSuffixContainers=lr(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(t=>t?.nativeElement).filter(t=>t!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=UI(kf);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=sc(t)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||G8}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(t){let i=t||this._defaults?.appearance||HO;this._appearanceSignal.set(i)}_appearanceSignal=nn(HO);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||zO}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||zO}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}_destroyed=new Te;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=Si();constructor(){let t=this._defaults;t&&(t.appearance&&(this.appearance=t.appearance),this._hideRequiredMarker=!!t?.hideRequiredMarker,t.color&&(this.color=t.color)),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=lr(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let i=this._control,r="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(r+t.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(Ai([void 0,void 0]),Be(()=>[i.errorState,i.userAriaDescribedBy]),Lh(),Lt(([[o,s],[a,l]])=>o!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(Un(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),so(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let t=this._control.focused;t&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!t&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",t),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",t)}_syncOutlineLabelOffset(){zI({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let t of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(t,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:t=>this._writeOutlinedLabelStyles(t())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=lr(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let i=this._control?this._control.ngControl:null;return i&&i[t]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;o?t.push(o.id):this._hintLabel&&t.push(this._hintLabelId),s&&t.push(s.id)}else this._errorChildren&&t.push(...this._errorChildren.map(o=>o.id));let i=this._control.describedByIds,r;if(i){let o=this._describedByIds||t;r=t.concat(i.filter(s=>s&&!o.includes(s)))}else r=t;this._control.setDescribedByIds(r),this._describedByIds=t}}_getOutlinedLabelOffset(){let t=this._dir.valueSignal();if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,a=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0,u=s?.getBoundingClientRect().width??0,d=t==="rtl"?"-1":"1",h=`${a+l}px`,m=`calc(${d} * (${h} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,v=`var(--mat-mdc-form-field-label-transform, ${W8} translateX(${m}))`,g=a+l+c+u;return[v,g]}_writeOutlinedLabelStyles(t){if(t!==null){let[i,r]=t;this._floatingLabel&&(this._floatingLabel.element.style.transform=i),r!==null&&this._notchedOutline?._setMaxWidth(r)}}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(U0(o,r._labelChild,kf,5),zi(o,qc,5),zi(o,GO,5),zi(o,WO,5),zi(o,jO,5),zi(o,mM,5)),i&2){Qp();let s;Rt(s=Nt())&&(r._formFieldControl=s.first),Rt(s=Nt())&&(r._prefixChildren=s),Rt(s=Nt())&&(r._suffixChildren=s),Rt(s=Nt())&&(r._errorChildren=s),Rt(s=Nt())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&(Ul(r._iconPrefixContainerSignal,OO,5),Ul(r._textPrefixContainerSignal,PO,5),Ul(r._iconSuffixContainerSignal,FO,5),Ul(r._textSuffixContainerSignal,LO,5),tn(w8,5),tn(OO,5),tn(PO,5),tn(FO,5),tn(LO,5),tn(kO,5),tn(VO,5),tn(BO,5)),i&2){Qp(4);let o;Rt(o=Nt())&&(r._textField=o.first),Rt(o=Nt())&&(r._iconPrefixContainer=o.first),Rt(o=Nt())&&(r._textPrefixContainer=o.first),Rt(o=Nt())&&(r._iconSuffixContainer=o.first),Rt(o=Nt())&&(r._textSuffixContainer=o.first),Rt(o=Nt())&&(r._floatingLabel=o.first),Rt(o=Nt())&&(r._notchedOutline=o.first),Rt(o=Nt())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(i,r){i&2&&Ft("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[bn([{provide:Xc,useExisting:n},{provide:$O,useExisting:n}])],ngContentSelectors:S8,decls:19,vars:25,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["aria-atomic","true","aria-live","polite"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=Hi();Wn(M8),Gr(0,D8,1,1,"ng-template",null,0,H0),ce(2,"div",6,1),lt("click",function(a){return Jn(o),Qn(r._control.onContainerClick(a))}),Ht(4,I8,1,0,"div",7),ce(5,"div",8),Ht(6,N8,2,2,"div",9),Ht(7,O8,3,0,"div",10),Ht(8,P8,3,0,"div",11),ce(9,"div",12),Ht(10,L8,1,1,null,13),kt(11),le(),Ht(12,k8,3,0,"div",14),Ht(13,U8,3,0,"div",15),le(),Ht(14,B8,1,0,"div",16),le(),ce(15,"div",17)(16,"div",18),Ht(17,V8,1,0)(18,z8,4,1),le()()}if(i&2){let o;qe(2),Ft("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),qe(2),zt(!r._hasOutline()&&!r._control.disabled?4:-1),qe(2),zt(r._hasOutline()?6:-1),qe(),zt(r._hasIconPrefix?7:-1),qe(),zt(r._hasTextPrefix?8:-1),qe(2),zt(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),qe(2),zt(r._hasTextSuffix?12:-1),qe(),zt(r._hasIconSuffix?13:-1),qe(),zt(r._hasOutline()?-1:14),qe(),Ft("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let s=r._getSubscriptMessageType();qe(),Ft("mat-mdc-form-field-error-wrapper",s==="error")("mat-mdc-form-field-hint-wrapper",s==="hint"),qe(),zt((o=s)==="error"?17:o==="hint"?18:-1)}},dependencies:[kO,VO,nx,BO,mM],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return n})();var Hs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn,ER,Uf,mn]})}return n})();var q8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return n})(),X8={passive:!0},XO=(()=>{class n{_platform=M(un);_ngZone=M(Le);_renderer=M(An).createRenderer(null,null);_styleLoader=M(Mi);_monitoredElements=new Map;constructor(){}monitor(t){if(!this._platform.isBrowser)return Dn;this._styleLoader.load(q8);let i=Gi(t),r=this._monitoredElements.get(i);if(r)return r.subject;let o=new Te,s="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(s)?(i.classList.add(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1})))},l=this._ngZone.runOutsideAngular(()=>(i.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(i,"animationstart",a,X8)));return this._monitoredElements.set(i,{subject:o,unlisten:l}),o}stopMonitoring(t){let i=Gi(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YO=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})();var ZO=new J("MAT_INPUT_VALUE_ACCESSOR");var a_=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Yc=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(e,t,i,r,o){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,t)??!1;o!==e&&(this.errorState=o,this._stateChanges.next())}};var Y8=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Z8=new J("MAT_INPUT_CONFIG"),KO=(()=>{class n{_elementRef=M(ft);_platform=M(un);ngControl=M(Xo,{optional:!0,self:!0});_autofillMonitor=M(XO);_ngZone=M(Le);_formField=M(Xc,{optional:!0});_renderer=M(Rn);_uid=M(oi).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=M(Z8,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new Te;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=sc(t),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(t){this._id=t||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(Us.required)??!1}set required(t){this._required=sc(t)}_required;get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&_E().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(t){t!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(t):this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=sc(t)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>_E().has(t));constructor(){let t=M(Lf,{optional:!0}),i=M(Vs,{optional:!0}),r=M(a_),o=M(ZO,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();o?_o(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Yc(r,this.ngControl,i,t,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&Vl(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){if(t!==this.focused){if(!this._isNativeSelect&&t&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=t,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Y8.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(t){let i=this._elementRef.nativeElement;t.length?i.setAttribute("aria-describedby",t.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_iOSKeyupListener=t=>{let i=t.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,r){i&1&&lt("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),i&2&&(ps("id",r.id)("disabled",r.disabled&&!r.disabledInteractive)("required",r.required),yn("name",r.name||null)("readonly",r._getReadonlyAttribute())("aria-disabled",r.disabled&&r.disabledInteractive?"true":null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ft("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mat-mdc-input-disabled-interactive",r.disabledInteractive)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ot]},exportAs:["matInput"],features:[bn([{provide:qc,useExisting:n}]),Sn]})}return n})(),JO=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn,Hs,Hs,YO,mn]})}return n})();var QO=(()=>{class n{_animationsDisabled=Si();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){i&2&&Ft("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return n})();var J8=["text"],Q8=[[["mat-icon"]],"*"],e$=["mat-icon","*"];function t$(n,e){if(n&1&&Tt(0,"mat-pseudo-checkbox",1),n&2){let t=Xt();cn("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function n$(n,e){if(n&1&&Tt(0,"mat-pseudo-checkbox",3),n&2){let t=Xt();cn("disabled",t.disabled)}}function i$(n,e){if(n&1&&(ce(0,"span",4),Qe(1),le()),n&2){let t=Xt();qe(),ed("(",t.group.label,")")}}var vM=new J("MAT_OPTION_PARENT_COMPONENT"),_M=new J("MatOptgroup");var gM=class{source;isUserInput;constructor(e,t=!1){this.source=e,this.isUserInput=t}},el=(()=>{class n{_element=M(ft);_changeDetectorRef=M(vi);_parent=M(vM,{optional:!0});group=M(_M,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=M(oi).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(t){this._disabled.set(t)}_disabled=nn(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new Ve;_text;_stateChanges=new Te;constructor(){let t=M(Mi);t.load(ac),t.load(yR),this._signalDisableRipple=!!this._parent&&_o(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,i){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(t.keyCode===13||t.keyCode===32)&&!dr(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new gM(this,t))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-option"]],viewQuery:function(i,r){if(i&1&&tn(J8,7),i&2){let o;Rt(o=Nt())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){i&1&&lt("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(ps("id",r.id),yn("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Ft("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Ot]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:e$,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){i&1&&(Wn(Q8),Ht(0,t$,1,2,"mat-pseudo-checkbox",1),kt(1),ce(2,"span",2,0),kt(4,1),le(),Ht(5,n$,1,1,"mat-pseudo-checkbox",3),Ht(6,i$,2,1,"span",4),Tt(7,"div",5)),i&2&&(zt(r.multiple?0:-1),qe(5),zt(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),qe(),zt(r.group&&r.group._inert?6:-1),qe(),cn("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[QO,WR],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})();function eP(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),o=0;for(let s=0;s<n+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function tP(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}var r$=20,yM=(()=>{class n{_ngZone=M(Le);_platform=M(un);_renderer=M(An).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Te;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=r$){return this._platform.isBrowser?new dt(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(Oh(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Fe()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Lt(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_scrollableContainsElement(t,i){let r=Gi(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var o$=20,tl=(()=>{class n{_platform=M(un);_listeners;_viewportSize;_change=new Te;_document=M(st);constructor(){let t=M(Le),i=M(An).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),s=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(t=o$){return t>0?this._change.pipe(Oh(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var l_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})(),bM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[Es,l_,Es,l_]})}return n})();var Bf=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},xM=class extends Bf{component;viewContainerRef;injector;projectableNodes;constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=r}},nl=class extends Bf{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},EM=class extends Bf{element;constructor(e){super(),this.element=e instanceof ft?e.nativeElement:e}},c_=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof xM)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof nl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof EM)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},u_=class extends c_{outletElement;_appRef;_defaultInjector;constructor(e,t,i){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=i}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(wo,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||It.NULL,o=r.get(pn,i.injector);t=tm(e.component,{elementInjector:r,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),i.attachView(t.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var nP=(()=>{class n extends c_{_moduleRef=M(wo,{optional:!0});_document=M(st);_viewContainerRef=M(gi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new Ve;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,r=i.createComponent(t.component,{index:i.length,injector:t.injector||i.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=t=>{let i=t.element;i.parentNode;let r=this._document.createComment("dom-portal");t.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[_n]})}return n})();var d_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})();var iP=kR();function dP(n){return new f_(n.get(tl),n.get(st))}var f_=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Cn(-this._previousScrollPosition.left),e.style.top=Cn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),iP&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),iP&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};function fP(n,e){return new h_(n.get(yM),n.get(Le),n.get(tl),e)}var h_=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Lt(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Vf=class{enable(){}disable(){}attach(){}};function wM(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return i||r||o||s})}function rP(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return i||r||o||s})}function rl(n,e){return new p_(n.get(yM),n.get(tl),n.get(Le),e)}var p_=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();wM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},hP=(()=>{class n{_injector=M(It);constructor(){}noop=()=>new Vf;close=t=>fP(this._injector,t);block=()=>dP(this._injector);reposition=t=>rl(this._injector,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hf=class{positionStrategy;scrollStrategy=new Vf;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var m_=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var pP=(()=>{class n{_attachedOverlays=[];_document=M(st);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mP=(()=>{class n extends pP{_ngZone=M(Le);_renderer=M(An).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gP=(()=>{class n extends pP{_platform=M(un);_ngZone=M(Le);_renderer=M(An).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let i=this._document.body,r={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,r),o.listen(i,"click",this._clickListener,r),o.listen(i,"auxclick",this._clickListener,r),o.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=_i(t)};_clickListener=t=>{let i=_i(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(oP(a.overlayElement,i)||oP(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=Ui(n)))(r||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oP(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var vP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),_P=(()=>{class n{_platform=M(un);_containerElement;_document=M(st);_styleLoader=M(Mi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||vE()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(t),vE()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(vP)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MM=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},g_=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Te;_attachments=new Te;_detachments=new Te;_positionStrategy;_scrollStrategy;_locationChanges=Mt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Te;_outsidePointerEvents=new Te;_afterNextRenderRef;constructor(e,t,i,r,o,s,a,l,c,u=!1,d,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=hs(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=$($({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Ye($({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Cn(this._config.width),e.height=Cn(this._config.height),e.minWidth=Cn(this._config.minWidth),e.minHeight=Cn(this._config.minHeight),e.maxWidth=Cn(this._config.maxWidth),e.maxHeight=Cn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new MM(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=ic(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=hs(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},sP="cdk-overlay-connected-position-bounding-box",s$=/([A-Za-z%]+)$/;function SM(n,e){return new v_(e,n.get(tl),n.get(st),n.get(un),n.get(_P))}var v_=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Te;_resizeSubscription=Mt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(sP),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,i)){o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(let c of o){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&il(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(sP),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:a}t.left<0&&(r-=t.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let o;return i.overlayY=="center"?o=-t.height/2:o=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){let o=lP(t),{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+o.width-i.width,h=0-a,f=a+o.height-i.height,m=this._subtractOverflows(o.width,u,d),v=this._subtractOverflows(o.height,h,f),g=m*v;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:v===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,o=i.right-t.x,s=aP(this._overlayRef.getConfig().minHeight),a=aP(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=r,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=lP(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0),u=0,d=0;return r.width<=o.width?u=c||-s:u=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?d=l||-a:d=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!a$(this._lastScrollVisibility,i)){let r=new m_(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(t.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(t.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-m/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,c=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,u,d,h;if(c)h=i.width-e.x+this._viewportMargin*2,u=e.x-this._viewportMargin;else if(l)d=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-m/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Cn(i.height),r.top=Cn(i.top),r.bottom=Cn(i.bottom),r.width=Cn(i.width),r.left=Cn(i.left),r.right=Cn(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Cn(o)),s&&(r.maxWidth=Cn(s))}this._lastBoundingBoxSize=i,il(this._boundingBox.style,r)}_resetBoundingBoxStyles(){il(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){il(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();il(i,this._getExactOverlayY(t,e,u)),il(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Cn(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Cn(s.maxWidth):o&&(i.maxWidth="")),il(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Cn(o.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Cn(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:rP(e,i),isOriginOutsideView:wM(e,i),isOverlayClipped:rP(t,i),isOverlayOutsideView:wM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ic(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ft)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function il(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function aP(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(s$);return!t||t==="px"?parseFloat(e):null}return n||null}function lP(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function a$(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var cP="cdk-global-overlay-wrapper";function yP(n){return new __}var __=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(cP),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",m="",v="";l?v="flex-start":u==="center"?(v="center",h?m=d:f=d):h?u==="left"||u==="end"?(v="flex-end",f=d):(u==="right"||u==="start")&&(v="flex-start",m=d):u==="left"||u==="start"?(v="flex-start",f=d):(u==="right"||u==="end")&&(v="flex-end",m=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,t.justifyContent=v,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(cP),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},bP=(()=>{class n{_injector=M(It);constructor(){}global(){return yP()}flexibleConnectedTo(t){return SM(this._injector,t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CM(n,e){n.get(Mi).load(vP);let t=n.get(_P),i=n.get(st),r=n.get(oi),o=n.get(ti),s=n.get(xs),a=i.createElement("div"),l=i.createElement("div");l.id=r.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),t.getContainerElement().appendChild(a);let c=new u_(l,o,n),u=new Hf(e),d=n.get(Rn,null,{optional:!0})||n.get(An).createRenderer(null,null);return u.direction=u.direction||s.value,new g_(c,a,l,u,n.get(Le),n.get(mP),i,n.get(gs),n.get(gP),e?.disableAnimations??n.get(Vu,null,{optional:!0})==="NoopAnimations",n.get(pn),d)}var xP=(()=>{class n{scrollStrategies=M(hP);_positionBuilder=M(bP);_injector=M(It);constructor(){}create(t){return CM(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),l$=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],EP=new J("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=M(It);return()=>rl(n)}}),Jc=(()=>{class n{elementRef=M(ft);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return n})(),y_=(()=>{class n{_dir=M(xs,{optional:!0});_injector=M(It);_overlayRef;_templatePortal;_backdropSubscription=Mt.EMPTY;_attachSubscription=Mt.EMPTY;_detachSubscription=Mt.EMPTY;_positionSubscription=Mt.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=M(EP);_disposeOnNavigation=!1;_ngZone=M(Le);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(t){this._disposeOnNavigation=t}backdropClick=new Ve;positionChange=new Ve;attach=new Ve;detach=new Ve;overlayKeydown=new Ve;overlayOutsideClick=new Ve;constructor(){let t=M(rr),i=M(gi);this._templatePortal=new nl(t,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=l$);let t=this._overlayRef=CM(this._injector,this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!dr(i)&&(i.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=_i(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Hf({direction:this._dir||"ltr",positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let t=SM(this._injector,this._getOrigin());return this._updatePositionStrategy(t),t}_getOrigin(){return this.origin instanceof Jc?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Jc?this.origin.elementRef.nativeElement:this.origin instanceof ft?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe($_(()=>this.positionChange.observers.length>0)).subscribe(t=>{this._ngZone.run(()=>this.positionChange.emit(t)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Ot],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Ot],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Ot],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Ot],push:[2,"cdkConnectedOverlayPush","push",Ot],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Ot]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Sn]})}return n})();function c$(n){let e=M(It);return()=>rl(e)}var u$={provide:EP,useFactory:c$},TM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({providers:[xP,u$],imports:[Es,d_,bM,bM]})}return n})();var zf=(()=>{class n{_listeners=[];notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jf=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Te;constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,t&&t.length&&(e?t.forEach(o=>this._markSelected(o)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);let t=this.selected,i=new Set(e.map(o=>this._getConcreteValue(o)));e.forEach(o=>this._markSelected(o)),t.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,t){if(this.compareWith){t=t??this._selection;for(let i of t)if(this.compareWith(e,i))return i;return e}else return e}};var wP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn]})}return n})();var DM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[Lm,mn,wP,el]})}return n})();var d$=["trigger"],f$=["panel"],h$=[[["mat-select-trigger"]],"*"],p$=["mat-select-trigger","*"];function m$(n,e){if(n&1&&(ce(0,"span",4),Qe(1),le()),n&2){let t=Xt();qe(),Wr(t.placeholder)}}function g$(n,e){n&1&&kt(0)}function v$(n,e){if(n&1&&(ce(0,"span",11),Qe(1),le()),n&2){let t=Xt(2);qe(),Wr(t.triggerValue)}}function _$(n,e){if(n&1&&(ce(0,"span",5),Ht(1,g$,1,0)(2,v$,2,1,"span",11),le()),n&2){let t=Xt();qe(),zt(t.customTrigger?1:2)}}function y$(n,e){if(n&1){let t=Hi();ce(0,"div",12,1),lt("keydown",function(r){Jn(t);let o=Xt();return Qn(o._handleKeydown(r))}),kt(2,1),le()}if(n&2){let t=Xt();To(td("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme())),Ft("mat-select-panel-animations-enabled",!t._animationsDisabled),cn("ngClass",t.panelClass),yn("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}var IM=new J("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=M(It);return()=>rl(n)}});function MP(n){let e=M(It);return()=>rl(e)}var SP=new J("MAT_SELECT_CONFIG"),CP={provide:IM,deps:[],useFactory:MP},TP=new J("MatSelectTrigger"),b_=class{source;value;constructor(e,t){this.source=e,this.value=t}},AM=(()=>{class n{_viewportRuler=M(tl);_changeDetectorRef=M(vi);_elementRef=M(ft);_dir=M(xs,{optional:!0});_idGenerator=M(oi);_renderer=M(Rn);_parentFormField=M(Xc,{optional:!0});ngControl=M(Xo,{self:!0,optional:!0});_liveAnnouncer=M(dE);_defaultOptions=M(SP,{optional:!0});_animationsDisabled=Si();_initialized=new Te;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(t){let i=this.options.toArray()[t];if(i){let r=this.panel.nativeElement,o=eP(t,this.options,this.optionGroups),s=i._getHostElement();t===0&&o===1?r.scrollTop=0:r.scrollTop=tP(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new b_(this,t)}_scrollStrategyFactory=M(IM);_panelOpen=!1;_compareWith=(t,i)=>t===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Te;_errorStateTracker;stateChanges=new Te;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;get disableRipple(){return this._disableRipple()}set disableRipple(t){this._disableRipple.set(t)}_disableRipple=nn(!1);tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(Us.required)??!1}set required(t){this._required=t,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(t){this._selectionModel,this._multiple=t}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=Zs(()=>{let t=this.options;return t?t.changes.pipe(Ai(t),Xn(()=>so(...t.map(i=>i.onSelectionChange)))):this._initialized.pipe(Xn(()=>this.optionSelectionChanges))});openedChange=new Ve;_openedStream=this.openedChange.pipe(Lt(t=>t),Be(()=>{}));_closedStream=this.openedChange.pipe(Lt(t=>!t),Be(()=>{}));selectionChange=new Ve;valueChange=new Ve;constructor(){let t=M(a_),i=M(Lf,{optional:!0}),r=M(Vs,{optional:!0}),o=M(new Do("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new Yc(t,this.ngControl,r,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new jf(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(Un(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Un(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Ai(null),Un(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(qn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let t=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;let i=`${this.id}-panel`;this._trackedModal&&gE(this._trackedModal,"aria-owns",i),NR(t,"aria-owns",i),this._trackedModal=t}_clearFromModal(){if(!this._trackedModal)return;let t=`${this.id}-panel`;gE(this._trackedModal,"aria-owns",t),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{i(),clearTimeout(r),this._cleanupDetach=void 0};let t=this.panel.nativeElement,i=this._renderer.listen(t,"animationend",o=>{o.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),r=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);t.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){let i=t.keyCode,r=i===40||i===38||i===37||i===39,o=i===13||i===32,s=this._keyManager;if(!s.isTyping()&&o&&!dr(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(t);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){let i=this._keyManager,r=t.keyCode,o=r===40||r===38,s=i.isTyping();if(o&&t.altKey)t.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&i.activeItem&&!dr(t))t.preventDefault(),i.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&t.ctrlKey){t.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=i.activeItemIndex;i.onKeydown(t),this._multiple&&o&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}}_handleOverlayKeydown(t){t.keyCode===27&&!dr(t)&&(t.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){let i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(r.value!=null||this.canSelectNullableOptions)&&this._compareWith(r.value,t)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return t!==this._value||this._multiple&&Array.isArray(t)?(this.options&&this._setSelectionByValue(t),this._value=t,!0):!1}_skipPredicate=t=>this.panelOpen?!1:t.disabled;_getOverlayWidth(t){return this.panelWidth==="auto"?(t instanceof Jc?t.elementRef:t||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let t of this.options)t._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new Nd(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let t=so(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Un(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),so(...this.options.map(i=>i._stateChanges)).pipe(Un(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,i){let r=this._selectionModel.isSelected(t);!this.canSelectNullableOptions&&t.value==null&&!this._multiple?(t.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(t.value)):(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i;this.multiple?i=this.selected.map(r=>r.value):i=this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let t=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){t=i;break}this._keyManager.setActiveItem(t)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let t=this._parentFormField?.getLabelId()||null,i=t?t+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let t=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(t+=" "+this.ariaLabelledby),t||(t=this._valueId),t}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-select"]],contentQueries:function(i,r,o){if(i&1&&(zi(o,TP,5),zi(o,el,5),zi(o,_M,5)),i&2){let s;Rt(s=Nt())&&(r.customTrigger=s.first),Rt(s=Nt())&&(r.options=s),Rt(s=Nt())&&(r.optionGroups=s)}},viewQuery:function(i,r){if(i&1&&(tn(d$,5),tn(f$,5),tn(y_,5)),i&2){let o;Rt(o=Nt())&&(r.trigger=o.first),Rt(o=Nt())&&(r.panel=o.first),Rt(o=Nt())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,r){i&1&&lt("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),i&2&&(yn("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),Ft("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Ot],disableRipple:[2,"disableRipple","disableRipple",Ot],tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:Ea(t)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ot],placeholder:"placeholder",required:[2,"required","required",Ot],multiple:[2,"multiple","multiple",Ot],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Ot],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Ea],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",Ot]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[bn([{provide:qc,useExisting:n},{provide:vM,useExisting:n}]),Sn],ngContentSelectors:p$,decls:11,vars:9,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,r){if(i&1){let o=Hi();Wn(h$),ce(0,"div",2,0),lt("click",function(){return Jn(o),Qn(r.open())}),ce(3,"div",3),Ht(4,m$,2,1,"span",4)(5,_$,3,1,"span",5),le(),ce(6,"div",6)(7,"div",7),Cl(),ce(8,"svg",8),Tt(9,"path",9),le()()()(),Gr(10,y$,3,10,"ng-template",10),lt("detach",function(){return Jn(o),Qn(r.close())})("backdropClick",function(){return Jn(o),Qn(r.close())})("overlayKeydown",function(a){return Jn(o),Qn(r._handleOverlayKeydown(a))})}if(i&2){let o=Bl(1);qe(3),yn("id",r._valueId),qe(),zt(r.empty?4:5),qe(6),cn("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)}},dependencies:[Jc,y_,tx],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return n})();var RM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({providers:[CP],imports:[TM,DM,mn,l_,Hs,DM,mn]})}return n})();var DP=new J("CdkAccordion");var IP=(()=>{class n{accordion=M(DP,{optional:!0,skipSelf:!0});_changeDetectorRef=M(vi);_expansionDispatcher=M(zf);_openCloseAllSubscription=Mt.EMPTY;closed=new Ve;opened=new Ve;destroyed=new Ve;expandedChange=new Ve;id=M(oi).getId("cdk-accordion-child-");get expanded(){return this._expanded}set expanded(t){if(this._expanded!==t){if(this._expanded=t,this.expandedChange.emit(t),t){this.opened.emit();let i=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,i)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}_expanded=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(t)}_disabled=nn(!1);_removeUniqueSelectionListener=()=>{};constructor(){}ngOnInit(){this._removeUniqueSelectionListener=this._expansionDispatcher.listen((t,i)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===i&&this.id!==t&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",Ot],disabled:[2,"disabled","disabled",Ot]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[bn([{provide:DP,useValue:void 0}])]})}return n})(),AP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({})}return n})();var x$=["body"],E$=["bodyWrapper"],w$=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],M$=["mat-expansion-panel-header","*","mat-action-row"];function S$(n,e){}var C$=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],T$=["mat-panel-title","mat-panel-description","*"];function D$(n,e){n&1&&(Vi(0,"span",1),Cl(),Vi(1,"svg",2),Gn(2,"path",3),sr()())}var RP=new J("MAT_ACCORDION"),NP=new J("MAT_EXPANSION_PANEL"),I$=(()=>{class n{_template=M(rr);_expansionPanel=M(NP,{optional:!0});constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]})}return n})(),OP=new J("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),NM=(()=>{class n extends IP{_viewContainerRef=M(gi);_animationsDisabled=Si();_document=M(st);_ngZone=M(Le);_elementRef=M(ft);_renderer=M(Rn);_cleanupTransitionEnd;get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=t}_hideToggle=!1;get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_togglePosition;afterExpand=new Ve;afterCollapse=new Ve;_inputChanges=new Te;accordion=M(RP,{optional:!0,skipSelf:!0});_lazyContent;_body;_bodyWrapper;_portal;_headerId=M(oi).getId("mat-expansion-panel-header-");constructor(){super();let t=M(OP,{optional:!0});this._expansionDispatcher=M(zf),t&&(this.hideToggle=t.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ai(null),Lt(()=>this.expanded&&!this._portal),qn(1)).subscribe(()=>{this._portal=new nl(this._lazyContent._template,this._viewContainerRef)}),this._setupAnimationEvents()}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransitionEnd?.(),this._inputChanges.complete()}_containsFocus(){if(this._body){let t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}_transitionEndListener=({target:t,propertyName:i})=>{t===this._bodyWrapper?.nativeElement&&i==="grid-template-rows"&&this._ngZone.run(()=>{this.expanded?this.afterExpand.emit():this.afterCollapse.emit()})};_setupAnimationEvents(){this._ngZone.runOutsideAngular(()=>{this._animationsDisabled?(this.opened.subscribe(()=>this._ngZone.run(()=>this.afterExpand.emit())),this.closed.subscribe(()=>this._ngZone.run(()=>this.afterCollapse.emit()))):setTimeout(()=>{let t=this._elementRef.nativeElement;this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this._transitionEndListener),t.classList.add("mat-expansion-panel-animations-enabled")},200)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(i&1&&zi(o,I$,5),i&2){let s;Rt(s=Nt())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(i&1&&(tn(x$,5),tn(E$,5)),i&2){let o;Rt(o=Nt())&&(r._body=o.first),Rt(o=Nt())&&(r._bodyWrapper=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:4,hostBindings:function(i,r){i&2&&Ft("mat-expanded",r.expanded)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",Ot],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[bn([{provide:RP,useValue:void 0},{provide:NP,useExisting:n}]),_n,Sn],ngContentSelectors:M$,decls:9,vars:4,consts:[["bodyWrapper",""],["body",""],[1,"mat-expansion-panel-content-wrapper"],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){i&1&&(Wn(w$),kt(0),ce(1,"div",2,0)(3,"div",3,1)(5,"div",4),kt(6,1),Gr(7,S$,0,0,"ng-template",5),le(),kt(8,2),le()()),i&2&&(qe(),yn("inert",r.expanded?null:""),qe(2),cn("id",r.id),yn("aria-labelledby",r._headerId),qe(4),cn("cdkPortalOutlet",r._portal))},dependencies:[nP],styles:[`.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;position:relative;background:var(--mat-expansion-container-background-color, var(--mat-sys-surface));color:var(--mat-expansion-container-text-color, var(--mat-sys-on-surface));border-radius:var(--mat-expansion-container-shape, 12px)}.mat-expansion-panel.mat-expansion-panel-animations-enabled{transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:var(--mat-expansion-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape, 12px);border-top-left-radius:var(--mat-expansion-container-shape, 12px)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape, 12px);border-bottom-left-radius:var(--mat-expansion-container-shape, 12px)}@media(forced-colors: active){.mat-expansion-panel{outline:solid 1px}}.mat-expansion-panel-content-wrapper{display:grid;grid-template-rows:0fr;grid-template-columns:100%}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content-wrapper{transition:grid-template-rows 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{grid-template-rows:1fr}@supports not (grid-template-rows: 0fr){.mat-expansion-panel-content-wrapper{height:0}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper{height:auto}}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;min-height:0;visibility:hidden;font-family:var(--mat-expansion-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-sys-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-sys-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-sys-body-large-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-content{transition:visibility 190ms linear}.mat-expansion-panel.mat-expanded>.mat-expansion-panel-content-wrapper>.mat-expansion-panel-content{visibility:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-sys-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}
`],encapsulation:2,changeDetection:0})}return n})();var PP=(()=>{class n{panel=M(NM,{host:!0});_element=M(ft);_focusMonitor=M(Rd);_changeDetectorRef=M(vi);_parentChangeSubscription=Mt.EMPTY;constructor(){M(Mi).load(ac);let t=this.panel,i=M(OP,{optional:!0}),r=M(new Do("tabindex"),{optional:!0}),o=t.accordion?t.accordion._stateChanges.pipe(Lt(s=>!!(s.hideToggle||s.togglePosition))):Dn;this.tabIndex=parseInt(r||"")||0,this._parentChangeSubscription=so(t.opened,t.closed,o,t._inputChanges.pipe(Lt(s=>!!(s.hideToggle||s.disabled||s.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Lt(()=>t._containsFocus())).subscribe(()=>this._focusMonitor.focusVia(this._element,"program")),i&&(this.expandedHeight=i.expandedHeight,this.collapsedHeight=i.collapsedHeight)}expandedHeight;collapsedHeight;tabIndex=0;get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:dr(t)||(t.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t);return}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ht({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:13,hostBindings:function(i,r){i&1&&lt("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),i&2&&(yn("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Qu("height",r._getHeaderHeight()),Ft("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after",r._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",r._getTogglePosition()==="before"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:Ea(t)]},ngContentSelectors:T$,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){i&1&&(Wn(C$),Vi(0,"span",0),kt(1),kt(2,1),kt(3,2),sr(),Ht(4,D$,3,0,"span",1)),i&2&&(Ft("mat-content-hide-toggle",!r._showToggle()),qe(4),zt(r._showToggle()?4:-1))},styles:[`.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;height:var(--mat-expansion-header-collapsed-state-height, 48px);font-family:var(--mat-expansion-header-text-font, var(--mat-sys-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-sys-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-sys-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-sys-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-sys-title-medium-tracking))}.mat-expansion-panel-animations-enabled .mat-expansion-panel-header{transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header::before{border-radius:inherit}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height, 64px)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-sys-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-sys-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-sys-on-surface-variant))}.mat-expansion-panel-animations-enabled .mat-expansion-indicator{transition:transform 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header.mat-expanded .mat-expansion-indicator{transform:rotate(180deg)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-sys-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, none)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-sys-on-surface-variant));display:var(--mat-expansion-header-indicator-display, inline-block)}@media(forced-colors: active){.mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}}
`],encapsulation:2,changeDetection:0})}return n})();var FP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ze({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]})}return n})();var LP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=at({type:n});static \u0275inj=nt({imports:[mn,AP,d_]})}return n})();var R$=()=>["Circle","Freeform"];function N$(n,e){n&1&&(ce(0,"mat-form-field",8)(1,"mat-label"),Qe(2,"Control X"),le(),Tt(3,"input",26),le(),ce(4,"mat-form-field",8)(5,"mat-label"),Qe(6,"Control Y"),le(),Tt(7,"input",27),le())}function O$(n,e){if(n&1){let t=Hi();ce(0,"div",19)(1,"mat-form-field",8)(2,"mat-label"),Qe(3,"Type"),le(),ce(4,"mat-select",21)(5,"mat-option",22),Qe(6,"moveTo"),le(),ce(7,"mat-option",23),Qe(8,"lineTo"),le(),ce(9,"mat-option",24),Qe(10,"quadraticCurveTo"),le()()(),ce(11,"mat-form-field",8)(12,"mat-label"),Qe(13,"X"),le(),Tt(14,"input",12),le(),ce(15,"mat-form-field",8)(16,"mat-label"),Qe(17,"Y"),le(),Tt(18,"input",13),le(),Ht(19,N$,8,0),ce(20,"button",25),lt("click",function(){let r=Jn(t).$index,o=Xt(2);return Qn(o.removeCommand(r))}),ce(21,"mat-icon"),Qe(22,"delete"),le()()()}if(n&2){let t=e.$implicit,i=e.$index;cn("formGroupName",i),qe(19),zt(t.value.type==="quadraticCurveTo"?19:-1)}}function P$(n,e){if(n&1){let t=Hi();ce(0,"mat-expansion-panel",6)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),Qe(3,"Commands"),le()(),ce(4,"div",18),Zu(5,O$,23,2,"div",19,Yu),ce(7,"button",20),lt("click",function(){Jn(t);let r=Xt();return Qn(r.addCommand())}),Qe(8,"Add Command"),le()()()}if(n&2){let t=Xt();qe(5),Ku(t.commands.controls)}}function F$(n,e){n&1&&(ce(0,"mat-form-field",8)(1,"mat-label"),Qe(2,"Width"),le(),Tt(3,"input",28),le(),ce(4,"mat-form-field",8)(5,"mat-label"),Qe(6,"Length"),le(),Tt(7,"input",29),le())}function L$(n,e){n&1&&(ce(0,"mat-form-field",8)(1,"mat-label"),Qe(2,"Radius"),le(),Tt(3,"input",30),le(),ce(4,"mat-form-field",8)(5,"mat-label"),Qe(6,"Curve Segments"),le(),Tt(7,"input",31),le())}function k$(n,e){n&1&&(ce(0,"mat-expansion-panel",10)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),Qe(3,"Position"),le()(),ce(4,"mat-form-field",8)(5,"mat-label"),Qe(6,"X"),le(),Tt(7,"input",12),le(),ce(8,"mat-form-field",8)(9,"mat-label"),Qe(10,"Y"),le(),Tt(11,"input",13),le(),ce(12,"mat-form-field",8)(13,"mat-label"),Qe(14,"Z"),le(),Tt(15,"input",14),le()())}var x_=class n{constructor(e,t){this.elementRef=e;this.drawService=t}position=[0,0,0];selectedObjectInput=[];positionChange=new Ve;selectedObject={};selectedObjectType;form=new yr({name:new on("New Object"),size:new yr({length:new on(0),height:new on(0),width:new on(0),radius:new on(0),curveSegments:new on(100)}),position:new yr({x:new on(0),y:new on(0),z:new on(0)}),rotation:new yr({x:new on(0),y:new on(0),z:new on(0)}),start:new yr({x:new on(0),y:new on(0),z:new on(0)}),end:new yr({x:new on(0),y:new on(0),z:new on(0)}),commands:new Qv([])});ngOnInit(){this.initForm(),this.selectedObject&&this.selectedObject.id&&this.drawService.createGhostObject(this.selectedObject.id),this.form.get("position")?.valueChanges.subscribe(e=>{this.positionChange.emit([e.x,e.y,e.z])}),this.form.valueChanges.pipe(es(500)).subscribe(()=>{this.updatePreview()})}get commands(){return this.form.get("commands")}createCommandGroup(e){let t={type:new on({value:e?.type??"lineTo",disabled:!1},Us.required),new:new on(e?.new??!1),x:new on(e?.x??0),y:new on(e?.y??0)};return e?.type==="quadraticCurveTo"&&(t.cpX=new on(e?.cpX??0),t.cpY=new on(e?.cpY??0)),new yr(t)}initForm(){if(this.selectedObject=this.drawService.loadObjects().find(e=>e.selected)||null,this.selectedObjectType=this.selectedObject?.type,this.selectedObject){let e={name:this.selectedObject.name};this.selectedObject.type==="Square"||this.selectedObject.type==="Circle"?(e.size=$({length:this.selectedObject.l??0,width:this.selectedObject.w??0,height:this.selectedObject.h??0,radius:this.selectedObject.r??0},this.selectedObject.type==="Circle"?{curveSegments:this.selectedObject.curveSegments??100}:{}),e.position={x:this.selectedObject.position?.[0]??0,y:this.selectedObject.position?.[1]??0,z:this.selectedObject.position?.[2]??0}):this.selectedObject.type==="Freeform"&&(e.position={x:this.selectedObject.position?.[0]??0,y:this.selectedObject.position?.[1]??0,z:this.selectedObject.position?.[2]??0},e.size={height:this.selectedObject.h??0},(this.selectedObject.commands??[]).forEach(i=>this.commands.push(this.createCommandGroup(i)))),e.rotation={x:this.selectedObject.rotation?.[0]??0,y:this.selectedObject.rotation?.[1]??0,z:this.selectedObject.rotation?.[2]??0},this.form.patchValue(e)}}addCommand(){this.commands.push(this.createCommandGroup())}removeCommand(e){this.commands.removeAt(e)}updatePreview(){this.selectedObject&&(this.saveToLocalStorage(),window.location.reload())}saveToLocalStorage(){let e={};if(this.selectedObjectType==="Square")e={name:this.form.value.name,type:this.selectedObjectType,l:this.form.value.size.length,w:this.form.value.size.width,h:this.form.value.size.height,position:[this.form.value.position.x,this.form.value.position.y,this.form.value.position.z]};else if(this.selectedObjectType==="Circle")e={name:this.form.value.name,type:this.selectedObjectType,r:this.form.value.size.radius,h:this.form.value.size.height,curveSegments:this.form.value.size.curveSegments,position:[this.form.value.position.x,this.form.value.position.y,this.form.value.position.z]};else if(this.selectedObjectType==="Freeform"){let r=(this.form.value.commands||[]).map(o=>o.type==="moveTo"||o.type==="lineTo"?{type:o.type,x:Number(o.x),y:Number(o.y),new:!!o.new}:o.type==="quadraticCurveTo"?{type:"quadraticCurveTo",cpX:Number(o.cpX),cpY:Number(o.cpY),x:Number(o.x),y:Number(o.y),new:!!o.new}:o.type==="bezierCurveTo"?{type:"bezierCurveTo",cp1X:Number(o.cp1X??o.cp1x),cp1Y:Number(o.cp1Y??o.cp1y),cp2X:Number(o.cp2X??o.cp2x),cp2Y:Number(o.cp2Y??o.cp2y),x:Number(o.x),y:Number(o.y),new:!!o.new}:null).filter(o=>!!o);e={name:this.form.value.name,type:this.selectedObjectType,commands:r,position:[this.form.value.position.x,this.form.value.position.y,this.form.value.position.z],h:this.form.value.size.height}}let t=this.drawService.loadObjects();e.id=this.selectedObject?.id,e.rotation=[this.form.value.rotation.x,this.form.value.rotation.y,this.form.value.rotation.z],e.selected=!0;let i=t.findIndex(r=>r.id===this.selectedObject.id&&!r.ghost);i!==-1&&(t[i]=$({},e)),localStorage.setItem("model-data",JSON.stringify(t))}onSubmit(){this.selectedObject&&(this.saveToLocalStorage(),this.drawService.saveObject(this.selectedObject),window.location.reload())}onClose(){this.drawService.removeGhostObjects(),this.drawService.deselectAllObjects(),this.selectedObject=null,location.reload()}onDelete(){if(window.confirm(`You are about to delete ${this.selectedObject.name}. Proceed?`)){let e=this.drawService.loadObjects();e=e.filter(t=>t.id!==this.selectedObject.id),localStorage.setItem("model-data",JSON.stringify(e)),this.selectedObject=null,location.reload()}}isDragging=!1;startX=0;startY=0;initialX=0;initialY=0;onMouseDown(e){this.isDragging=!0,this.startX=e.clientX,this.startY=e.clientY;let t=this.elementRef.nativeElement.getBoundingClientRect();this.initialX=t.left,this.initialY=t.top,e.preventDefault()}onMouseMove(e){if(!this.isDragging)return;let t=e.clientX-this.startX,i=e.clientY-this.startY,r=this.initialX+t,o=this.initialY+i,s=document.querySelector(".main-view"),a=this.elementRef.nativeElement;if(s){let l=s.getBoundingClientRect(),c=a.getBoundingClientRect(),u=l.left,d=l.right-c.width;r=Math.max(u,Math.min(d,r));let h=l.top,f=l.bottom-c.height;o=Math.max(h,Math.min(f,o))}this.elementRef.nativeElement.style.left=`${r}px`,this.elementRef.nativeElement.style.top=`${o}px`,this.elementRef.nativeElement.style.right="auto",this.positionChange.emit([r,o,this.position[2]])}onMouseUp(){this.isDragging=!1}static \u0275fac=function(t){return new(t||n)(it(ft),it(ci))};static \u0275cmp=ht({type:n,selectors:[["app-sidebar-right"]],hostBindings:function(t,i){t&1&&lt("mousemove",function(o){return i.onMouseMove(o)},Bp)("mouseup",function(){return i.onMouseUp()},Bp)},inputs:{position:"position",selectedObjectInput:"selectedObjectInput"},outputs:{positionChange:"positionChange"},decls:44,vars:6,consts:[[1,"sidebar-content"],[3,"formGroup"],[1,"formheader"],["type","text","formControlName","name","placeholder","Titel eingeben...",1,"name-header"],["mat-icon-button","",3,"mousedown"],["mat-icon-button","",3,"click"],["expanded",""],["expanded","","formGroupName","size"],["appearance","outline"],["matInput","","type","number","formControlName","height"],["formGroupName","position"],["formGroupName","rotation"],["matInput","","type","number","formControlName","x"],["matInput","","type","number","formControlName","y"],["matInput","","type","number","formControlName","z"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-raised-button","","color","warn","type","button",3,"click"],["formArrayName","commands"],[1,"command-group",3,"formGroupName"],["mat-raised-button","","color","primary","type","button",3,"click"],["formControlName","type"],["value","moveTo"],["value","lineTo"],["value","quadraticCurveTo"],["mat-icon-button","","type","button",3,"click"],["matInput","","type","number","formControlName","cpX"],["matInput","","type","number","formControlName","cpY"],["matInput","","type","number","formControlName","length"],["matInput","","type","number","formControlName","width"],["matInput","","type","number","formControlName","radius"],["matInput","","type","number","formControlName","curveSegments"]],template:function(t,i){t&1&&(ce(0,"div",0)(1,"form",1)(2,"div",2)(3,"h1"),Tt(4,"input",3),le(),ce(5,"button",4),lt("mousedown",function(o){return i.onMouseDown(o)}),ce(6,"mat-icon"),Qe(7,"open_with"),le()(),ce(8,"button",5),lt("click",function(){return i.onClose()}),ce(9,"mat-icon"),Qe(10,"close"),le()()(),Ht(11,P$,9,0,"mat-expansion-panel",6),ce(12,"mat-expansion-panel",7)(13,"mat-expansion-panel-header")(14,"mat-panel-title"),Qe(15,"Size"),le()(),Ht(16,F$,8,0),ce(17,"mat-form-field",8)(18,"mat-label"),Qe(19,"Height"),le(),Tt(20,"input",9),le(),Ht(21,L$,8,0),le(),Ht(22,k$,16,0,"mat-expansion-panel",10),ce(23,"mat-expansion-panel",11)(24,"mat-expansion-panel-header")(25,"mat-panel-title"),Qe(26,"Rotation"),le()(),ce(27,"mat-form-field",8)(28,"mat-label"),Qe(29,"X"),le(),Tt(30,"input",12),le(),ce(31,"mat-form-field",8)(32,"mat-label"),Qe(33,"Y"),le(),Tt(34,"input",13),le(),ce(35,"mat-form-field",8)(36,"mat-label"),Qe(37,"Z"),le(),Tt(38,"input",14),le()(),ce(39,"div",15)(40,"button",16),lt("click",function(){return i.onSubmit()}),Qe(41,"Apply"),le(),ce(42,"button",17),lt("click",function(){return i.onDelete()}),Qe(43,"Delete"),le()()()()),t&2&&(qe(),cn("formGroup",i.form),qe(10),zt(i.selectedObject.type==="Freeform"?11:-1),qe(5),zt(B0(5,R$).includes(i.selectedObject.type)?-1:16),qe(5),zt(i.selectedObject.type==="Circle"?21:-1),qe(),zt(i.selectedObject.type!=="Freeform"?22:-1))},dependencies:[$r,Hs,Uf,kf,JO,KO,RM,AM,el,km,ZR,Fd,AO,CO,e_,fM,yO,bO,RO,Vs,hM,r_,o_,Pm,rc,LP,NM,PP,FP],styles:['.sidebar-content[_ngcontent-%COMP%]{height:100%;max-height:60vh;width:100%;background-color:#e8e8e8;border:2px solid #e57373;border-radius:10px;overflow-y:auto;padding:1rem;box-sizing:border-box;overflow-x:scroll}.formheader[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;padding:.5rem;background-color:#f5f5f5;border-radius:8px;box-shadow:0 2px 4px #0000001a;border-left:4px solid #e57373}.formheader[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{flex-grow:1;margin:0;padding:0}.name-header[_ngcontent-%COMP%]{border:none;background:transparent;font-size:1.2rem;font-weight:700;color:#333;width:100%;padding:.25rem .5rem;outline:none;border-radius:4px;transition:background-color .2s ease}.name-header[_ngcontent-%COMP%]:focus{background-color:#ffcdcd}.name-header[_ngcontent-%COMP%]::placeholder{color:#999;font-weight:400}  .mat-mdc-form-field{width:100%}  .mat-expansion-panel-header:hover{background-color:#ffa1a1!important}  .mat-expansion-panel-body{padding:1rem!important;background-color:#f5f5f5}.command-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;padding:1rem;background-color:#f0f0f0;border-radius:8px;margin-bottom:1rem;border:1px solid #e0e0e0}.command-group[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background-color:#e57373;border-radius:4px 0 0 4px}.command-group[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border-radius:50%;width:40px;height:40px;margin-left:.5rem;transition:all .2s ease}.command-group[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]:hover{background-color:#c82333;transform:scale(1.05)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;padding:1rem;border:1px solid #e0e0e0;border-radius:5px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.5rem;border-radius:6px;transition:all .2s ease}  .mat-mdc-raised-button.mat-primary{background-color:#e57373!important;color:#fff!important}  .mat-mdc-raised-button.mat-primary:hover{background-color:#d32f2f!important;transform:translateY(-1px);box-shadow:0 4px 8px #e573734d!important}  .mat-mdc-raised-button.mat-warn{background-color:#dc3545!important;color:#fff!important}  .mat-mdc-raised-button.mat-warn:hover{background-color:#c82333!important;transform:translateY(-1px);box-shadow:0 4px 8px #dc35454d!important}button[mat-raised-button][color=primary][_ngcontent-%COMP%]:not(.form-actions button){width:100%;margin-top:1rem;background-color:#81c784;border-radius:6px}  button[mat-raised-button][color=primary]:not(.form-actions button):hover{background-color:#66bb6a!important;transform:translateY(-1px);box-shadow:0 4px 8px #81c7844d!important}.form-actions[_ngcontent-%COMP%]   button[mat-raised-button][color=primary][_ngcontent-%COMP%]:hover{background-color:#66bb6a!important;transform:translateY(-1px);box-shadow:0 4px 8px #81c7844d!important}.formheader[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{background-color:transparent;color:#666;transition:all .2s ease;border-radius:50%;width:36px;height:36px}.formheader[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]:hover{color:#dc3545;transform:scale(1.1)}@media (max-width: 768px){.sidebar-content[_ngcontent-%COMP%]{padding:.5rem}.command-group[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.command-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.formheader[_ngcontent-%COMP%]{padding:.25rem}}.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.sidebar-content[_ngcontent-%COMP%]     .mdc-text-field__input{padding-left:10px}.sidebar-content[_ngcontent-%COMP%]     .mat-mdc-select-trigger{padding-left:10px}  .mat-mdc-select-panel{background:#f2f2f2!important;border:1px solid #d8d8d8;box-shadow:0 4px 12px #0000002e;padding-top:4px;padding-bottom:4px}  .mat-mdc-option.mdc-list-item--selected,   .mat-mdc-option.mdc-list-item--selected.mdc-list-item--with-one-line .mdc-list-item__primary-text,   .mat-mdc-option:hover{background:#ffe1e1!important}']})};var U$=["canvas"],E_=class n{constructor(e){this.drawservice=e}rotation;rotationChange=new Ve;canvasRef;cameraReset=new Ve;scene=new Ba;camera=new Hn(45,1,.1,1e3);renderer;size=Math.min(window.innerWidth,window.innerHeight)*.15;cube;cornerSpheres=[];raycaster=new ja;mouse=new ue;targetQuat=new Nr;animating=!1;ngOnChanges(e){e.rotation&&this.cube&&!this.animating&&this.cube.rotation.copy(this.rotation)}ngAfterViewInit(){this.renderer=new Ja({canvas:this.canvasRef.nativeElement,alpha:!0,antialias:!0}),this.renderer.setSize(this.size,this.size),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Fc,this.camera.position.set(0,0,3),this.camera.lookAt(0,0,0);let e=new Kr(1,1,1),t=[new gr({color:16733525,roughness:.5,metalness:1}),new gr({color:16733525,roughness:.5,metalness:1}),new gr({color:5635925,roughness:.5,metalness:1}),new gr({color:5635925,roughness:.5,metalness:1}),new gr({color:5592575,roughness:.5,metalness:1}),new gr({color:5592575,roughness:.5,metalness:1})];this.cube=new On(e,t),this.cube.castShadow=!0,this.cube.receiveShadow=!0,this.scene.add(this.cube);let i=new Fs(16777215,10);i.position.set(5,5,2),i.castShadow=!0;let r=new Fs(16777215,1);r.position.set(-5,-5,-2),r.castShadow=!0,this.scene.add(i,r),this.addAxesArrows(),this.addCornerSpheres(),this.camera.up.set(0,1,0);let o=this.drawservice.getView();this.cube.rotation.x=o.rootGroup.rotation.x,this.cube.rotation.y=o.rootGroup.rotation.y,this.cube.rotation.z=o.rootGroup.rotation.z,this.canvasRef.nativeElement.addEventListener("click",s=>this.onClick(s)),this.animate()}addCornerSpheres(){let e=new hf(.1,50,50),t=new gr({color:16777215,roughness:.5,metalness:2});[[.5,.5,.5],[.5,.5,-.5],[.5,-.5,.5],[.5,-.5,-.5],[-.5,.5,.5],[-.5,.5,-.5],[-.5,-.5,.5],[-.5,-.5,-.5]].forEach((r,o)=>{let s=new On(e,t.clone());s.position.set(r[0],r[1],r[2]),s.userData.cornerIndex=o,s.castShadow=!0,s.receiveShadow=!0,this.cube.add(s),this.cornerSpheres.push(s)})}addAxesArrows(){let r=new Ga(new A(1,0,0),new A(-.6,-.6,-.6),1.5,16711680,.2,.2),o=new Ga(new A(0,1,0),new A(-.6,-.6,-.6),1.5,65280,.2,.2),s=new Ga(new A(0,0,1),new A(-.6,-.6,-.6),1.5,255,.2,.2);r.raycast=()=>{},o.raycast=()=>{},s.raycast=()=>{},this.cube.add(r,o,s)}animate(){requestAnimationFrame(()=>this.animate()),this.animating&&(this.cube.quaternion.slerp(this.targetQuat,.1),this.cube.quaternion.angleTo(this.targetQuat)<.001&&(this.cube.quaternion.copy(this.targetQuat),this.animating=!1)),this.renderer.render(this.scene,this.camera)}onClick(e){let t=this.canvasRef.nativeElement.getBoundingClientRect();this.mouse.x=(e.clientX-t.left)/t.width*2-1,this.mouse.y=-((e.clientY-t.top)/t.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);let i=this.raycaster.intersectObjects([this.cube],!0);if(i.length>0){let r=i.find(s=>this.cornerSpheres.includes(s.object));if(r){let a=r.object.userData.cornerIndex,l=this.getIsometricRotation(a);this.targetQuat.setFromEuler(l),this.animating=!0,this.rotationChange.emit(l),this.cameraReset.emit({position:{x:0,y:0,z:10},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rootGroupPosition:{x:0,y:0,z:0}});return}let o=i.find(s=>s.object===this.cube);if(o){let s=Math.floor(o.faceIndex/2),a=new Tn;switch(s){case 0:a.set(-Math.PI/2,0,-Math.PI/2);break;case 1:a.set(-Math.PI/2,0,Math.PI/2);break;case 2:a.set(Math.PI/2,Math.PI,0);break;case 3:a.set(-Math.PI/2,0,0);break;case 4:a.set(0,0,0);break;case 5:a.set(0,Math.PI,Math.PI);break}this.targetQuat.setFromEuler(a),this.animating=!0,this.rotationChange.emit(a),this.cameraReset.emit({position:{x:0,y:0,z:10},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rootGroupPosition:{x:0,y:0,z:0}})}}}getIsometricRotation(e){let t=Math.PI/4,i=Math.PI/3,r=Math.PI*3/4;switch(e){case 0:return console.log("1"),new Tn(-i,0,-r,"XYZ");case 1:return console.log("2"),new Tn(-r,0,-r,"XYZ");case 2:return console.log("3"),new Tn(-i,0,-t,"XYZ");case 3:return console.log("4"),new Tn(-r,0,-t,"XYZ");case 4:return console.log("5"),new Tn(-i,0,+r,"XYZ");case 5:return console.log("6"),new Tn(-r,0,+r,"XYZ");case 6:return console.log("7"),new Tn(-i,0,+t,"XYZ");case 7:return console.log("8"),new Tn(-r,0,+t,"XYZ");default:return new Tn}}onResize(){this.renderer.setSize(this.size,this.size),this.camera.updateProjectionMatrix()}static \u0275fac=function(t){return new(t||n)(it(ci))};static \u0275cmp=ht({type:n,selectors:[["app-viewcube"]],viewQuery:function(t,i){if(t&1&&tn(U$,7),t&2){let r;Rt(r=Nt())&&(i.canvasRef=r.first)}},hostBindings:function(t,i){t&1&&lt("resize",function(){return i.onResize()},Gu)},inputs:{rotation:"rotation"},outputs:{rotationChange:"rotationChange",cameraReset:"cameraReset"},features:[Sn],decls:2,vars:0,consts:[["canvas",""]],template:function(t,i){t&1&&Gn(0,"canvas",null,0)},styles:["canvas[_ngcontent-%COMP%]{cursor:pointer}"]})};var B$=["canvas"],Gf=class n{constructor(e){this.drawservice=e}rotationChange=new Ve;canvasRef;_cameraReset;set cameraReset(e){if(this._cameraReset=e,e){this.camera.position.set(e.position.x,e.position.y,e.position.z),this.camera.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z),this.rootGroup.scale.set(e.scale.x,e.scale.y,e.scale.z),e.rootGroupPosition&&this.rootGroup.position.set(e.rootGroupPosition.x,e.rootGroupPosition.y,e.rootGroupPosition.z);let t=this.drawservice.getView();t.camera.position=$({},e.position),t.camera.rotation=$({},e.rotation),t.rootGroup.scale=$({},e.scale),e.rootGroupPosition&&(t.rootGroup.position=$({},e.rootGroupPosition)),this.drawservice.setView(t)}}scene=new Ba;camera=new Hn(75,window.innerWidth/window.innerHeight,.1,1e3);renderer=new Ja({antialias:!0});rootGroup=new Vo;objects=[];raycaster=new ja;mouse=new ue;rightClick=!1;middleClick=!1;targetRotation=null;rotationLerpAlpha=.1;isRotating=!1;setRotation(e){this.targetRotation=e.clone(),this.isRotating=!0}init(){this.renderer=new Ja({canvas:this.canvasRef.nativeElement,antialias:!0});let e=window.innerWidth*.1,t=Math.max(window.innerHeight*.08,80);this.renderer.setSize(window.innerWidth-e,window.innerHeight-t),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Fc,new mf().load("./bg-gray.png",f=>{let m=document.createElement("canvas");m.width=f.image.width,m.height=f.image.height;let v=m.getContext("2d");v.drawImage(f.image,0,0),v.globalAlpha=.6,v.fillStyle="#000",v.fillRect(0,0,m.width,m.height);let g=new Fr(m);g.needsUpdate=!0,this.scene.background=g});let r=10,o=10,s=16120058,a=12177124,l=new yf(r,o,a,s);l.position.set(0,0,0),l.rotation.x=Math.PI/2,l.castShadow=!0,l.receiveShadow=!0,this.rootGroup.add(l);let c=this.drawservice.getView();this.camera.position.set(c.camera.position.x,c.camera.position.y,c.camera.position.z),this.camera.rotation.set(c.camera.rotation.x,c.camera.rotation.y,c.camera.rotation.z),this.rootGroup.position.set(c.rootGroup.position.x,c.rootGroup.position.y,c.rootGroup.position.z),this.rootGroup.rotation.set(c.rootGroup.rotation.x,c.rootGroup.rotation.y,c.rootGroup.rotation.z),this.camera.up.set(0,1,0),this.camera.lookAt(0,0,0);let u=new _f(16777215,.2),d=new Fs(16777215,2);d.position.set(10,15,5),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048;let h=new gf(16777215,100);h.position.set(-10,-10,5),this.scene.add(u),this.scene.add(d),this.scene.add(h),this.scene.add(this.rootGroup)}loadModels(){let e=this.drawservice.loadObjects(),t=e.find(d=>d.selected),i={color:9222612,roughness:.5,metalness:.5,flatShading:!0},r={color:8308963,roughness:.5,metalness:.1,flatShading:!0},o={color:9222612,roughness:.5,metalness:.5,flatShading:!0,transparent:!0,opacity:.5},s=2437688,a=16757575,l=8947848,c=(d,h,f=!1)=>{if(d.type==="Square"){let m=new Kr(d.l,d.w,d.h),v;f?v=new vr(o):h?v=new vr(r):v=new vr(i);let g=new On(m,v);g.position.set(d.position[0],d.position[1],(d.position[2]||0)+d.h/2),g.rotation.x=d.rotation?d.rotation[0]*Math.PI/180:0,g.rotation.y=d.rotation?d.rotation[1]*Math.PI/180:0,g.rotation.z=d.rotation?d.rotation[2]*Math.PI/180:0,g.userData=d,g.castShadow=!f,g.receiveShadow=!0,this.rootGroup.add(g),f||this.objects.push(g);let p=new Va(m),T=f?l:h?a:s,w=new Ns(p,new Jr({color:T}));w.position.copy(g.position),w.rotation.copy(g.rotation),this.rootGroup.add(w)}else if(d.type==="Circle"){let m=new Ac(d.r,d.r,d.h,d.curveSegments<=1e4&&d.curveSegments>2?d.curveSegments:1e4),v;f?v=new vr(o):h?v=new vr(r):v=new vr(i);let g=new On(m,v);g.position.set(d.position[0],d.position[1],(d.position[2]||0)+d.h/2),g.rotation.x=d.rotation?(d.rotation[0]-90)*Math.PI/180:Math.PI/2,g.rotation.y=d.rotation?d.rotation[1]*Math.PI/180:0,g.rotation.z=d.rotation?d.rotation[2]*Math.PI/180:0,g.userData=d,g.castShadow=!f,g.receiveShadow=!0,this.rootGroup.add(g),f||this.objects.push(g);let p=new Va(m),T=f?l:h?a:s,w=new Ns(p,new Jr({color:T}));w.position.copy(g.position),w.rotation.copy(g.rotation),this.rootGroup.add(w)}},u=(d,h,f=!1)=>{let m=new Nc,v=0,g=0,p=E=>{switch(E.type){case"moveTo":m.moveTo(E.x,E.y),v=E.x,g=E.y;break;case"lineTo":m.lineTo(E.x,E.y),v=E.x,g=E.y;break;case"quadraticCurveTo":let b=new ue(v,g),I=new ue(E.cpX,E.cpY),H=new ue(E.x,E.y),U=new ue(2*I.x-.5*(b.x+H.x),2*I.y-.5*(b.y+H.y));m.quadraticCurveTo(U.x,U.y,H.x,H.y),v=E.x,g=E.y;break}};d.commands.forEach(E=>p(E));let T={curveSegments:1e4,depth:d.h,bevelEnabled:!1},w=new df(m,T),y;f?y=new vr(Ye($({},o),{side:Ki})):y=new vr(Ye($({},h?r:i),{side:Ki}));let N=new On(w,y);N.position.set(...d.position),N.rotation.x=d.rotation[0]*Math.PI/180,N.rotation.y=d.rotation[1]*Math.PI/180,N.rotation.z=d.rotation[2]*Math.PI/180,N.userData=d,N.castShadow=!f,N.receiveShadow=!0,this.rootGroup.add(N),f||this.objects.push(N);let R=f?l:h?a:s,D=new Va(w),P=new Ns(D,new Jr({color:R}));P.position.copy(N.position),P.rotation.copy(N.rotation),this.rootGroup.add(P)};e.forEach(d=>{d.type==="Freeform"?u(d,d.selected,d.ghost||!1):c(d,d.selected,d.ghost||!1)})}animate(){if(requestAnimationFrame(()=>this.animate()),this.isRotating&&this.targetRotation){let e=this.rootGroup.rotation,t=this.targetRotation;e.x+=(t.x-e.x)*this.rotationLerpAlpha,e.y+=(t.y-e.y)*this.rotationLerpAlpha,e.z+=(t.z-e.z)*this.rotationLerpAlpha,Math.abs(e.x-t.x)<.001&&Math.abs(e.y-t.y)<.001&&Math.abs(e.z-t.z)<.001&&(this.rootGroup.rotation.copy(t),this.isRotating=!1,this.targetRotation=null),this.rotationChange.emit(this.rootGroup.rotation.clone())}this.renderer.render(this.scene,this.camera)}ngAfterViewInit(){this.init(),this.loadModels(),this.animate(),this.canvasRef.nativeElement.addEventListener("click",this.onClick.bind(this)),this.canvasRef.nativeElement.addEventListener("mousedown",e=>{e.button===2&&(e.preventDefault(),this.rightClick=!0),e.button===1&&(this.middleClick=!0)}),this.canvasRef.nativeElement.addEventListener("mouseup",e=>{e.button===2&&(this.rightClick=!1),e.button===1&&(this.middleClick=!1)}),this.canvasRef.nativeElement.addEventListener("wheel",e=>{e.preventDefault(),this.onMouseWheel(e)}),this.canvasRef.nativeElement.addEventListener("mousemove",e=>{this.rightClick&&this.onMouseMove(e,"right"),this.middleClick&&this.onMouseMove(e,"middle")})}onMouseMove(e,t){let i=this.drawservice.getView();t==="right"?(this.rootGroup.rotateOnWorldAxis(new A(0,1,0),e.movementX*.01),this.rootGroup.rotation.x+=e.movementY*.01,this.rotationChange.emit(this.rootGroup.rotation.clone()),i.rootGroup.rotation.x=this.rootGroup.rotation.x,i.rootGroup.rotation.y=this.rootGroup.rotation.y,i.rootGroup.rotation.z=this.rootGroup.rotation.z):t==="middle"&&(this.rootGroup.position.y-=e.movementY*.01,this.rootGroup.position.x+=e.movementX*.01,i.rootGroup.position.x=this.rootGroup.position.x,i.rootGroup.position.y=this.rootGroup.position.y,i.rootGroup.position.z=this.rootGroup.position.z),this.drawservice.setView(i)}onMouseWheel(e){let i=this.drawservice.getView();e.deltaY<0?this.rootGroup.scale.multiplyScalar(1.1):e.deltaY>0&&this.rootGroup.scale.multiplyScalar(1/1.1),this.drawservice.setView(i)}onClick(e){let t=this.drawservice.loadObjects(),i=this.canvasRef.nativeElement.getBoundingClientRect();this.mouse.x=(e.clientX-i.left)/i.width*2-1,this.mouse.y=-((e.clientY-i.top)/i.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);let r=this.raycaster.intersectObjects(this.objects);if(r.length>0){let s=r[0].object.userData,a=t.find(c=>c.selected&&!c.ghost);if(a&&a.id===s.id)return;this.drawservice.removeGhostObjects(),t.forEach(c=>c.selected=!1);let l=t.find(c=>c.id===s.id&&!c.ghost);l&&(l.selected=!0),localStorage.setItem("model-data",JSON.stringify(t))}else this.drawservice.removeGhostObjects(),this.drawservice.deselectAllObjects();this.clearScene(),this.loadModels(),location.reload()}clearScene(){[...this.rootGroup.children].forEach(t=>{t!==this.rootGroup.children.find(i=>i.isGridHelper)&&this.rootGroup.remove(t)}),this.objects=[]}onResize(){let e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}static \u0275fac=function(t){return new(t||n)(it(ci))};static \u0275cmp=ht({type:n,selectors:[["app-main-view"]],viewQuery:function(t,i){if(t&1&&tn(B$,7),t&2){let r;Rt(r=Nt())&&(i.canvasRef=r.first)}},hostBindings:function(t,i){t&1&&lt("resize",function(){return i.onResize()},Gu)},inputs:{cameraReset:"cameraReset"},outputs:{rotationChange:"rotationChange"},decls:2,vars:0,consts:[["canvas",""]],template:function(t,i){t&1&&Gn(0,"canvas",null,0)},dependencies:[$r],styles:["canvas[_ngcontent-%COMP%]{border:2px solid #ff0000;width:100%;height:100%}"]})};var V$=n=>[n];function H$(n,e){if(n&1){let t=Hi();ce(0,"app-sidebar-right",6),lt("positionChange",function(r){Jn(t);let o=Xt();return Qn(o.sidebarRightPosition=r)}),le()}if(n&2){let t=Xt();cn("position",t.sidebarRightPosition)("selectedObjectInput",V0(2,V$,t.selectedObject))}}var w_=class n{constructor(e){this.drawservice=e}mainView;cameraResetValue=null;title="Minimal-CAD";sidebarRightPosition=[0,0,0];selectedObject=null;currentRotation=new Tn;ngOnInit(){let e=this.drawservice.loadObjects();this.selectedObject=e.find(t=>t.selected)||null}onRotationChanged(e){this.currentRotation=e;let t=this.drawservice.getView();t.rootGroup.rotation.x=e.x,t.rootGroup.rotation.y=e.y,t.rootGroup.rotation.z=e.z,this.drawservice.setView(t)}onViewcubeRotation(e){this.mainView&&this.mainView.setRotation(e);let t=this.drawservice.getView();t.rootGroup.rotation.x=e.x,t.rootGroup.rotation.y=e.y,t.rootGroup.rotation.z=e.z,this.drawservice.setView(t)}onViewcubeCameraReset(e){this.cameraResetValue=e,setTimeout(()=>{this.cameraResetValue=null},100)}onRightClick(e){e.preventDefault()}static \u0275fac=function(t){return new(t||n)(it(ci))};static \u0275cmp=ht({type:n,selectors:[["app-root"]],viewQuery:function(t,i){if(t&1&&tn(Gf,5),t&2){let r;Rt(r=Nt())&&(i.mainView=r.first)}},hostBindings:function(t,i){t&1&&lt("contextmenu",function(o){return i.onRightClick(o)})},decls:6,vars:3,consts:[[1,"main-app"],[1,"header"],[1,"main-view",3,"rotationChange","cameraReset"],[1,"sidebar-left"],[1,"sidebar-right",3,"position","selectedObjectInput"],[1,"viewcube",3,"rotationChange","cameraReset","rotation"],[1,"sidebar-right",3,"positionChange","position","selectedObjectInput"]],template:function(t,i){t&1&&(ce(0,"main",0),Tt(1,"app-header",1),ce(2,"app-main-view",2),lt("rotationChange",function(o){return i.onRotationChanged(o)}),le(),Tt(3,"app-sidebar-left",3),Ht(4,H$,1,4,"app-sidebar-right",4),ce(5,"app-viewcube",5),lt("rotationChange",function(o){return i.onViewcubeRotation(o)})("cameraReset",function(o){return i.onViewcubeCameraReset(o)}),le()()),t&2&&(qe(2),cn("cameraReset",i.cameraResetValue),qe(2),zt(i.selectedObject?4:-1),qe(),cn("rotation",i.currentRotation))},dependencies:[zv,Gf,jv,x_,E_,$r],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;--main-padding: 1vw}.main-app[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:not(.main-view){padding:var(--main-padding)}.main-app[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header header header" "sidebar-left main-view main-view" "sidebar-left main-view main-view";background-color:#d9d9d9;height:100vh;width:100vw;margin:0;padding:0;overflow:hidden}.header[_ngcontent-%COMP%]{grid-area:header;background:#f88;height:8vh;min-height:80px;width:100%}.main-view[_ngcontent-%COMP%]{grid-area:main-view;background:#d9d9d9;width:90vw;height:92vh}.sidebar-left[_ngcontent-%COMP%]{grid-area:sidebar-left;background:#fff;margin:0;justify-self:start;width:10vw;height:92vh;padding:0!important}.sidebar-right[_ngcontent-%COMP%]{background:#afafaf;position:absolute;top:30vh;right:1vw;max-width:450px}.viewcube[_ngcontent-%COMP%]{background:transparent;position:absolute;top:max(8vh,80px);right:0}']})};hx(w_,sR).catch(n=>console.error(n));
